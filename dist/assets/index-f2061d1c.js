import{r as m,a as Bn,b as cc,d as Vn,c as fe,R as ba,g as dc}from"./vendor-f8118e5f.js";import{R as uc,L as hc,C as fc,X as xc,Y as mc,T as gc,a as pc}from"./charts-2312fedd.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var qn={exports:{}},Yr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc=m,bc=Symbol.for("react.element"),vc=Symbol.for("react.fragment"),wc=Object.prototype.hasOwnProperty,kc=yc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jc={key:!0,ref:!0,__self:!0,__source:!0};function Hn(t,e,r){var s,i={},n=null,o=null;r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)wc.call(e,s)&&!jc.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:bc,type:t,key:n,ref:o,props:i,_owner:kc.current}}Yr.Fragment=vc;Yr.jsx=Hn;Yr.jsxs=Hn;qn.exports=Yr;var a=qn.exports,Vs={},ii=Bn;Vs.createRoot=ii.createRoot,Vs.hydrateRoot=ii.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rr(){return rr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},rr.apply(this,arguments)}var qe;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qe||(qe={}));const ni="popstate";function Nc(t){t===void 0&&(t={});function e(s,i){let{pathname:n,search:o,hash:l}=s.location;return qs("",{pathname:n,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){return typeof i=="string"?i:Ir(i)}return Cc(e,r,null,t)}function te(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _c(){return Math.random().toString(36).substr(2,8)}function oi(t,e){return{usr:t.state,key:t.key,idx:e}}function qs(t,e,r,s){return r===void 0&&(r=null),rr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?It(e):e,{state:r,key:e&&e.key||s||_c()})}function Ir(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function It(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function Cc(t,e,r,s){s===void 0&&(s={});let{window:i=document.defaultView,v5Compat:n=!1}=s,o=i.history,l=qe.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(rr({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=qe.Pop;let k=u(),E=k==null?null:k-d;d=k,c&&c({action:l,location:w.location,delta:E})}function f(k,E){l=qe.Push;let y=qs(w.location,k,E);r&&r(y,k),d=u()+1;let p=oi(y,d),A=w.createHref(y);try{o.pushState(p,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(A)}n&&c&&c({action:l,location:w.location,delta:1})}function x(k,E){l=qe.Replace;let y=qs(w.location,k,E);r&&r(y,k),d=u();let p=oi(y,d),A=w.createHref(y);o.replaceState(p,"",A),n&&c&&c({action:l,location:w.location,delta:0})}function g(k){let E=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof k=="string"?k:Ir(k);return y=y.replace(/ $/,"%20"),te(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let w={get action(){return l},get location(){return t(i,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ni,h),c=k,()=>{i.removeEventListener(ni,h),c=null}},createHref(k){return e(i,k)},createURL:g,encodeLocation(k){let E=g(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:f,replace:x,go(k){return o.go(k)}};return w}var li;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(li||(li={}));function Sc(t,e,r){return r===void 0&&(r="/"),Tc(t,e,r,!1)}function Tc(t,e,r,s){let i=typeof e=="string"?It(e):e,n=va(i.pathname||"/",r);if(n==null)return null;let o=Wn(t);Pc(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Uc(n);l=Fc(o[c],d,s)}return l}function Wn(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let i=(n,o,l)=>{let c={relativePath:l===void 0?n.path||"":l,caseSensitive:n.caseSensitive===!0,childrenIndex:o,route:n};c.relativePath.startsWith("/")&&(te(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=He([s,c.relativePath]),u=r.concat(c);n.children&&n.children.length>0&&(te(n.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Wn(n.children,e,u,d)),!(n.path==null&&!n.index)&&e.push({path:d,score:Oc(d,n.index),routesMeta:u})};return t.forEach((n,o)=>{var l;if(n.path===""||!((l=n.path)!=null&&l.includes("?")))i(n,o);else for(let c of Gn(n.path))i(n,o,c)}),e}function Gn(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,i=r.endsWith("?"),n=r.replace(/\?$/,"");if(s.length===0)return i?[n,""]:[n];let o=Gn(s.join("/")),l=[];return l.push(...o.map(c=>c===""?n:[n,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Pc(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Mc(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const Ac=/^:[\w-]+$/,Ec=3,Lc=2,Rc=1,Ic=10,Dc=-2,ci=t=>t==="*";function Oc(t,e){let r=t.split("/"),s=r.length;return r.some(ci)&&(s+=Dc),e&&(s+=Lc),r.filter(i=>!ci(i)).reduce((i,n)=>i+(Ac.test(n)?Ec:n===""?Rc:Ic),s)}function Mc(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function Fc(t,e,r){r===void 0&&(r=!1);let{routesMeta:s}=t,i={},n="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=n==="/"?e:e.slice(n.length)||"/",h=di({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&r&&!s[s.length-1].route.index&&(h=di({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:He([n,h.pathname]),pathnameBase:Hc(He([n,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(n=He([n,h.pathnameBase]))}return o}function di(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=$c(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let n=i[0],o=n.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:f,isOptional:x}=u;if(f==="*"){let w=l[h]||"";o=n.slice(0,n.length-w.length).replace(/(.)\/+$/,"$1")}const g=l[h];return x&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:n,pathnameBase:o,pattern:t}}function $c(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),zn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function Uc(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zn(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}function Bc(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:i=""}=typeof t=="string"?It(t):t;return{pathname:r?r.startsWith("/")?r:Vc(r,e):e,search:zc(s),hash:Wc(i)}}function Vc(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function vs(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qc(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function wa(t,e){let r=qc(t);return e?r.map((s,i)=>i===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function ka(t,e,r,s){s===void 0&&(s=!1);let i;typeof t=="string"?i=It(t):(i=rr({},t),te(!i.pathname||!i.pathname.includes("?"),vs("?","pathname","search",i)),te(!i.pathname||!i.pathname.includes("#"),vs("#","pathname","hash",i)),te(!i.search||!i.search.includes("#"),vs("#","search","hash",i)));let n=t===""||i.pathname==="",o=n?"/":i.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=Bc(i,l),d=o&&o!=="/"&&o.endsWith("/"),u=(n||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const He=t=>t.join("/").replace(/\/\/+/g,"/"),Hc=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zc=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wc=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Gc(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Kn=["post","put","patch","delete"];new Set(Kn);const Kc=["get",...Kn];new Set(Kc);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sr(){return sr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},sr.apply(this,arguments)}const ja=m.createContext(null),Jc=m.createContext(null),Xe=m.createContext(null),Zr=m.createContext(null),Ye=m.createContext({outlet:null,matches:[],isDataRoute:!1}),Jn=m.createContext(null);function Xc(t,e){let{relative:r}=e===void 0?{}:e;Dt()||te(!1);let{basename:s,navigator:i}=m.useContext(Xe),{hash:n,pathname:o,search:l}=Yn(t,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:He([s,o])),i.createHref({pathname:c,search:l,hash:n})}function Dt(){return m.useContext(Zr)!=null}function Ot(){return Dt()||te(!1),m.useContext(Zr).location}function Xn(t){m.useContext(Xe).static||m.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=m.useContext(Ye);return t?cd():Yc()}function Yc(){Dt()||te(!1);let t=m.useContext(ja),{basename:e,future:r,navigator:s}=m.useContext(Xe),{matches:i}=m.useContext(Ye),{pathname:n}=Ot(),o=JSON.stringify(wa(i,r.v7_relativeSplatPath)),l=m.useRef(!1);return Xn(()=>{l.current=!0}),m.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=ka(d,JSON.parse(o),n,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:He([e,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[e,s,o,n,t])}function Yn(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=m.useContext(Xe),{matches:i}=m.useContext(Ye),{pathname:n}=Ot(),o=JSON.stringify(wa(i,s.v7_relativeSplatPath));return m.useMemo(()=>ka(t,JSON.parse(o),n,r==="path"),[t,o,n,r])}function Zc(t,e){return Qc(t,e)}function Qc(t,e,r,s){Dt()||te(!1);let{navigator:i}=m.useContext(Xe),{matches:n}=m.useContext(Ye),o=n[n.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ot(),u;if(e){var h;let k=typeof e=="string"?It(e):e;c==="/"||(h=k.pathname)!=null&&h.startsWith(c)||te(!1),u=k}else u=d;let f=u.pathname||"/",x=f;if(c!=="/"){let k=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(k.length).join("/")}let g=Sc(t,{pathname:x}),w=ad(g&&g.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:He([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:He([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),n,r,s);return e&&w?m.createElement(Zr.Provider,{value:{location:sr({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qe.Pop}},w):w}function ed(){let t=ld(),e=Gc(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},n=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),r?m.createElement("pre",{style:i},r):null,n)}const td=m.createElement(ed,null);class rd extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?m.createElement(Ye.Provider,{value:this.props.routeContext},m.createElement(Jn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sd(t){let{routeContext:e,match:r,children:s}=t,i=m.useContext(ja);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(Ye.Provider,{value:e},s)}function ad(t,e,r,s){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var n;if(!r)return null;if(r.errors)t=r.matches;else if((n=s)!=null&&n.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||te(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:x}=r,g=h.route.loader&&f[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||g){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let x,g=!1,w=null,k=null;r&&(x=l&&h.route.id?l[h.route.id]:void 0,w=h.route.errorElement||td,c&&(d<0&&f===0?(dd("route-fallback",!1),g=!0,k=null):d===f&&(g=!0,k=h.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,f+1)),y=()=>{let p;return x?p=w:g?p=k:h.route.Component?p=m.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=u,m.createElement(sd,{match:h,routeContext:{outlet:u,matches:E,isDataRoute:r!=null},children:p})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?m.createElement(rd,{location:r.location,revalidation:r.revalidation,component:w,error:x,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var Zn=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Zn||{}),Dr=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dr||{});function id(t){let e=m.useContext(ja);return e||te(!1),e}function nd(t){let e=m.useContext(Jc);return e||te(!1),e}function od(t){let e=m.useContext(Ye);return e||te(!1),e}function Qn(t){let e=od(),r=e.matches[e.matches.length-1];return r.route.id||te(!1),r.route.id}function ld(){var t;let e=m.useContext(Jn),r=nd(Dr.UseRouteError),s=Qn(Dr.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function cd(){let{router:t}=id(Zn.UseNavigateStable),e=Qn(Dr.UseNavigateStable),r=m.useRef(!1);return Xn(()=>{r.current=!0}),m.useCallback(function(i,n){n===void 0&&(n={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,sr({fromRouteId:e},n)))},[t,e])}const ui={};function dd(t,e,r){!e&&!ui[t]&&(ui[t]=!0)}function ud(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function eo(t){let{to:e,replace:r,state:s,relative:i}=t;Dt()||te(!1);let{future:n,static:o}=m.useContext(Xe),{matches:l}=m.useContext(Ye),{pathname:c}=Ot(),d=Qr(),u=ka(e,wa(l,n.v7_relativeSplatPath),c,i==="path"),h=JSON.stringify(u);return m.useEffect(()=>d(JSON.parse(h),{replace:r,state:s,relative:i}),[d,h,i,r,s]),null}function de(t){te(!1)}function hd(t){let{basename:e="/",children:r=null,location:s,navigationType:i=qe.Pop,navigator:n,static:o=!1,future:l}=t;Dt()&&te(!1);let c=e.replace(/^\/*/,"/"),d=m.useMemo(()=>({basename:c,navigator:n,static:o,future:sr({v7_relativeSplatPath:!1},l)}),[c,l,n,o]);typeof s=="string"&&(s=It(s));let{pathname:u="/",search:h="",hash:f="",state:x=null,key:g="default"}=s,w=m.useMemo(()=>{let k=va(u,c);return k==null?null:{location:{pathname:k,search:h,hash:f,state:x,key:g},navigationType:i}},[c,u,h,f,x,g,i]);return w==null?null:m.createElement(Xe.Provider,{value:d},m.createElement(Zr.Provider,{children:r,value:w}))}function fd(t){let{children:e,location:r}=t;return Zc(Hs(e),r)}new Promise(()=>{});function Hs(t,e){e===void 0&&(e=[]);let r=[];return m.Children.forEach(t,(s,i)=>{if(!m.isValidElement(s))return;let n=[...e,i];if(s.type===m.Fragment){r.push.apply(r,Hs(s.props.children,n));return}s.type!==de&&te(!1),!s.props.index||!s.props.children||te(!1);let o={id:s.props.id||n.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Hs(s.props.children,n)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},zs.apply(this,arguments)}function xd(t,e){if(t==null)return{};var r={},s=Object.keys(t),i,n;for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function md(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gd(t,e){return t.button===0&&(!e||e==="_self")&&!md(t)}const pd=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yd="6";try{window.__reactRouterVersion=yd}catch{}const bd="startTransition",hi=cc[bd];function vd(t){let{basename:e,children:r,future:s,window:i}=t,n=m.useRef();n.current==null&&(n.current=Nc({window:i,v5Compat:!0}));let o=n.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},u=m.useCallback(h=>{d&&hi?hi(()=>c(h)):c(h)},[c,d]);return m.useLayoutEffect(()=>o.listen(u),[o,u]),m.useEffect(()=>ud(s),[s]),m.createElement(hd,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const wd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kd=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Na=m.forwardRef(function(e,r){let{onClick:s,relative:i,reloadDocument:n,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=e,f=xd(e,pd),{basename:x}=m.useContext(Xe),g,w=!1;if(typeof d=="string"&&kd.test(d)&&(g=d,wd))try{let p=new URL(window.location.href),A=d.startsWith("//")?new URL(p.protocol+d):new URL(d),_=va(A.pathname,x);A.origin===p.origin&&_!=null?d=_+A.search+A.hash:w=!0}catch{}let k=Xc(d,{relative:i}),E=jd(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:i,viewTransition:h});function y(p){s&&s(p),p.defaultPrevented||E(p)}return m.createElement("a",zs({},f,{href:g||k,onClick:w||n?s:y,ref:r,target:c}))});var fi;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fi||(fi={}));var xi;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xi||(xi={}));function jd(t,e){let{target:r,replace:s,state:i,preventScrollReset:n,relative:o,viewTransition:l}=e===void 0?{}:e,c=Qr(),d=Ot(),u=Yn(t,{relative:o});return m.useCallback(h=>{if(gd(h,r)){h.preventDefault();let f=s!==void 0?s:Ir(d)===Ir(u);c(t,{replace:f,state:i,preventScrollReset:n,relative:o,viewTransition:l})}},[d,c,u,s,i,r,t,n,o,l])}let Nd={data:""},_d=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Nd,Cd=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Sd=/\/\*[^]*?\*\/|  +/g,mi=/\n+/g,Be=(t,e)=>{let r="",s="",i="";for(let n in t){let o=t[n];n[0]=="@"?n[1]=="i"?r=n+" "+o+";":s+=n[1]=="f"?Be(o,n):n+"{"+Be(o,n[1]=="k"?"":e)+"}":typeof o=="object"?s+=Be(o,e?e.replace(/([^,])+/g,l=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):n):o!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Be.p?Be.p(n,o):n+":"+o+";")}return r+(e&&i?e+"{"+i+"}":i)+s},Se={},to=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+to(t[r]);return e}return t},Td=(t,e,r,s,i)=>{let n=to(t),o=Se[n]||(Se[n]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(n));if(!Se[o]){let c=n!==t?t:(d=>{let u,h,f=[{}];for(;u=Cd.exec(d.replace(Sd,""));)u[4]?f.shift():u[3]?(h=u[3].replace(mi," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(mi," ").trim();return f[0]})(t);Se[o]=Be(i?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Se.g?Se.g:null;return r&&(Se.g=Se[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Se[o],e,s,l),o},Pd=(t,e,r)=>t.reduce((s,i,n)=>{let o=e[n];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Be(l,""):l===!1?"":l}return s+i+(o??"")},"");function es(t){let e=this||{},r=t.call?t(e.p):t;return Td(r.unshift?r.raw?Pd(r,[].slice.call(arguments,1),e.p):r.reduce((s,i)=>Object.assign(s,i&&i.call?i(e.p):i),{}):r,_d(e.target),e.g,e.o,e.k)}let ro,Ws,Gs;es.bind({g:1});let Ie=es.bind({k:1});function Ad(t,e,r,s){Be.p=e,ro=t,Ws=r,Gs=s}function Ze(t,e){let r=this||{};return function(){let s=arguments;function i(n,o){let l=Object.assign({},n),c=l.className||i.className;r.p=Object.assign({theme:Ws&&Ws()},l),r.o=/ *go\d+/.test(c),l.className=es.apply(r,s)+(c?" "+c:""),e&&(l.ref=o);let d=t;return t[0]&&(d=l.as||t,delete l.as),Gs&&d[0]&&Gs(l),ro(d,l)}return e?e(i):i}}var Ed=t=>typeof t=="function",Or=(t,e)=>Ed(t)?t(e):t,Ld=(()=>{let t=0;return()=>(++t).toString()})(),so=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Rd=20,ao=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,Rd)};case 1:return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case 2:let{toast:r}=e;return ao(t,{type:t.toasts.find(n=>n.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...t,toasts:t.toasts.map(n=>n.id===s||s===void 0?{...n,dismissed:!0,visible:!1}:n)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(n=>({...n,pauseDuration:n.pauseDuration+i}))}}},Pr=[],ct={toasts:[],pausedAt:void 0},mt=t=>{ct=ao(ct,t),Pr.forEach(e=>{e(ct)})},Id={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Dd=(t={})=>{let[e,r]=m.useState(ct),s=m.useRef(ct);m.useEffect(()=>(s.current!==ct&&r(ct),Pr.push(r),()=>{let n=Pr.indexOf(r);n>-1&&Pr.splice(n,1)}),[]);let i=e.toasts.map(n=>{var o,l,c;return{...t,...t[n.type],...n,removeDelay:n.removeDelay||((o=t[n.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:n.duration||((l=t[n.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||Id[n.type],style:{...t.style,...(c=t[n.type])==null?void 0:c.style,...n.style}}});return{...e,toasts:i}},Od=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Ld()}),dr=t=>(e,r)=>{let s=Od(e,t,r);return mt({type:2,toast:s}),s.id},se=(t,e)=>dr("blank")(t,e);se.error=dr("error");se.success=dr("success");se.loading=dr("loading");se.custom=dr("custom");se.dismiss=t=>{mt({type:3,toastId:t})};se.remove=t=>mt({type:4,toastId:t});se.promise=(t,e,r)=>{let s=se.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let n=e.success?Or(e.success,i):void 0;return n?se.success(n,{id:s,...r,...r==null?void 0:r.success}):se.dismiss(s),i}).catch(i=>{let n=e.error?Or(e.error,i):void 0;n?se.error(n,{id:s,...r,...r==null?void 0:r.error}):se.dismiss(s)}),t};var Md=(t,e)=>{mt({type:1,toast:{id:t,height:e}})},Fd=()=>{mt({type:5,time:Date.now()})},Gt=new Map,$d=1e3,Ud=(t,e=$d)=>{if(Gt.has(t))return;let r=setTimeout(()=>{Gt.delete(t),mt({type:4,toastId:t})},e);Gt.set(t,r)},Bd=t=>{let{toasts:e,pausedAt:r}=Dd(t);m.useEffect(()=>{if(r)return;let n=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(n-l.createdAt);if(c<0){l.visible&&se.dismiss(l.id);return}return setTimeout(()=>se.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,r]);let s=m.useCallback(()=>{r&&mt({type:6,time:Date.now()})},[r]),i=m.useCallback((n,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:d}=o||{},u=e.filter(x=>(x.position||d)===(n.position||d)&&x.height),h=u.findIndex(x=>x.id===n.id),f=u.filter((x,g)=>g<h&&x.visible).length;return u.filter(x=>x.visible).slice(...l?[f+1]:[0,f]).reduce((x,g)=>x+(g.height||0)+c,0)},[e]);return m.useEffect(()=>{e.forEach(n=>{if(n.dismissed)Ud(n.id,n.removeDelay);else{let o=Gt.get(n.id);o&&(clearTimeout(o),Gt.delete(n.id))}})},[e]),{toasts:e,handlers:{updateHeight:Md,startPause:Fd,endPause:s,calculateOffset:i}}},Vd=Ie`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qd=Ie`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hd=Ie`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,zd=Ze("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Vd} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qd} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Hd} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Wd=Ie`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Gd=Ze("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Wd} 1s linear infinite;
`,Kd=Ie`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Jd=Ie`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Xd=Ze("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Kd} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Jd} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Yd=Ze("div")`
  position: absolute;
`,Zd=Ze("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Qd=Ie`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eu=Ze("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Qd} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tu=({toast:t})=>{let{icon:e,type:r,iconTheme:s}=t;return e!==void 0?typeof e=="string"?m.createElement(eu,null,e):e:r==="blank"?null:m.createElement(Zd,null,m.createElement(Gd,{...s}),r!=="loading"&&m.createElement(Yd,null,r==="error"?m.createElement(zd,{...s}):m.createElement(Xd,{...s})))},ru=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,su=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,au="0%{opacity:0;} 100%{opacity:1;}",iu="0%{opacity:1;} 100%{opacity:0;}",nu=Ze("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ou=Ze("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,lu=(t,e)=>{let r=t.includes("top")?1:-1,[s,i]=so()?[au,iu]:[ru(r),su(r)];return{animation:e?`${Ie(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ie(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cu=m.memo(({toast:t,position:e,style:r,children:s})=>{let i=t.height?lu(t.position||e||"top-center",t.visible):{opacity:0},n=m.createElement(tu,{toast:t}),o=m.createElement(ou,{...t.ariaProps},Or(t.message,t));return m.createElement(nu,{className:t.className,style:{...i,...r,...t.style}},typeof s=="function"?s({icon:n,message:o}):m.createElement(m.Fragment,null,n,o))});Ad(m.createElement);var du=({id:t,className:e,style:r,onHeightUpdate:s,children:i})=>{let n=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return m.createElement("div",{ref:n,className:e,style:r},i)},uu=(t,e)=>{let r=t.includes("top"),s=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:so()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...s,...i}},hu=es`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,br=16,io=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:s,children:i,containerStyle:n,containerClassName:o})=>{let{toasts:l,handlers:c}=Bd(r);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:br,left:br,right:br,bottom:br,pointerEvents:"none",...n},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(d=>{let u=d.position||e,h=c.calculateOffset(d,{reverseOrder:t,gutter:s,defaultPosition:e}),f=uu(u,h);return m.createElement(du,{id:d.id,key:d.id,onHeightUpdate:c.updateHeight,className:d.visible?hu:"",style:f},d.type==="custom"?Or(d.message,d):i?i(d):m.createElement(cu,{toast:d,position:u}))}))},K=se;const fu="modulepreload",xu=function(t){return"/"+t},gi={},ur=function(e,r,s){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(n=>{if(n=xu(n),n in gi)return;gi[n]=!0;const o=n.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const h=i[u];if(h.href===n&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":fu,o||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e()).catch(n=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n})},mu=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ur(()=>Promise.resolve().then(()=>Mt),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)};class _a extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class gu extends _a{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pu extends _a{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yu extends _a{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ks;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ks||(Ks={}));var bu=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class vu{constructor(e,{headers:r={},customFetch:s,region:i=Ks.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=mu(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var s;return bu(this,void 0,void 0,function*(){try{const{headers:i,method:n,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(g=>{throw new gu(g)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new pu(u);if(!u.ok)throw new yu(u);let f=((s=u.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield u.json():f==="application/octet-stream"?x=yield u.blob():f==="text/event-stream"?x=u:f==="multipart/form-data"?x=yield u.formData():x=yield u.text(),{data:x,error:null}}catch(i){return{data:null,error:i}}})}}var ue={},Ca={},ts={},hr={},rs={},ss={},wu=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Et=wu();const ku=Et.fetch,no=Et.fetch.bind(Et),oo=Et.Headers,ju=Et.Request,Nu=Et.Response,Mt=Object.freeze(Object.defineProperty({__proto__:null,Headers:oo,Request:ju,Response:Nu,default:no,fetch:ku},Symbol.toStringTag,{value:"Module"})),_u=Vn(Mt);var as={};Object.defineProperty(as,"__esModule",{value:!0});let Cu=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};as.default=Cu;var lo=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ss,"__esModule",{value:!0});const Su=lo(_u),Tu=lo(as);let Pu=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Su.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async n=>{var o,l,c;let d=null,u=null,h=null,f=n.status,x=n.statusText;if(n.ok){if(this.method!=="HEAD"){const E=await n.text();E===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=E:u=JSON.parse(E))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=n.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,x="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const w=await n.text();try{d=JSON.parse(w),Array.isArray(d)&&n.status===404&&(u=[],d=null,f=200,x="OK")}catch{n.status===404&&w===""?(f=204,x="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&this.shouldThrowOnError)throw new Tu.default(d)}return{error:d,data:u,count:h,status:f,statusText:x}});return this.shouldThrowOnError||(i=i.catch(n=>{var o,l,c;return{error:{message:`${(o=n==null?void 0:n.name)!==null&&o!==void 0?o:"FetchError"}: ${n==null?void 0:n.message}`,details:`${(l=n==null?void 0:n.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=n==null?void 0:n.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,r)}returns(){return this}overrideTypes(){return this}};ss.default=Pu;var Au=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rs,"__esModule",{value:!0});const Eu=Au(ss);let Lu=class extends Eu.default{select(e){let r=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:s,foreignTable:i,referencedTable:n=i}={}){const o=n?`${n}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,r,{foreignTable:s,referencedTable:i=s}={}){const n=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:s=!1,buffers:i=!1,wal:n=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,s?"settings":null,i?"buffers":null,n?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rs.default=Lu;var Ru=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hr,"__esModule",{value:!0});const Iu=Ru(rs);let Du=class extends Iu.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const s=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:s,type:i}={}){let n="";i==="plain"?n="pl":i==="phrase"?n="ph":i==="websearch"&&(n="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${n}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(e,r,s){return this.url.searchParams.append(e,`not.${r}.${s}`),this}or(e,{foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,r,s){return this.url.searchParams.append(e,`${r}.${s}`),this}};hr.default=Du;var Ou=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ts,"__esModule",{value:!0});const Vt=Ou(hr);let Mu=class{constructor(e,{headers:r={},schema:s,fetch:i}){this.url=e,this.headers=r,this.schema=s,this.fetch=i}select(e,{head:r=!1,count:s}={}){const i=r?"HEAD":"GET";let n=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:s=!0}={}){const i="POST",n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),s||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vt.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:s=!1,count:i,defaultToNull:n=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),n||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Vt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new Vt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Vt.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ts.default=Mu;var is={},ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.version=void 0;ns.version="0.0.0-automated";Object.defineProperty(is,"__esModule",{value:!0});is.DEFAULT_HEADERS=void 0;const Fu=ns;is.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Fu.version}`};var co=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ca,"__esModule",{value:!0});const $u=co(ts),Uu=co(hr),Bu=is;let Vu=class uo{constructor(e,{headers:r={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},Bu.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=i}from(e){const r=new URL(`${this.url}/${e}`);return new $u.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new uo(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:s=!1,get:i=!1,count:n}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||i?(o=s?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return n&&(d.Prefer=`count=${n}`),new Uu.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ca.default=Vu;var Ft=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ue,"__esModule",{value:!0});ue.PostgrestError=ue.PostgrestBuilder=ue.PostgrestTransformBuilder=ue.PostgrestFilterBuilder=ue.PostgrestQueryBuilder=ue.PostgrestClient=void 0;const ho=Ft(Ca);ue.PostgrestClient=ho.default;const fo=Ft(ts);ue.PostgrestQueryBuilder=fo.default;const xo=Ft(hr);ue.PostgrestFilterBuilder=xo.default;const mo=Ft(rs);ue.PostgrestTransformBuilder=mo.default;const go=Ft(ss);ue.PostgrestBuilder=go.default;const po=Ft(as);ue.PostgrestError=po.default;var qu=ue.default={PostgrestClient:ho.default,PostgrestQueryBuilder:fo.default,PostgrestFilterBuilder:xo.default,PostgrestTransformBuilder:mo.default,PostgrestBuilder:go.default,PostgrestError:po.default};const{PostgrestClient:Hu,PostgrestQueryBuilder:ry,PostgrestFilterBuilder:sy,PostgrestTransformBuilder:ay,PostgrestBuilder:iy,PostgrestError:ny}=qu;function zu(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Wu=zu(),Gu="2.11.13",Ku={"X-Client-Info":`realtime-js/${Gu}`},Ju="1.0.0",yo=1e4,Xu=1e3;var Kt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Kt||(Kt={}));var ie;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ie||(ie={}));var ve;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ve||(ve={}));var Js;(function(t){t.websocket="websocket"})(Js||(Js={}));var lt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(lt||(lt={}));class Yu{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,r,s)}_decodeBroadcast(e,r,s){const i=r.getUint8(1),n=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+i));o=o+i;const c=s.decode(e.slice(o,o+n));o=o+n;const d=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class bo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Y;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Y||(Y={}));const pi=(t,e,r={})=>{var s;const i=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((n,o)=>(n[o]=Zu(o,t,e,i),n),{})},Zu=(t,e,r,s)=>{const i=e.find(l=>l.name===t),n=i==null?void 0:i.type,o=r[t];return n&&!s.includes(n)?vo(n,o):Xs(o)},vo=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return r0(e,r)}switch(t){case Y.bool:return Qu(e);case Y.float4:case Y.float8:case Y.int2:case Y.int4:case Y.int8:case Y.numeric:case Y.oid:return e0(e);case Y.json:case Y.jsonb:return t0(e);case Y.timestamp:return s0(e);case Y.abstime:case Y.date:case Y.daterange:case Y.int4range:case Y.int8range:case Y.money:case Y.reltime:case Y.text:case Y.time:case Y.timestamptz:case Y.timetz:case Y.tsrange:case Y.tstzrange:return Xs(e);default:return Xs(e)}},Xs=t=>t,Qu=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},e0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},t0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},r0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let n;const o=t.slice(1,r);try{n=JSON.parse("["+o+"]")}catch{n=o?o.split(","):[]}return n.map(l=>vo(e,l))}return t},s0=t=>typeof t=="string"?t.replace(" ","T"):t,wo=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ws{constructor(e,r,s={},i=yo){this.channel=e,this.event=r,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yi||(yi={}));class Jt{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jt.syncState(this.state,i,n,o),this.pendingDiffs.forEach(c=>{this.state=Jt.syncDiff(this.state,c,n,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},i=>{const{onJoin:n,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jt.syncDiff(this.state,i,n,o),l())}),this.onJoin((i,n,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:n,newPresences:o})}),this.onLeave((i,n,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:n,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,i){const n=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(n,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=n[d];if(h){const f=u.map(k=>k.presence_ref),x=h.map(k=>k.presence_ref),g=u.filter(k=>x.indexOf(k.presence_ref)<0),w=h.filter(k=>f.indexOf(k.presence_ref)<0);g.length>0&&(l[d]=g),w.length>0&&(c[d]=w)}else l[d]=u}),this.syncDiff(n,{joins:l,leaves:c},s,i)}static syncDiff(e,r,s,i){const{joins:n,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(n,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(x=>x.presence_ref),f=u.filter(x=>h.indexOf(x.presence_ref)<0);e[l].unshift(...f)}s(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,i(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const i=e[s];return"metas"in i?r[s]=i.metas.map(n=>(n.presence_ref=n.phx_ref,delete n.phx_ref,delete n.phx_ref_prev,n)):r[s]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bi||(bi={}));var vi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(vi||(vi={}));var Pe;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Pe||(Pe={}));class Sa{constructor(e,r={config:{}},s){this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ws(this,ve.join,this.params,this.timeout),this.rejoinTimer=new bo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ve.reply,{},(i,n)=>{this._trigger(this._replyEventName(n),i)}),this.presence=new Jt(this),this.broadcastEndpointURL=wo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:n,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Pe.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Pe.CLOSED));const c={},d={broadcast:n,presence:o,postgres_changes:(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(u=>u.filter))!==null&&i!==void 0?i:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Pe.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,x=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let w=0;w<x;w++){const k=f[w],{filter:{event:E,schema:y,table:p,filter:A}}=k,_=u&&u[w];if(_&&_.event===E&&_.schema===y&&_.table===p&&_.filter===A)g.push(Object.assign(Object.assign({},k),{id:_.id}));else{this.unsubscribe(),this.state=ie.errored,e==null||e(Pe.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Pe.SUBSCRIBED);return}}).receive("error",u=>{this.state=ie.errored,e==null||e(Pe.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Pe.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this._on(e,r,s)}async send(e,r={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:n,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(n=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&n("ok"),d.receive("ok",()=>n("ok")),d.receive("error",()=>n("error")),d.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ie.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ve.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new ws(this,ve.leave,{},e),s.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,s){const i=new AbortController,n=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(n),o}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ws(this,e,r,s);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var i,n;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ve;if(s&&[l,c,d,u].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var g,w,k;return((g=x.filter)===null||g===void 0?void 0:g.event)==="*"||((k=(w=x.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(x=>x.callback(f,s)):(n=this.bindings[o])===null||n===void 0||n.filter(x=>{var g,w,k,E,y,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const A=x.id,_=(g=x.filter)===null||g===void 0?void 0:g.event;return A&&((w=r.ids)===null||w===void 0?void 0:w.includes(A))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const A=(y=(E=x==null?void 0:x.filter)===null||E===void 0?void 0:E.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return A==="*"||A===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:k,commit_timestamp:E,type:y,errors:p}=g;f=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:E,eventType:y,new:{},old:{},errors:p}),this._getPayloadRecords(g))}x.callback(f,s)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const i=e.toLocaleLowerCase(),n={type:i,filter:r,callback:s};return this.bindings[i]?this.bindings[i].push(n):this.bindings[i]=[n],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(i=>{var n;return!(((n=i.type)===null||n===void 0?void 0:n.toLocaleLowerCase())===s&&Sa.isEqual(i.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ve.close,{},e)}_onError(e){this._on(ve.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=pi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=pi(e.columns,e.old_record)),r}}const wi=()=>{},a0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class i0{constructor(e,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Ku,this.params={},this.timeout=yo,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wi,this.ref=0,this.logger=wi,this.conn=null,this.sendBuffer=[],this.serializer=new Yu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=n=>{let o;return n?o=n:typeof fetch>"u"?o=(...l)=>ur(()=>Promise.resolve().then(()=>Mt),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Js.websocket}`,this.httpEndpoint=wo(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:n=>[1e3,2e3,5e3,1e4][n-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(n,o)=>o(JSON.stringify(n)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=Wu),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ju}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Kt.connecting:return lt.Connecting;case Kt.open:return lt.Open;case Kt.closing:return lt.Closing;default:return lt.Closed}}isConnected(){return this.connectionState()===lt.Open}channel(e,r={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(n=>n.topic===s);if(i)return i;{const n=new Sa(`realtime:${e}`,r,this);return this.channels.push(n),n}}push(e){const{topic:r,event:s,payload:i,ref:n}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${n})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(ve.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Xu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:s,event:i,payload:n,ref:o}=r;s==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${s} ${i} ${o&&"("+o+")"||""}`,n),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(i,n,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ve.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${s}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([a0],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class Ta extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ae(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class n0 extends Ta{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ys extends Ta{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var o0=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const ko=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ur(()=>Promise.resolve().then(()=>Mt),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},l0=()=>o0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ur(()=>Promise.resolve().then(()=>Mt),void 0)).Response:Response}),Zs=t=>{if(Array.isArray(t))return t.map(r=>Zs(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const i=r.replace(/([-_][a-z])/gi,n=>n.toUpperCase().replace(/[-_]/g,""));e[i]=Zs(s)}),e};var gt=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const ks=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),c0=(t,e,r)=>gt(void 0,void 0,void 0,function*(){const s=yield l0();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{e(new n0(ks(i),t.status||500))}).catch(i=>{e(new Ys(ks(i),i))}):e(new Ys(ks(t),t))}),d0=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),r))};function fr(t,e,r,s,i,n){return gt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,d0(e,s,i,n)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>c0(c,l,s))})})}function Mr(t,e,r,s){return gt(this,void 0,void 0,function*(){return fr(t,"GET",e,r,s)})}function $e(t,e,r,s,i){return gt(this,void 0,void 0,function*(){return fr(t,"POST",e,s,i,r)})}function u0(t,e,r,s,i){return gt(this,void 0,void 0,function*(){return fr(t,"PUT",e,s,i,r)})}function h0(t,e,r,s){return gt(this,void 0,void 0,function*(){return fr(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function jo(t,e,r,s,i){return gt(this,void 0,void 0,function*(){return fr(t,"DELETE",e,s,i,r)})}var ce=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const f0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ki={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class x0{constructor(e,r={},s,i){this.url=e,this.headers=r,this.bucketId=s,this.fetch=ko(i)}uploadOrUpdate(e,r,s,i){return ce(this,void 0,void 0,function*(){try{let n;const o=Object.assign(Object.assign({},ki),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(n=new FormData,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c)),n.append("",s)):typeof FormData<"u"&&s instanceof FormData?(n=s,n.append("cacheControl",o.cacheControl),c&&n.append("metadata",this.encodeMetadata(c))):(n=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:n,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(n){if(ae(n))return{data:null,error:n};throw n}})}upload(e,r,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,i){return ce(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),o=this._getFinalPath(n),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:ki.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:n,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ae(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return ce(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const n=yield $e(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+n.url),l=o.searchParams.get("token");if(!l)throw new Ta("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}update(e,r,s){return ce(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return ce(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}copy(e,r,s){return ce(this,void 0,void 0,function*(){try{return{data:{path:(yield $e(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,s){return ce(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),n=yield $e(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${o}`)},{data:n,error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,s){return ce(this,void 0,void 0,function*(){try{const i=yield $e(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),n=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${n}`):null})),error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}download(e,r){return ce(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=n?`?${n}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Mr(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ae(l))return{data:null,error:l};throw l}})}info(e){return ce(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield Mr(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Zs(s),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}exists(e){return ce(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield h0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ae(s)&&s instanceof Ys){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),i=[],n=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";n!==""&&i.push(n);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return ce(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}list(e,r,s){return ce(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},f0),r),{prefix:e||""});return{data:yield $e(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const m0="2.7.1",g0={"X-Client-Info":`storage-js/${m0}`};var bt=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class p0{constructor(e,r={},s){this.url=e,this.headers=Object.assign(Object.assign({},g0),r),this.fetch=ko(s)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ae(e))return{data:null,error:e};throw e}})}getBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}updateBucket(e,r){return bt(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}})}emptyBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield $e(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}deleteBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield jo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}})}}class y0 extends p0{constructor(e,r={},s){super(e,r,s)}from(e){return new x0(this.url,this.headers,e,this.fetch)}}const b0="2.50.1";let zt="";typeof Deno<"u"?zt="deno":typeof document<"u"?zt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zt="react-native":zt="node";const v0={"X-Client-Info":`supabase-js-${zt}/${b0}`},w0={headers:v0},k0={schema:"public"},j0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N0={};var _0=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};const C0=t=>{let e;return t?e=t:typeof fetch>"u"?e=no:e=fetch,(...r)=>e(...r)},S0=()=>typeof Headers>"u"?oo:Headers,T0=(t,e,r)=>{const s=C0(r),i=S0();return(n,o)=>_0(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new i(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(n,Object.assign(Object.assign({},o),{headers:d}))})};var P0=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};function A0(t){return t.endsWith("/")?t:t+"/"}function E0(t,e){var r,s;const{db:i,auth:n,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),n),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>P0(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const No="2.70.0",Nt=30*1e3,Qs=3,js=Qs*Nt,L0="http://localhost:9999",R0="supabase.auth.token",I0={"X-Client-Info":`gotrue-js/${No}`},ea="X-Supabase-Api-Version",_o={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},D0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O0=6e5;class Pa extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function H(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class M0 extends Pa{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function F0(t){return H(t)&&t.name==="AuthApiError"}class Co extends Pa{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Qe extends Pa{constructor(e,r,s,i){super(e,s,i),this.name=r,this.status=s}}class Me extends Qe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $0(t){return H(t)&&t.name==="AuthSessionMissingError"}class vr extends Qe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wr extends Qe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class kr extends Qe{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U0(t){return H(t)&&t.name==="AuthImplicitGrantRedirectError"}class ji extends Qe{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ta extends Qe{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Ns(t){return H(t)&&t.name==="AuthRetryableFetchError"}class Ni extends Qe{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Xt extends Qe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_i=` 	
\r=`.split(""),B0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_i.length;e+=1)t[_i[e].charCodeAt(0)]=-2;for(let e=0;e<Fr.length;e+=1)t[Fr[e].charCodeAt(0)]=e;return t})();function Ci(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Fr[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(Fr[s]),e.queuedBits-=6}}function So(t,e,r){const s=B0[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Si(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=o=>{H0(o,s,r)};for(let o=0;o<t.length;o+=1)So(t.charCodeAt(o),i,n);return e.join("")}function V0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function q0(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}V0(s,e)}}function H0(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function z0(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)So(t.charCodeAt(i),r,s);return new Uint8Array(e)}function W0(t){const e=[];return q0(t,r=>e.push(r)),new Uint8Array(e)}function G0(t){const e=[],r={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>Ci(i,r,s)),Ci(null,r,s),e.join("")}function K0(t){return Math.round(Date.now()/1e3)+t}function J0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const be=()=>typeof window<"u"&&typeof document<"u",rt={tested:!1,writable:!1},Yt=()=>{if(!be())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(rt.tested)return rt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),rt.tested=!0,rt.writable=!0}catch{rt.tested=!0,rt.writable=!1}return rt.writable};function X0(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,n)=>{e[n]=i})}catch{}return r.searchParams.forEach((s,i)=>{e[i]=s}),e}const To=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ur(()=>Promise.resolve().then(()=>Mt),void 0).then(({default:s})=>s(...r)):e=fetch,(...r)=>e(...r)},Y0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Po=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},jr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Nr=async(t,e)=>{await t.removeItem(e)};class os{constructor(){this.promise=new os.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}os.promiseConstructor=Promise;function _s(t){const e=t.split(".");if(e.length!==3)throw new Xt("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!D0.test(e[s]))throw new Xt("JWT not in base64url format");return{header:JSON.parse(Si(e[0])),payload:JSON.parse(Si(e[1])),signature:z0(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Q0(t,e){return new Promise((s,i)=>{(async()=>{for(let n=0;n<1/0;n++)try{const o=await t(n);if(!e(n,null,o)){s(o);return}}catch(o){if(!e(n,o)){i(o);return}}})()})}function eh(t){return("0"+t.toString(16)).substr(-2)}function th(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let i="";for(let n=0;n<56;n++)i+=r.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,eh).join("")}async function rh(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(s);return Array.from(i).map(n=>String.fromCharCode(n)).join("")}async function sh(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await rh(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vt(t,e,r=!1){const s=th();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await Po(t,`${e}-code-verifier`,i);const n=await sh(s);return[n,s===n?"plain":"s256"]}const ah=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ih(t){const e=t.headers.get(ea);if(!e||!e.match(ah))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function nh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function oh(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wt(t){if(!lh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var ch=globalThis&&globalThis.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const at=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),dh=[502,503,504];async function Ti(t){var e;if(!Y0(t))throw new ta(at(t),0);if(dh.includes(t.status))throw new ta(at(t),t.status);let r;try{r=await t.json()}catch(n){throw new Co(at(n),n)}let s;const i=ih(t);if(i&&i.getTime()>=_o["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Ni(at(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Me}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0))throw new Ni(at(r),t.status,r.weak_password.reasons);throw new M0(at(r),t.status||500,s)}const uh=(t,e,r,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))};async function G(t,e,r,s){var i;const n=Object.assign({},s==null?void 0:s.headers);n[ea]||(n[ea]=_o["2024-01-01"].name),s!=null&&s.jwt&&(n.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await hh(t,e,r+l,{headers:n,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function hh(t,e,r,s,i,n){const o=uh(e,s,i,n);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new ta(at(c),0)}if(l.ok||await Ti(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await Ti(c)}}function Te(t){var e;let r=null;gh(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=K0(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Pi(t){const e=Te(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ve(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function fh(t){return{data:t,error:null}}function xh(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n}=t,o=ch(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function mh(t){return t}function gh(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cs=["global","local","others"];var ph=globalThis&&globalThis.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};class yh{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=To(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Cs[0]){if(Cs.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cs.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ve})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=ph(e,["options"]),i=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xh,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(H(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ve})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,i,n,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(n=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&n!==void 0?n:""},xform:mh});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(g.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(H(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){wt(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ve})}catch(r){if(H(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wt(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ve})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){wt(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ve})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){wt(e.userId);try{const{data:r,error:s}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:s}}catch(r){if(H(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wt(e.userId),wt(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}}const bh={getItem:t=>Yt()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Yt()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Yt()&&globalThis.localStorage.removeItem(t)}};function Ai(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function vh(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kt={debug:!!(globalThis&&Yt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ao extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wh extends Ao{}async function kh(t,e,r){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kt.debug)try{const n=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(n,null,"  "))}catch(n){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",n)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}vh();const jh={url:L0,storageKey:R0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:I0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ei(t,e,r){return await r()}class ar{constructor(e){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ar.nextInstanceID,ar.nextInstanceID+=1,this.instanceID>0&&be()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},jh),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new yh({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=To(i.fetch),this.lock=i.lock||Ei,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:be()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=kh:this.lock=Ei,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Yt()?this.storage=bh:(this.memoryStorage={},this.storage=Ai(this.memoryStorage)):(this.memoryStorage={},this.storage=Ai(this.memoryStorage)),be()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async n=>{this._debug("received broadcast notification from other tab or client",n),await this._notifyAllSubscribers(n.data.event,n.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${No}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=X0(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),be()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:n}=await this._getSessionFromURL(r,s);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),U0(n)){const c=(e=n.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:n}}return await this._removeSession(),{error:n}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return H(r)?{error:r}:{error:new Co("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,i;try{const n=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Te}),{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var r,s,i;try{let n;if("email"in e){const{email:u,password:h,options:f}=e;let x=null,g=null;this.flowType==="pkce"&&([x,g]=await vt(this.storage,this.storageKey)),n=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:g},xform:Te})}else if("phone"in e){const{phone:u,password:h,options:f}=e;n=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Te})}else throw new wr("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(n){if(H(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let r;if("email"in e){const{email:n,password:o,options:l}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pi})}else if("phone"in e){const{phone:n,password:o,options:l}=e;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Pi})}else throw new wr("You must provide either an email or phone number and a password");const{data:s,error:i}=r;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new vr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,s,i,n;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(n=e.options)===null||n===void 0?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,s,i,n,o,l,c,d,u,h,f,x;let g,w;if("message"in e)g=e.message,w=e.signature;else{const{chain:k,wallet:E,statement:y,options:p}=e;let A;if(be())if(typeof E=="object")A=E;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))A=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const I=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let F;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")F=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)F=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)g=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),w=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(s=p==null?void 0:p.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((n=p==null?void 0:p.signInWithSolana)===null||n===void 0)&&n.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((d=p==null?void 0:p.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(u=p==null?void 0:p.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const I=await A.signMessage(new TextEncoder().encode(g),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=I}}try{const{data:k,error:E}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:G0(w)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Te});if(E)throw E;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new vr}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:E})}catch(k){if(H(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const r=await jr(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(r??"").split("/");try{const{data:n,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Te});if(await Nr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!n||!n.session||!n.user?{data:{user:null,session:null,redirectType:null},error:new vr}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign(Object.assign({},n),{redirectType:i??null}),error:o})}catch(n){if(H(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:r,provider:s,token:i,access_token:n,nonce:o}=e,l=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:n,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Te}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vr}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,s,i,n,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await vt(this.storage,this.storageKey));const{error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new wr("You must provide either an email or phone number.")}catch(l){if(H(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,s;try{let i,n;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,n=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:i,xform:Te});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(H(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var r,s,i;try{let n=null,o=null;return this.flowType==="pkce"&&([n,o]=await vt(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:o}),headers:this.headers,xform:fh})}catch(n){if(H(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new Me;const{error:i}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(H(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:n}=e,{error:o}=await G(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},redirectTo:n==null?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:n}=e,{data:o,error:l}=await G(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new wr("You must provide either an email or phone number and a type")}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<js:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ve}):await this._useSession(async r=>{var s,i,n;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Me}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(n=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&n!==void 0?n:void 0,xform:Ve})})}catch(r){if(H(r))return $0(r)&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:i,error:n}=s;if(n)throw n;if(!i.session)throw new Me;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await vt(this.storage,this.storageKey));const{data:d,error:u}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ve});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(H(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Me;const r=Date.now()/1e3;let s=r,i=!0,n=null;const{payload:o}=_s(e.access_token);if(o.exp&&(s=o.exp,i=s<=r),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};n=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;n={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(r){if(H(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Me;const{session:i,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(H(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!be())throw new kr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new kr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ji("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new kr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ji("No code detected.");const{data:y,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:n,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!n||!l||!o||!d)throw new kr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const x=f-u;x*1e3<=Nt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:w,error:k}=await this._getUser(n);if(k)throw k;const E={provider_token:s,provider_refresh_token:i,access_token:n,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(s){if(H(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await jr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:i,error:n}=r;if(n)return{error:n};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(F0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=J0(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,i;try{const{data:{session:n},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(n){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e,r={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await vt(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(n){if(H(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:s,error:i}=await this._useSession(async n=>{var o,l,c,d,u;const{data:h,error:f}=n;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",x,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return be()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(H(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,i;const{data:n,error:o}=r;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Q0(async i=>(i>0&&await Z0(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Te})),(i,n)=>{const o=200*Math.pow(2,i);return n&&Ns(n)&&Date.now()+o-s<Nt})}catch(s){if(this._debug(r,"error",s),H(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),be()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await jr(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<js;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${js}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:n}=await this._callRefreshToken(s.refresh_token);n&&(console.error(n),Ns(n)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new Me;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new os;const{data:n,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!n.session)throw new Me;await this._saveSession(n.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const l={session:n.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(n){if(this._debug(i,"error",n),H(n)){const o={session:null,error:n};return Ns(n)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(n),n}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const n=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){n.push(c)}});if(await Promise.all(o),n.length>0){for(let l=0;l<n.length;l+=1)console.error(n[l]);throw n[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Po(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Nr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&be()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/Nt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Nt}ms, refresh threshold is ${Qs} ticks`),i<=Qs&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ao)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!be()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const i=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[n,o]=await vt(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(n)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(s!=null&&s.queryParams){const n=new URLSearchParams(s.queryParams);i.push(n.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;return n?{data:null,error:n}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,i;const{data:n,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(H(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;if(n)return{data:null,error:n};const{data:o,error:l}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:i,error:n}=r;return n?{data:null,error:n}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(H(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(e==null?void 0:e.factors)||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),n=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,s;const{data:{session:i},error:n}=e;if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_s(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s||(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+O0>Date.now()))return s;const{data:i,error:n}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;if(!i.keys||i.keys.length===0)throw new Xt("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),s=i.keys.find(o=>o.kid===e),!s)throw new Xt("No matching signing key found in JWKS");return s}async getClaims(e,r={keys:[]}){try{let s=e;if(!s){const{data:x,error:g}=await this.getSession();if(g||!x.session)return{data:null,error:g};s=x.session.access_token}const{header:i,payload:n,signature:o,raw:{header:l,payload:c}}=_s(s);if(nh(n.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:n,header:i,signature:o},error:null}}const d=oh(i.alg),u=await this.fetchJwk(i.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,W0(`${l}.${c}`)))throw new Xt("Invalid JWT signature");return{data:{claims:n,header:i,signature:o},error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}}}ar.nextInstanceID=0;const Nh=ar;class _h extends Nh{constructor(e){super(e)}}var Ch=globalThis&&globalThis.__awaiter||function(t,e,r,s){function i(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function l(u){try{d(s.next(u))}catch(h){o(h)}}function c(u){try{d(s.throw(u))}catch(h){o(h)}}function d(u){u.done?n(u.value):i(u.value).then(l,c)}d((s=s.apply(t,e||[])).next())})};class Sh{constructor(e,r,s){var i,n,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=A0(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:k0,realtime:N0,auth:Object.assign(Object.assign({},j0),{storageKey:d}),global:w0},h=E0(s??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(n=h.global.headers)!==null&&n!==void 0?n:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=T0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Hu(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new vu(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new y0(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Ch(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,storageKey:n,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _h({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:n,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:i,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new i0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Th=(t,e,r)=>new Sh(t,e,r),Ph="https://bpbbrgsuuaxirkccteuu.supabase.co",Ah="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJwYmJyZ3N1dWF4aXJrY2N0ZXV1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA4NDc0MzYsImV4cCI6MjA2NjQyMzQzNn0.LPBOUkoCQ3k1xsxVpczYhaEy1VtFT6kvizTkfVqchc4",B=Th(Ph,Ah),Eo=m.createContext({}),ye=()=>{const t=m.useContext(Eo);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Lo=({children:t})=>{const[e,r]=m.useState(null),[s,i]=m.useState(!0);m.useEffect(()=>{(async()=>{try{const{data:{session:h},error:f}=await B.auth.getSession();f&&console.error("Error getting session:",f),r((h==null?void 0:h.user)??null)}catch(h){console.error("Unexpected error getting session:",h)}finally{i(!1)}})();const{data:{subscription:u}}=B.auth.onAuthStateChange(async(h,f)=>{var x;console.log("Auth state changed:",h,(x=f==null?void 0:f.user)==null?void 0:x.email),r((f==null?void 0:f.user)??null),i(!1)});return()=>u.unsubscribe()},[]);const c={user:e,loading:s,signUp:async(d,u,h={})=>{try{console.log("Attempting signup for:",d);const{data:f,error:x}=await B.auth.signUp({email:d,password:u,options:{data:{name:h.name||"",full_name:h.name||""}}});if(console.log("Signup response:",{data:f,error:x}),x)throw console.error("Signup error:",x),x;if(f.user&&!f.session)return console.log("Email confirmation required"),{user:f.user,session:null,emailConfirmationRequired:!0};if(f.user&&f.session){console.log("User created and logged in immediately");try{const{error:g}=await B.from("profiles").upsert({id:f.user.id,email:f.user.email,name:h.name||""});g&&console.warn("Profile creation warning:",g)}catch(g){console.warn("Profile creation failed, but continuing:",g)}}return f}catch(f){throw console.error("Signup failed:",f),f}},signIn:async(d,u)=>{try{console.log("Attempting signin for:",d);const{data:h,error:f}=await B.auth.signInWithPassword({email:d,password:u});if(console.log("Signin response:",{data:h,error:f}),f)throw console.error("Signin error:",f),f;return h}catch(h){throw console.error("Signin failed:",h),h}},signOut:async()=>{try{const{error:d}=await B.auth.signOut();if(d)throw console.error("Signout error:",d),d}catch(d){throw console.error("Signout failed:",d),d}}};return a.jsx(Eo.Provider,{value:c,children:t})},Ro=m.createContext({}),ls=()=>{const t=m.useContext(Ro);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},jt={modern:{name:"Modern",description:"Clean, minimal design with Inter font",fonts:{primary:"Inter",display:"Inter",mono:"JetBrains Mono"},light:{bg:{primary:"#FFFFFF",secondary:"#F8FAFC",tertiary:"#F1F5F9",accent:"#EEF2FF"},text:{primary:"#0F172A",secondary:"#334155",tertiary:"#64748B",accent:"#6366F1"},border:{primary:"#E2E8F0",secondary:"#CBD5E1",accent:"#C7D2FE"},brand:{primary:"#6366F1",secondary:"#8B5CF6",tertiary:"#06B6D4"},status:{success:"#059669",warning:"#D97706",error:"#DC2626",info:"#0284C7"}},dark:{bg:{primary:"#0F172A",secondary:"#1E293B",tertiary:"#334155",accent:"#312E81"},text:{primary:"#F8FAFC",secondary:"#CBD5E1",tertiary:"#94A3B8",accent:"#A5B4FC"},border:{primary:"#334155",secondary:"#475569",accent:"#4338CA"},brand:{primary:"#818CF8",secondary:"#A78BFA",tertiary:"#22D3EE"},status:{success:"#10B981",warning:"#F59E0B",error:"#EF4444",info:"#3B82F6"}}},classic:{name:"Classic",description:"Traditional, elegant design with serif fonts",fonts:{primary:"Crimson Text",display:"Playfair Display",mono:"Source Code Pro"},light:{bg:{primary:"#FFFEF7",secondary:"#FEF7E0",tertiary:"#FDE68A",accent:"#FEF3C7"},text:{primary:"#1C1917",secondary:"#44403C",tertiary:"#78716C",accent:"#B45309"},border:{primary:"#E7E5E4",secondary:"#D6D3D1",accent:"#FCD34D"},brand:{primary:"#B45309",secondary:"#D97706",tertiary:"#92400E"},status:{success:"#166534",warning:"#CA8A04",error:"#B91C1C",info:"#1E40AF"}},dark:{bg:{primary:"#1C1917",secondary:"#292524",tertiary:"#44403C",accent:"#451A03"},text:{primary:"#FAFAF9",secondary:"#E7E5E4",tertiary:"#A8A29E",accent:"#FCD34D"},border:{primary:"#44403C",secondary:"#57534E",accent:"#92400E"},brand:{primary:"#FCD34D",secondary:"#FBBF24",tertiary:"#F59E0B"},status:{success:"#22C55E",warning:"#EAB308",error:"#EF4444",info:"#3B82F6"}}},neon:{name:"Neon",description:"Cyberpunk, futuristic design with glowing effects",fonts:{primary:"Orbitron",display:"Orbitron",mono:"Fira Code"},light:{bg:{primary:"#F8FAFC",secondary:"#E2E8F0",tertiary:"#CBD5E1",accent:"#E0E7FF"},text:{primary:"#0F172A",secondary:"#1E293B",tertiary:"#475569",accent:"#7C3AED"},border:{primary:"#CBD5E1",secondary:"#94A3B8",accent:"#C4B5FD"},brand:{primary:"#7C3AED",secondary:"#EC4899",tertiary:"#06B6D4"},status:{success:"#059669",warning:"#D97706",error:"#DC2626",info:"#0284C7"}},dark:{bg:{primary:"#000000",secondary:"#0A0A0A",tertiary:"#1A1A1A",accent:"#1E1B4B"},text:{primary:"#FFFFFF",secondary:"#E4E4E7",tertiary:"#A1A1AA",accent:"#C084FC"},border:{primary:"#27272A",secondary:"#3F3F46",accent:"#7C3AED"},brand:{primary:"#C084FC",secondary:"#F472B6",tertiary:"#22D3EE"},status:{success:"#10B981",warning:"#F59E0B",error:"#EF4444",info:"#3B82F6"}}},organic:{name:"Organic",description:"Natural, warm design with rounded elements",fonts:{primary:"Nunito",display:"Nunito",mono:"Ubuntu Mono"},light:{bg:{primary:"#FFFBEB",secondary:"#FEF3C7",tertiary:"#FDE68A",accent:"#ECFDF5"},text:{primary:"#1F2937",secondary:"#374151",tertiary:"#6B7280",accent:"#059669"},border:{primary:"#F3F4F6",secondary:"#E5E7EB",accent:"#A7F3D0"},brand:{primary:"#059669",secondary:"#10B981",tertiary:"#F59E0B"},status:{success:"#047857",warning:"#D97706",error:"#DC2626",info:"#0284C7"}},dark:{bg:{primary:"#1F2937",secondary:"#374151",tertiary:"#4B5563",accent:"#064E3B"},text:{primary:"#F9FAFB",secondary:"#F3F4F6",tertiary:"#D1D5DB",accent:"#6EE7B7"},border:{primary:"#4B5563",secondary:"#6B7280",accent:"#047857"},brand:{primary:"#6EE7B7",secondary:"#34D399",tertiary:"#FBBF24"},status:{success:"#10B981",warning:"#F59E0B",error:"#EF4444",info:"#3B82F6"}}},corporate:{name:"Corporate",description:"Professional, structured business design",fonts:{primary:"IBM Plex Sans",display:"IBM Plex Sans",mono:"IBM Plex Mono"},light:{bg:{primary:"#FFFFFF",secondary:"#F7F8FC",tertiary:"#EEF2F6",accent:"#E8F4FD"},text:{primary:"#1A202C",secondary:"#2D3748",tertiary:"#4A5568",accent:"#2B6CB0"},border:{primary:"#E2E8F0",secondary:"#CBD5E1",accent:"#90CDF4"},brand:{primary:"#2B6CB0",secondary:"#3182CE",tertiary:"#4299E1"},status:{success:"#38A169",warning:"#D69E2E",error:"#E53E3E",info:"#3182CE"}},dark:{bg:{primary:"#1A202C",secondary:"#2D3748",tertiary:"#4A5568",accent:"#2A4365"},text:{primary:"#F7FAFC",secondary:"#EDF2F7",tertiary:"#CBD5E1",accent:"#90CDF4"},border:{primary:"#4A5568",secondary:"#718096",accent:"#3182CE"},brand:{primary:"#90CDF4",secondary:"#63B3ED",tertiary:"#4299E1"},status:{success:"#48BB78",warning:"#ED8936",error:"#F56565",info:"#4299E1"}}}},Eh=({children:t})=>{const[e,r]=m.useState("modern"),[s,i]=m.useState(!1);m.useEffect(()=>{const d=localStorage.getItem("theme"),u=localStorage.getItem("darkMode");d&&jt[d]&&r(d),u?i(u==="true"):window.matchMedia("(prefers-color-scheme: dark)").matches&&i(!0)},[]),m.useEffect(()=>{localStorage.setItem("theme",e),localStorage.setItem("darkMode",s.toString());const d=jt[e],h=d[s?"dark":"light"],f=document.documentElement;Object.entries(h.bg).forEach(([x,g])=>{f.style.setProperty(`--color-bg-${x}`,g)}),Object.entries(h.text).forEach(([x,g])=>{f.style.setProperty(`--color-text-${x}`,g)}),Object.entries(h.border).forEach(([x,g])=>{f.style.setProperty(`--color-border-${x}`,g)}),Object.entries(h.brand).forEach(([x,g])=>{f.style.setProperty(`--color-brand-${x}`,g)}),Object.entries(h.status).forEach(([x,g])=>{f.style.setProperty(`--color-status-${x}`,g)}),f.style.setProperty("--font-primary",d.fonts.primary),f.style.setProperty("--font-display",d.fonts.display),f.style.setProperty("--font-mono",d.fonts.mono),f.className=`theme-${e} ${s?"dark":"light"}`,n(d.fonts)},[e,s]);const n=d=>{document.querySelectorAll("link[data-theme-font]").forEach(x=>x.remove()),Object.values(d).filter((x,g,w)=>w.indexOf(x)===g).map(x=>{switch(x){case"Inter":return"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap";case"Crimson Text":return"https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&display=swap";case"Playfair Display":return"https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";case"Orbitron":return"https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap";case"Nunito":return"https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";case"IBM Plex Sans":return"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap";case"JetBrains Mono":return"https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap";case"Source Code Pro":return"https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";case"Fira Code":return"https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap";case"Ubuntu Mono":return"https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap";case"IBM Plex Mono":return"https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap";default:return null}}).filter(Boolean).forEach(x=>{const g=document.createElement("link");g.rel="stylesheet",g.href=x,g.setAttribute("data-theme-font","true"),document.head.appendChild(g)})},c={currentTheme:e,isDark:s,themes:jt,changeTheme:d=>{jt[d]&&r(d)},toggleDarkMode:()=>{i(!s)},theme:jt[e],colors:jt[e][s?"dark":"light"]};return a.jsx(Ro.Provider,{value:c,children:t})},ke=({children:t})=>{const{user:e,loading:r}=ye();return r?a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):e?t:a.jsx(eo,{to:"/login",replace:!0})},Io=m.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),cs=m.createContext({}),ds=m.createContext(null),us=typeof document<"u",Aa=us?m.useLayoutEffect:m.useEffect,Do=m.createContext({strict:!1}),Ea=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Lh="framerAppearId",Oo="data-"+Ea(Lh);function Rh(t,e,r,s){const{visualElement:i}=m.useContext(cs),n=m.useContext(Do),o=m.useContext(ds),l=m.useContext(Io).reducedMotion,c=m.useRef();s=s||n.renderer,!c.current&&s&&(c.current=s(t,{visualState:e,parent:i,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;m.useInsertionEffect(()=>{d&&d.update(r,o)});const u=m.useRef(!!(r[Oo]&&!window.HandoffComplete));return Aa(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),m.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function Ct(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ih(t,e,r){return m.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),r&&(typeof r=="function"?r(s):Ct(r)&&(r.current=s))},[e])}function ir(t){return typeof t=="string"||Array.isArray(t)}function hs(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const La=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ra=["initial",...La];function fs(t){return hs(t.animate)||Ra.some(e=>ir(t[e]))}function Mo(t){return!!(fs(t)||t.variants)}function Dh(t,e){if(fs(t)){const{initial:r,animate:s}=t;return{initial:r===!1||ir(r)?r:void 0,animate:ir(s)?s:void 0}}return t.inherit!==!1?e:{}}function Oh(t){const{initial:e,animate:r}=Dh(t,m.useContext(cs));return m.useMemo(()=>({initial:e,animate:r}),[Li(e),Li(r)])}function Li(t){return Array.isArray(t)?t.join(" "):t}const Ri={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nr={};for(const t in Ri)nr[t]={isEnabled:e=>Ri[t].some(r=>!!e[r])};function Mh(t){for(const e in t)nr[e]={...nr[e],...t[e]}}const Ia=m.createContext({}),Fo=m.createContext({}),Fh=Symbol.for("motionComponentSymbol");function $h({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:s,Component:i}){t&&Mh(t);function n(l,c){let d;const u={...m.useContext(Io),...l,layoutId:Uh(l)},{isStatic:h}=u,f=Oh(l),x=s(l,h);if(!h&&us){f.visualElement=Rh(i,x,u,e);const g=m.useContext(Fo),w=m.useContext(Do).strict;f.visualElement&&(d=f.visualElement.loadFeatures(u,w,t,g))}return m.createElement(cs.Provider,{value:f},d&&f.visualElement?m.createElement(d,{visualElement:f.visualElement,...u}):null,r(i,l,Ih(x,f.visualElement,c),x,h,f.visualElement))}const o=m.forwardRef(n);return o[Fh]=i,o}function Uh({layoutId:t}){const e=m.useContext(Ia).id;return e&&t!==void 0?e+"-"+t:t}function Bh(t){function e(s,i={}){return $h(t(s,i))}if(typeof Proxy>"u")return e;const r=new Map;return new Proxy(e,{get:(s,i)=>(r.has(i)||r.set(i,e(i)),r.get(i))})}const Vh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Da(t){return typeof t!="string"||t.includes("-")?!1:!!(Vh.indexOf(t)>-1||/[A-Z]/.test(t))}const $r={};function qh(t){Object.assign($r,t)}const xr=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pt=new Set(xr);function $o(t,{layout:e,layoutId:r}){return pt.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!$r[t]||t==="opacity")}const he=t=>!!(t&&t.getVelocity),Hh={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zh=xr.length;function Wh(t,{enableHardwareAcceleration:e=!0,allowTransformNone:r=!0},s,i){let n="";for(let o=0;o<zh;o++){const l=xr[o];if(t[l]!==void 0){const c=Hh[l]||l;n+=`${c}(${t[l]}) `}}return e&&!t.z&&(n+="translateZ(0)"),n=n.trim(),i?n=i(t,s?"":n):r&&s&&(n="none"),n}const Uo=t=>e=>typeof e=="string"&&e.startsWith(t),Bo=Uo("--"),ra=Uo("var(--"),Gh=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Kh=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ge=(t,e,r)=>Math.min(Math.max(r,t),e),yt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zt={...yt,transform:t=>Ge(0,1,t)},_r={...yt,default:1},Qt=t=>Math.round(t*1e5)/1e5,xs=/(-)?([\d]*\.?[\d])+/g,Vo=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Jh=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function mr(t){return typeof t=="string"}const gr=t=>({test:e=>mr(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fe=gr("deg"),_e=gr("%"),U=gr("px"),Xh=gr("vh"),Yh=gr("vw"),Ii={..._e,parse:t=>_e.parse(t)/100,transform:t=>_e.transform(t*100)},Di={...yt,transform:Math.round},qo={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:Fe,rotateX:Fe,rotateY:Fe,rotateZ:Fe,scale:_r,scaleX:_r,scaleY:_r,scaleZ:_r,skew:Fe,skewX:Fe,skewY:Fe,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:Zt,originX:Ii,originY:Ii,originZ:U,zIndex:Di,fillOpacity:Zt,strokeOpacity:Zt,numOctaves:Di};function Oa(t,e,r,s){const{style:i,vars:n,transform:o,transformOrigin:l}=t;let c=!1,d=!1,u=!0;for(const h in e){const f=e[h];if(Bo(h)){n[h]=f;continue}const x=qo[h],g=Kh(f,x);if(pt.has(h)){if(c=!0,o[h]=g,!u)continue;f!==(x.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=g):i[h]=g}if(e.transform||(c||s?i.transform=Wh(t.transform,r,u,s):i.transform&&(i.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:x=0}=l;i.transformOrigin=`${h} ${f} ${x}`}}const Ma=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ho(t,e,r){for(const s in e)!he(e[s])&&!$o(s,r)&&(t[s]=e[s])}function Zh({transformTemplate:t},e,r){return m.useMemo(()=>{const s=Ma();return Oa(s,e,{enableHardwareAcceleration:!r},t),Object.assign({},s.vars,s.style)},[e])}function Qh(t,e,r){const s=t.style||{},i={};return Ho(i,s,t),Object.assign(i,Zh(t,e,r)),t.transformValues?t.transformValues(i):i}function ef(t,e,r){const s={},i=Qh(t,e,r);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=i,s}const tf=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ur(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tf.has(t)}let zo=t=>!Ur(t);function rf(t){t&&(zo=e=>e.startsWith("on")?!Ur(e):t(e))}try{rf(require("@emotion/is-prop-valid").default)}catch{}function sf(t,e,r){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(zo(i)||r===!0&&Ur(i)||!e&&!Ur(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}function Oi(t,e,r){return typeof t=="string"?t:U.transform(e+r*t)}function af(t,e,r){const s=Oi(e,t.x,t.width),i=Oi(r,t.y,t.height);return`${s} ${i}`}const nf={offset:"stroke-dashoffset",array:"stroke-dasharray"},of={offset:"strokeDashoffset",array:"strokeDasharray"};function lf(t,e,r=1,s=0,i=!0){t.pathLength=1;const n=i?nf:of;t[n.offset]=U.transform(-s);const o=U.transform(e),l=U.transform(r);t[n.array]=`${o} ${l}`}function Fa(t,{attrX:e,attrY:r,attrScale:s,originX:i,originY:n,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h,f){if(Oa(t,d,u,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:g,dimensions:w}=t;x.transform&&(w&&(g.transform=x.transform),delete x.transform),w&&(i!==void 0||n!==void 0||g.transform)&&(g.transformOrigin=af(w,i!==void 0?i:.5,n!==void 0?n:.5)),e!==void 0&&(x.x=e),r!==void 0&&(x.y=r),s!==void 0&&(x.scale=s),o!==void 0&&lf(x,o,l,c,!1)}const Wo=()=>({...Ma(),attrs:{}}),$a=t=>typeof t=="string"&&t.toLowerCase()==="svg";function cf(t,e,r,s){const i=m.useMemo(()=>{const n=Wo();return Fa(n,e,{enableHardwareAcceleration:!1},$a(s),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const n={};Ho(n,t.style,t),i.style={...n,...i.style}}return i}function df(t=!1){return(r,s,i,{latestValues:n},o)=>{const c=(Da(r)?cf:ef)(s,n,o,r),u={...sf(s,typeof r=="string",t),...c,ref:i},{children:h}=s,f=m.useMemo(()=>he(h)?h.get():h,[h]);return m.createElement(r,{...u,children:f})}}function Go(t,{style:e,vars:r},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const n in r)t.style.setProperty(n,r[n])}const Ko=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jo(t,e,r,s){Go(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(Ko.has(i)?i:Ea(i),e.attrs[i])}function Ua(t,e){const{style:r}=t,s={};for(const i in r)(he(r[i])||e.style&&he(e.style[i])||$o(i,t))&&(s[i]=r[i]);return s}function Xo(t,e){const r=Ua(t,e);for(const s in t)if(he(t[s])||he(e[s])){const i=xr.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function Ba(t,e,r,s={},i={}){return typeof e=="function"&&(e=e(r!==void 0?r:t.custom,s,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(r!==void 0?r:t.custom,s,i)),e}function Yo(t){const e=m.useRef(null);return e.current===null&&(e.current=t()),e.current}const Br=t=>Array.isArray(t),uf=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),hf=t=>Br(t)?t[t.length-1]||0:t;function Ar(t){const e=he(t)?t.get():t;return uf(e)?e.toValue():e}function ff({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:r},s,i,n){const o={latestValues:xf(s,i,n,t),renderState:e()};return r&&(o.mount=l=>r(s,l,o)),o}const Zo=t=>(e,r)=>{const s=m.useContext(cs),i=m.useContext(ds),n=()=>ff(t,e,s,i);return r?n():Yo(n)};function xf(t,e,r,s){const i={},n=s(t,{});for(const f in n)i[f]=Ar(n[f]);let{initial:o,animate:l}=t;const c=fs(t),d=Mo(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!hs(h)&&(Array.isArray(h)?h:[h]).forEach(x=>{const g=Ba(t,x);if(!g)return;const{transitionEnd:w,transition:k,...E}=g;for(const y in E){let p=E[y];if(Array.isArray(p)){const A=u?p.length-1:0;p=p[A]}p!==null&&(i[y]=p)}for(const y in w)i[y]=w[y]}),i}const ee=t=>t;class Mi{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function mf(t){let e=new Mi,r=new Mi,s=0,i=!1,n=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&i,f=h?e:r;return d&&o.add(c),f.add(c)&&h&&i&&(s=e.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(i){n=!0;return}if(i=!0,[e,r]=[r,e],r.clear(),s=e.order.length,s)for(let d=0;d<s;d++){const u=e.order[d];u(c),o.has(u)&&(l.schedule(u),t())}i=!1,n&&(n=!1,l.process(c))}};return l}const Cr=["prepare","read","update","preRender","render","postRender"],gf=40;function pf(t,e){let r=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},n=Cr.reduce((h,f)=>(h[f]=mf(()=>r=!0),h),{}),o=h=>n[h].process(i),l=()=>{const h=performance.now();r=!1,i.delta=s?1e3/60:Math.max(Math.min(h-i.timestamp,gf),1),i.timestamp=h,i.isProcessing=!0,Cr.forEach(o),i.isProcessing=!1,r&&e&&(s=!1,t(l))},c=()=>{r=!0,s=!0,i.isProcessing||t(l)};return{schedule:Cr.reduce((h,f)=>{const x=n[f];return h[f]=(g,w=!1,k=!1)=>(r||c(),x.schedule(g,w,k)),h},{}),cancel:h=>Cr.forEach(f=>n[f].cancel(h)),state:i,steps:n}}const{schedule:Z,cancel:De,state:ne,steps:Ss}=pf(typeof requestAnimationFrame<"u"?requestAnimationFrame:ee,!0),yf={useVisualState:Zo({scrapeMotionValuesFromProps:Xo,createRenderState:Wo,onMount:(t,e,{renderState:r,latestValues:s})=>{Z.read(()=>{try{r.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Z.render(()=>{Fa(r,s,{enableHardwareAcceleration:!1},$a(e.tagName),t.transformTemplate),Jo(e,r)})}})},bf={useVisualState:Zo({scrapeMotionValuesFromProps:Ua,createRenderState:Ma})};function vf(t,{forwardMotionProps:e=!1},r,s){return{...Da(t)?yf:bf,preloadedFeatures:r,useRender:df(e),createVisualElement:s,Component:t}}function Ae(t,e,r,s={passive:!0}){return t.addEventListener(e,r,s),()=>t.removeEventListener(e,r)}const Qo=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function ms(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const wf=t=>e=>Qo(e)&&t(e,ms(e));function Ee(t,e,r,s){return Ae(t,e,wf(r),s)}const kf=(t,e)=>r=>e(t(r)),ze=(...t)=>t.reduce(kf);function el(t){let e=null;return()=>{const r=()=>{e=null};return e===null?(e=t,r):!1}}const Fi=el("dragHorizontal"),$i=el("dragVertical");function tl(t){let e=!1;if(t==="y")e=$i();else if(t==="x")e=Fi();else{const r=Fi(),s=$i();r&&s?e=()=>{r(),s()}:(r&&r(),s&&s())}return e}function rl(){const t=tl(!0);return t?(t(),!1):!0}class et{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Ui(t,e){const r="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),i=(n,o)=>{if(n.pointerType==="touch"||rl())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e),l[s]&&Z.update(()=>l[s](n,o))};return Ee(t.current,r,i,{passive:!t.getProps()[s]})}class jf extends et{mount(){this.unmount=ze(Ui(this.node,!0),Ui(this.node,!1))}unmount(){}}class Nf extends et{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ze(Ae(this.node.current,"focus",()=>this.onFocus()),Ae(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const sl=(t,e)=>e?t===e?!0:sl(t,e.parentElement):!1;function Ts(t,e){if(!e)return;const r=new PointerEvent("pointer"+t);e(r,ms(r))}class _f extends et{constructor(){super(...arguments),this.removeStartListeners=ee,this.removeEndListeners=ee,this.removeAccessibleListeners=ee,this.startPointerPress=(e,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),n=Ee(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Z.update(()=>{!h&&!sl(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=Ee(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=ze(n,o),this.startPress(e,r)},this.startAccessiblePress=()=>{const e=n=>{if(n.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ts("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Z.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Ae(this.node.current,"keyup",o),Ts("down",(l,c)=>{this.startPress(l,c)})},r=Ae(this.node.current,"keydown",e),s=()=>{this.isPressing&&Ts("cancel",(n,o)=>this.cancelPress(n,o))},i=Ae(this.node.current,"blur",s);this.removeAccessibleListeners=ze(r,i)}}startPress(e,r){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Z.update(()=>s(e,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!rl()}cancelPress(e,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Z.update(()=>s(e,r))}mount(){const e=this.node.getProps(),r=Ee(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=Ae(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ze(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const sa=new WeakMap,Ps=new WeakMap,Cf=t=>{const e=sa.get(t.target);e&&e(t)},Sf=t=>{t.forEach(Cf)};function Tf({root:t,...e}){const r=t||document;Ps.has(r)||Ps.set(r,{});const s=Ps.get(r),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(Sf,{root:t,...e})),s[i]}function Pf(t,e,r){const s=Tf(e);return sa.set(t,r),s.observe(t),()=>{sa.delete(t),s.unobserve(t)}}const Af={some:0,all:1};class Ef extends et{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:s,amount:i="some",once:n}=e,o={root:r?r.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Af[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,n&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return Pf(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(Lf(e,r))&&this.startObserver()}unmount(){}}function Lf({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const Rf={inView:{Feature:Ef},tap:{Feature:_f},focus:{Feature:Nf},hover:{Feature:jf}};function al(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let s=0;s<r;s++)if(e[s]!==t[s])return!1;return!0}function If(t){const e={};return t.values.forEach((r,s)=>e[s]=r.get()),e}function Df(t){const e={};return t.values.forEach((r,s)=>e[s]=r.getVelocity()),e}function gs(t,e,r){const s=t.getProps();return Ba(s,e,r!==void 0?r:s.custom,If(t),Df(t))}let Of=ee,Va=ee;const We=t=>t*1e3,Le=t=>t/1e3,Mf={current:!1},il=t=>Array.isArray(t)&&typeof t[0]=="number";function nl(t){return!!(!t||typeof t=="string"&&ol[t]||il(t)||Array.isArray(t)&&t.every(nl))}const Wt=([t,e,r,s])=>`cubic-bezier(${t}, ${e}, ${r}, ${s})`,ol={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wt([0,.65,.55,1]),circOut:Wt([.55,0,1,.45]),backIn:Wt([.31,.01,.66,-.59]),backOut:Wt([.33,1.53,.69,.99])};function ll(t){if(t)return il(t)?Wt(t):Array.isArray(t)?t.map(ll):ol[t]}function Ff(t,e,r,{delay:s=0,duration:i,repeat:n=0,repeatType:o="loop",ease:l,times:c}={}){const d={[e]:r};c&&(d.offset=c);const u=ll(l);return Array.isArray(u)&&(d.easing=u),t.animate(d,{delay:s,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:n+1,direction:o==="reverse"?"alternate":"normal"})}function $f(t,{repeat:e,repeatType:r="loop"}){const s=e&&r!=="loop"&&e%2===1?0:t.length-1;return t[s]}const cl=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,Uf=1e-7,Bf=12;function Vf(t,e,r,s,i){let n,o,l=0;do o=e+(r-e)/2,n=cl(o,s,i)-t,n>0?r=o:e=o;while(Math.abs(n)>Uf&&++l<Bf);return o}function pr(t,e,r,s){if(t===e&&r===s)return ee;const i=n=>Vf(n,0,1,t,r);return n=>n===0||n===1?n:cl(i(n),e,s)}const qf=pr(.42,0,1,1),Hf=pr(0,0,.58,1),dl=pr(.42,0,.58,1),zf=t=>Array.isArray(t)&&typeof t[0]!="number",ul=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hl=t=>e=>1-t(1-e),qa=t=>1-Math.sin(Math.acos(t)),fl=hl(qa),Wf=ul(qa),xl=pr(.33,1.53,.69,.99),Ha=hl(xl),Gf=ul(Ha),Kf=t=>(t*=2)<1?.5*Ha(t):.5*(2-Math.pow(2,-10*(t-1))),Jf={linear:ee,easeIn:qf,easeInOut:dl,easeOut:Hf,circIn:qa,circInOut:Wf,circOut:fl,backIn:Ha,backInOut:Gf,backOut:xl,anticipate:Kf},Bi=t=>{if(Array.isArray(t)){Va(t.length===4);const[e,r,s,i]=t;return pr(e,r,s,i)}else if(typeof t=="string")return Jf[t];return t},za=(t,e)=>r=>!!(mr(r)&&Jh.test(r)&&r.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(r,e)),ml=(t,e,r)=>s=>{if(!mr(s))return s;const[i,n,o,l]=s.match(xs);return{[t]:parseFloat(i),[e]:parseFloat(n),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Xf=t=>Ge(0,255,t),As={...yt,transform:t=>Math.round(Xf(t))},dt={test:za("rgb","red"),parse:ml("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:s=1})=>"rgba("+As.transform(t)+", "+As.transform(e)+", "+As.transform(r)+", "+Qt(Zt.transform(s))+")"};function Yf(t){let e="",r="",s="",i="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,r+=r,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const aa={test:za("#"),parse:Yf,transform:dt.transform},St={test:za("hsl","hue"),parse:ml("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:s=1})=>"hsla("+Math.round(t)+", "+_e.transform(Qt(e))+", "+_e.transform(Qt(r))+", "+Qt(Zt.transform(s))+")"},oe={test:t=>dt.test(t)||aa.test(t)||St.test(t),parse:t=>dt.test(t)?dt.parse(t):St.test(t)?St.parse(t):aa.parse(t),transform:t=>mr(t)?t:t.hasOwnProperty("red")?dt.transform(t):St.transform(t)},Q=(t,e,r)=>-r*t+r*e+t;function Es(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Zf({hue:t,saturation:e,lightness:r,alpha:s}){t/=360,e/=100,r/=100;let i=0,n=0,o=0;if(!e)i=n=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=Es(c,l,t+1/3),n=Es(c,l,t),o=Es(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(n*255),blue:Math.round(o*255),alpha:s}}const Ls=(t,e,r)=>{const s=t*t;return Math.sqrt(Math.max(0,r*(e*e-s)+s))},Qf=[aa,dt,St],ex=t=>Qf.find(e=>e.test(t));function Vi(t){const e=ex(t);let r=e.parse(t);return e===St&&(r=Zf(r)),r}const gl=(t,e)=>{const r=Vi(t),s=Vi(e),i={...r};return n=>(i.red=Ls(r.red,s.red,n),i.green=Ls(r.green,s.green,n),i.blue=Ls(r.blue,s.blue,n),i.alpha=Q(r.alpha,s.alpha,n),dt.transform(i))};function tx(t){var e,r;return isNaN(t)&&mr(t)&&(((e=t.match(xs))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Vo))===null||r===void 0?void 0:r.length)||0)>0}const pl={regex:Gh,countKey:"Vars",token:"${v}",parse:ee},yl={regex:Vo,countKey:"Colors",token:"${c}",parse:oe.parse},bl={regex:xs,countKey:"Numbers",token:"${n}",parse:yt.parse};function Rs(t,{regex:e,countKey:r,token:s,parse:i}){const n=t.tokenised.match(e);n&&(t["num"+r]=n.length,t.tokenised=t.tokenised.replace(e,s),t.values.push(...n.map(i)))}function Vr(t){const e=t.toString(),r={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Rs(r,pl),Rs(r,yl),Rs(r,bl),r}function vl(t){return Vr(t).values}function wl(t){const{values:e,numColors:r,numVars:s,tokenised:i}=Vr(t),n=e.length;return o=>{let l=i;for(let c=0;c<n;c++)c<s?l=l.replace(pl.token,o[c]):c<s+r?l=l.replace(yl.token,oe.transform(o[c])):l=l.replace(bl.token,Qt(o[c]));return l}}const rx=t=>typeof t=="number"?0:t;function sx(t){const e=vl(t);return wl(t)(e.map(rx))}const Ke={test:tx,parse:vl,createTransformer:wl,getAnimatableNone:sx},kl=(t,e)=>r=>`${r>0?e:t}`;function jl(t,e){return typeof t=="number"?r=>Q(t,e,r):oe.test(t)?gl(t,e):t.startsWith("var(")?kl(t,e):_l(t,e)}const Nl=(t,e)=>{const r=[...t],s=r.length,i=t.map((n,o)=>jl(n,e[o]));return n=>{for(let o=0;o<s;o++)r[o]=i[o](n);return r}},ax=(t,e)=>{const r={...t,...e},s={};for(const i in r)t[i]!==void 0&&e[i]!==void 0&&(s[i]=jl(t[i],e[i]));return i=>{for(const n in s)r[n]=s[n](i);return r}},_l=(t,e)=>{const r=Ke.createTransformer(e),s=Vr(t),i=Vr(e);return s.numVars===i.numVars&&s.numColors===i.numColors&&s.numNumbers>=i.numNumbers?ze(Nl(s.values,i.values),r):kl(t,e)},or=(t,e,r)=>{const s=e-t;return s===0?1:(r-t)/s},qi=(t,e)=>r=>Q(t,e,r);function ix(t){return typeof t=="number"?qi:typeof t=="string"?oe.test(t)?gl:_l:Array.isArray(t)?Nl:typeof t=="object"?ax:qi}function nx(t,e,r){const s=[],i=r||ix(t[0]),n=t.length-1;for(let o=0;o<n;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||ee:e;l=ze(c,l)}s.push(l)}return s}function Cl(t,e,{clamp:r=!0,ease:s,mixer:i}={}){const n=t.length;if(Va(n===e.length),n===1)return()=>e[0];t[0]>t[n-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=nx(e,s,i),l=o.length,c=d=>{let u=0;if(l>1)for(;u<t.length-2&&!(d<t[u+1]);u++);const h=or(t[u],t[u+1],d);return o[u](h)};return r?d=>c(Ge(t[0],t[n-1],d)):c}function ox(t,e){const r=t[t.length-1];for(let s=1;s<=e;s++){const i=or(0,e,s);t.push(Q(r,1,i))}}function lx(t){const e=[0];return ox(e,t.length-1),e}function cx(t,e){return t.map(r=>r*e)}function dx(t,e){return t.map(()=>e||dl).splice(0,t.length-1)}function qr({duration:t=300,keyframes:e,times:r,ease:s="easeInOut"}){const i=zf(s)?s.map(Bi):Bi(s),n={done:!1,value:e[0]},o=cx(r&&r.length===e.length?r:lx(e),t),l=Cl(o,e,{ease:Array.isArray(i)?i:dx(e,i)});return{calculatedDuration:t,next:c=>(n.value=l(c),n.done=c>=t,n)}}function Sl(t,e){return e?t*(1e3/e):0}const ux=5;function Tl(t,e,r){const s=Math.max(e-ux,0);return Sl(r-t(s),e-s)}const Is=.001,hx=.01,Hi=10,fx=.05,xx=1;function mx({duration:t=800,bounce:e=.25,velocity:r=0,mass:s=1}){let i,n;Of(t<=We(Hi));let o=1-e;o=Ge(fx,xx,o),t=Ge(hx,Hi,Le(t)),o<1?(i=d=>{const u=d*o,h=u*t,f=u-r,x=ia(d,o),g=Math.exp(-h);return Is-f/x*g},n=d=>{const h=d*o*t,f=h*r+r,x=Math.pow(o,2)*Math.pow(d,2)*t,g=Math.exp(-h),w=ia(Math.pow(d,2),o);return(-i(d)+Is>0?-1:1)*((f-x)*g)/w}):(i=d=>{const u=Math.exp(-d*t),h=(d-r)*t+1;return-Is+u*h},n=d=>{const u=Math.exp(-d*t),h=(r-d)*(t*t);return u*h});const l=5/t,c=px(i,n,l);if(t=We(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:t}}}const gx=12;function px(t,e,r){let s=r;for(let i=1;i<gx;i++)s=s-t(s)/e(s);return s}function ia(t,e){return t*Math.sqrt(1-e*e)}const yx=["duration","bounce"],bx=["stiffness","damping","mass"];function zi(t,e){return e.some(r=>t[r]!==void 0)}function vx(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!zi(t,bx)&&zi(t,yx)){const r=mx(t);e={...e,...r,mass:1},e.isResolvedFromDuration=!0}return e}function Pl({keyframes:t,restDelta:e,restSpeed:r,...s}){const i=t[0],n=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=vx({...s,velocity:-Le(s.velocity||0)}),x=h||0,g=c/(2*Math.sqrt(l*d)),w=n-i,k=Le(Math.sqrt(l/d)),E=Math.abs(w)<5;r||(r=E?.01:2),e||(e=E?.005:.5);let y;if(g<1){const p=ia(k,g);y=A=>{const _=Math.exp(-g*k*A);return n-_*((x+g*k*w)/p*Math.sin(p*A)+w*Math.cos(p*A))}}else if(g===1)y=p=>n-Math.exp(-k*p)*(w+(x+k*w)*p);else{const p=k*Math.sqrt(g*g-1);y=A=>{const _=Math.exp(-g*k*A),I=Math.min(p*A,300);return n-_*((x+g*k*w)*Math.sinh(I)+p*w*Math.cosh(I))/p}}return{calculatedDuration:f&&u||null,next:p=>{const A=y(p);if(f)o.done=p>=u;else{let _=x;p!==0&&(g<1?_=Tl(y,p,A):_=0);const I=Math.abs(_)<=r,F=Math.abs(n-A)<=e;o.done=I&&F}return o.value=o.done?n:A,o}}}function Wi({keyframes:t,velocity:e=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:n=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},x=$=>l!==void 0&&$<l||c!==void 0&&$>c,g=$=>l===void 0?c:c===void 0||Math.abs(l-$)<Math.abs(c-$)?l:c;let w=r*e;const k=h+w,E=o===void 0?k:o(k);E!==k&&(w=E-h);const y=$=>-w*Math.exp(-$/s),p=$=>E+y($),A=$=>{const D=y($),z=p($);f.done=Math.abs(D)<=d,f.value=f.done?E:z};let _,I;const F=$=>{x(f.value)&&(_=$,I=Pl({keyframes:[f.value,g(f.value)],velocity:Tl(p,$,f.value),damping:i,stiffness:n,restDelta:d,restSpeed:u}))};return F(0),{calculatedDuration:null,next:$=>{let D=!1;return!I&&_===void 0&&(D=!0,A($),F($)),_!==void 0&&$>_?I.next($-_):(!D&&A($),f)}}}const wx=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Z.update(e,!0),stop:()=>De(e),now:()=>ne.isProcessing?ne.timestamp:performance.now()}},Gi=2e4;function Ki(t){let e=0;const r=50;let s=t.next(e);for(;!s.done&&e<Gi;)e+=r,s=t.next(e);return e>=Gi?1/0:e}const kx={decay:Wi,inertia:Wi,tween:qr,keyframes:qr,spring:Pl};function Hr({autoplay:t=!0,delay:e=0,driver:r=wx,keyframes:s,type:i="keyframes",repeat:n=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...f}){let x=1,g=!1,w,k;const E=()=>{k=new Promise(b=>{w=b})};E();let y;const p=kx[i]||qr;let A;p!==qr&&typeof s[0]!="number"&&(A=Cl([0,100],s,{clamp:!1}),s=[0,100]);const _=p({...f,keyframes:s});let I;l==="mirror"&&(I=p({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let F="idle",$=null,D=null,z=null;_.calculatedDuration===null&&n&&(_.calculatedDuration=Ki(_));const{calculatedDuration:P}=_;let S=1/0,N=1/0;P!==null&&(S=P+o,N=S*(n+1)-o);let v=0;const j=b=>{if(D===null)return;x>0&&(D=Math.min(D,b)),x<0&&(D=Math.min(b-N/x,D)),$!==null?v=$:v=Math.round(b-D)*x;const C=v-e*(x>=0?1:-1),q=x>=0?C<0:C>N;v=Math.max(C,0),F==="finished"&&$===null&&(v=N);let X=v,le=_;if(n){const bs=Math.min(v,N)/S;let yr=Math.floor(bs),tt=bs%1;!tt&&bs>=1&&(tt=1),tt===1&&yr--,yr=Math.min(yr,n+1),!!(yr%2)&&(l==="reverse"?(tt=1-tt,o&&(tt-=o/S)):l==="mirror"&&(le=I)),X=Ge(0,1,tt)*S}const J=q?{done:!1,value:s[0]}:le.next(X);A&&(J.value=A(J.value));let{done:ai}=J;!q&&P!==null&&(ai=x>=0?v>=N:v<=0);const lc=$===null&&(F==="finished"||F==="running"&&ai);return h&&h(J.value),lc&&V(),J},T=()=>{y&&y.stop(),y=void 0},R=()=>{F="idle",T(),w(),E(),D=z=null},V=()=>{F="finished",u&&u(),T(),w()},O=()=>{if(g)return;y||(y=r(j));const b=y.now();c&&c(),$!==null?D=b-$:(!D||F==="finished")&&(D=b),F==="finished"&&E(),z=D,$=null,F="running",y.start()};t&&O();const W={then(b,C){return k.then(b,C)},get time(){return Le(v)},set time(b){b=We(b),v=b,$!==null||!y||x===0?$=b:D=y.now()-b/x},get duration(){const b=_.calculatedDuration===null?Ki(_):_.calculatedDuration;return Le(b)},get speed(){return x},set speed(b){b===x||!y||(x=b,W.time=Le(v))},get state(){return F},play:O,pause:()=>{F="paused",$=v},stop:()=>{g=!0,F!=="idle"&&(F="idle",d&&d(),R())},cancel:()=>{z!==null&&j(z),R()},complete:()=>{F="finished"},sample:b=>(D=0,j(b))};return W}function jx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Nx=jx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_x=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Sr=10,Cx=2e4,Sx=(t,e)=>e.type==="spring"||t==="backgroundColor"||!nl(e.ease);function Tx(t,e,{onUpdate:r,onComplete:s,...i}){if(!(Nx()&&_x.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(p=>{l=p})};u();let{keyframes:h,duration:f=300,ease:x,times:g}=i;if(Sx(e,i)){const p=Hr({...i,repeat:0,delay:0});let A={done:!1,value:h[0]};const _=[];let I=0;for(;!A.done&&I<Cx;)A=p.sample(I),_.push(A.value),I+=Sr;g=void 0,h=_,f=I-Sr,x="linear"}const w=Ff(t.owner.current,e,h,{...i,duration:f,ease:x,times:g}),k=()=>{d=!1,w.cancel()},E=()=>{d=!0,Z.update(k),l(),u()};return w.onfinish=()=>{d||(t.set($f(h,i)),s&&s(),E())},{then(p,A){return c.then(p,A)},attachTimeline(p){return w.timeline=p,w.onfinish=null,ee},get time(){return Le(w.currentTime||0)},set time(p){w.currentTime=We(p)},get speed(){return w.playbackRate},set speed(p){w.playbackRate=p},get duration(){return Le(f)},play:()=>{o||(w.play(),De(k))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:p}=w;if(p){const A=Hr({...i,autoplay:!1});t.setWithVelocity(A.sample(p-Sr).value,A.sample(p).value,Sr)}E()},complete:()=>{d||w.finish()},cancel:E}}function Px({keyframes:t,delay:e,onUpdate:r,onComplete:s}){const i=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:ee,pause:ee,stop:ee,then:n=>(n(),Promise.resolve()),cancel:ee,complete:ee});return e?Hr({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const Ax={type:"spring",stiffness:500,damping:25,restSpeed:10},Ex=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Lx={type:"keyframes",duration:.8},Rx={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Ix=(t,{keyframes:e})=>e.length>2?Lx:pt.has(t)?t.startsWith("scale")?Ex(e[1]):Ax:Rx,na=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ke.test(e)||e==="0")&&!e.startsWith("url(")),Dx=new Set(["brightness","contrast","saturate","opacity"]);function Ox(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=r.match(xs)||[];if(!s)return t;const i=r.replace(s,"");let n=Dx.has(e)?1:0;return s!==r&&(n*=100),e+"("+n+i+")"}const Mx=/([a-z-]*)\(.*?\)/g,oa={...Ke,getAnimatableNone:t=>{const e=t.match(Mx);return e?e.map(Ox).join(" "):t}},Fx={...qo,color:oe,backgroundColor:oe,outlineColor:oe,fill:oe,stroke:oe,borderColor:oe,borderTopColor:oe,borderRightColor:oe,borderBottomColor:oe,borderLeftColor:oe,filter:oa,WebkitFilter:oa},Wa=t=>Fx[t];function Al(t,e){let r=Wa(t);return r!==oa&&(r=Ke),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const El=t=>/^0[^.\s]+$/.test(t);function $x(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||El(t)}function Ux(t,e,r,s){const i=na(e,r);let n;Array.isArray(r)?n=[...r]:n=[null,r];const o=s.from!==void 0?s.from:t.get();let l;const c=[];for(let d=0;d<n.length;d++)n[d]===null&&(n[d]=d===0?o:n[d-1]),$x(n[d])&&c.push(d),typeof n[d]=="string"&&n[d]!=="none"&&n[d]!=="0"&&(l=n[d]);if(i&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];n[u]=Al(e,l)}return n}function Bx({when:t,delay:e,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:n,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function Ga(t,e){return t[e]||t.default||t}const Vx={skipAnimations:!1},Ka=(t,e,r,s={})=>i=>{const n=Ga(s,t)||{},o=n.delay||s.delay||0;let{elapsed:l=0}=s;l=l-We(o);const c=Ux(e,t,r,n),d=c[0],u=c[c.length-1],h=na(t,d),f=na(t,u);let x={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...n,delay:-l,onUpdate:g=>{e.set(g),n.onUpdate&&n.onUpdate(g)},onComplete:()=>{i(),n.onComplete&&n.onComplete()}};if(Bx(n)||(x={...x,...Ix(t,x)}),x.duration&&(x.duration=We(x.duration)),x.repeatDelay&&(x.repeatDelay=We(x.repeatDelay)),!h||!f||Mf.current||n.type===!1||Vx.skipAnimations)return Px(x);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const g=Tx(e,t,x);if(g)return g}return Hr(x)};function zr(t){return!!(he(t)&&t.add)}const Ll=t=>/^\-?\d*\.?\d+$/.test(t);function Ja(t,e){t.indexOf(e)===-1&&t.push(e)}function Xa(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class Ya{constructor(){this.subscriptions=[]}add(e){return Ja(this.subscriptions,e),()=>Xa(this.subscriptions,e)}notify(e,r,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,r,s);else for(let n=0;n<i;n++){const o=this.subscriptions[n];o&&o(e,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const qx=t=>!isNaN(parseFloat(t));class Hx{constructor(e,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,i=!0)=>{this.prev=this.current,this.current=s;const{delta:n,timestamp:o}=ne;this.lastUpdated!==o&&(this.timeDelta=n,this.lastUpdated=o,Z.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Z.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=qx(this.current),this.owner=r.owner}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new Ya);const s=this.events[e].add(r);return e==="change"?()=>{s(),Z.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,s){this.set(r),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Sl(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Lt(t,e){return new Hx(t,e)}const Rl=t=>e=>e.test(t),zx={test:t=>t==="auto",parse:t=>t},Il=[yt,U,_e,Fe,Yh,Xh,zx],qt=t=>Il.find(Rl(t)),Wx=[...Il,oe,Ke],Gx=t=>Wx.find(Rl(t));function Kx(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Lt(r))}function Jx(t,e){const r=gs(t,e);let{transitionEnd:s={},transition:i={},...n}=r?t.makeTargetAnimatable(r,!1):{};n={...n,...s};for(const o in n){const l=hf(n[o]);Kx(t,o,l)}}function Xx(t,e,r){var s,i;const n=Object.keys(e).filter(l=>!t.hasValue(l)),o=n.length;if(o)for(let l=0;l<o;l++){const c=n[l],d=e[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(i=(s=r[c])!==null&&s!==void 0?s:t.readValue(c))!==null&&i!==void 0?i:e[c]),u!=null&&(typeof u=="string"&&(Ll(u)||El(u))?u=parseFloat(u):!Gx(u)&&Ke.test(d)&&(u=Al(c,d)),t.addValue(c,Lt(u,{owner:t})),r[c]===void 0&&(r[c]=u),u!==null&&t.setBaseTarget(c,u))}}function Yx(t,e){return e?(e[t]||e.default||e).from:void 0}function Zx(t,e,r){const s={};for(const i in t){const n=Yx(i,e);if(n!==void 0)s[i]=n;else{const o=r.getValue(i);o&&(s[i]=o.get())}}return s}function Qx({protectedKeys:t,needsAnimating:e},r){const s=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,s}function em(t,e){const r=t.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==r)return!0}else return r!==e}function Dl(t,e,{delay:r=0,transitionOverride:s,type:i}={}){let{transition:n=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");s&&(n=s);const d=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h),x=l[h];if(!f||x===void 0||u&&Qx(u,h))continue;const g={delay:r,elapsed:0,...Ga(n||{},h)};if(window.HandoffAppearAnimations){const E=t.getProps()[Oo];if(E){const y=window.HandoffAppearAnimations(E,h,f,Z);y!==null&&(g.elapsed=y,g.isHandoff=!0)}}let w=!g.isHandoff&&!em(f,x);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start(Ka(h,f,x,t.shouldReduceMotion&&pt.has(h)?{type:!1}:g));const k=f.animation;zr(c)&&(c.add(h),k.then(()=>c.remove(h))),d.push(k)}return o&&Promise.all(d).then(()=>{o&&Jx(t,o)}),d}function la(t,e,r={}){const s=gs(t,e,r.custom);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const n=s?()=>Promise.all(Dl(t,s,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=i;return tm(t,e,d+c,u,h,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[n,o]:[o,n];return c().then(()=>d())}else return Promise.all([n(),o(r.delay)])}function tm(t,e,r=0,s=0,i=1,n){const o=[],l=(t.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(t.variantChildren).sort(rm).forEach((d,u)=>{d.notify("AnimationStart",e),o.push(la(d,e,{...n,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",e)))}),Promise.all(o)}function rm(t,e){return t.sortNodePosition(e)}function sm(t,e,r={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(n=>la(t,n,r));s=Promise.all(i)}else if(typeof e=="string")s=la(t,e,r);else{const i=typeof e=="function"?gs(t,e,r.custom):e;s=Promise.all(Dl(t,i,r))}return s.then(()=>t.notify("AnimationComplete",e))}const am=[...La].reverse(),im=La.length;function nm(t){return e=>Promise.all(e.map(({animation:r,options:s})=>sm(t,r,s)))}function om(t){let e=nm(t);const r=cm();let s=!0;const i=(c,d)=>{const u=gs(t,d);if(u){const{transition:h,transitionEnd:f,...x}=u;c={...c,...x,...f}}return c};function n(c){e=c(t)}function o(c,d){const u=t.getProps(),h=t.getVariantContext(!0)||{},f=[],x=new Set;let g={},w=1/0;for(let E=0;E<im;E++){const y=am[E],p=r[y],A=u[y]!==void 0?u[y]:h[y],_=ir(A),I=y===d?p.isActive:null;I===!1&&(w=E);let F=A===h[y]&&A!==u[y]&&_;if(F&&s&&t.manuallyAnimateOnMount&&(F=!1),p.protectedKeys={...g},!p.isActive&&I===null||!A&&!p.prevProp||hs(A)||typeof A=="boolean")continue;let D=lm(p.prevProp,A)||y===d&&p.isActive&&!F&&_||E>w&&_,z=!1;const P=Array.isArray(A)?A:[A];let S=P.reduce(i,{});I===!1&&(S={});const{prevResolvedValues:N={}}=p,v={...N,...S},j=T=>{D=!0,x.has(T)&&(z=!0,x.delete(T)),p.needsAnimating[T]=!0};for(const T in v){const R=S[T],V=N[T];if(g.hasOwnProperty(T))continue;let O=!1;Br(R)&&Br(V)?O=!al(R,V):O=R!==V,O?R!==void 0?j(T):x.add(T):R!==void 0&&x.has(T)?j(T):p.protectedKeys[T]=!0}p.prevProp=A,p.prevResolvedValues=S,p.isActive&&(g={...g,...S}),s&&t.blockInitialAnimation&&(D=!1),D&&(!F||z)&&f.push(...P.map(T=>({animation:T,options:{type:y,...c}})))}if(x.size){const E={};x.forEach(y=>{const p=t.getBaseTarget(y);p!==void 0&&(E[y]=p)}),f.push({animation:E})}let k=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(k=!1),s=!1,k?e(f):Promise.resolve()}function l(c,d,u){var h;if(r[c].isActive===d)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(x=>{var g;return(g=x.animationState)===null||g===void 0?void 0:g.setActive(c,d)}),r[c].isActive=d;const f=o(u,c);for(const x in r)r[x].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:n,getState:()=>r}}function lm(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!al(e,t):!1}function st(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function cm(){return{animate:st(!0),whileInView:st(),whileHover:st(),whileTap:st(),whileDrag:st(),whileFocus:st(),exit:st()}}class dm extends et{constructor(e){super(e),e.animationState||(e.animationState=om(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),hs(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let um=0;class hm extends et{constructor(){super(...arguments),this.id=um++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r,custom:s}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const n=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});r&&!e&&n.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const fm={animation:{Feature:dm},exit:{Feature:hm}},Ji=(t,e)=>Math.abs(t-e);function xm(t,e){const r=Ji(t.x,e.x),s=Ji(t.y,e.y);return Math.sqrt(r**2+s**2)}class Ol{constructor(e,r,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:n=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Os(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,x=xm(h.offset,{x:0,y:0})>=3;if(!f&&!x)return;const{point:g}=h,{timestamp:w}=ne;this.history.push({...g,timestamp:w});const{onStart:k,onMove:E}=this.handlers;f||(k&&k(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ds(f,this.transformPagePoint),Z.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Os(h.type==="pointercancel"?this.lastMoveEventInfo:Ds(f,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,k),g&&g(h,k)},!Qo(e))return;this.dragSnapToOrigin=n,this.handlers=r,this.transformPagePoint=s,this.contextWindow=i||window;const o=ms(e),l=Ds(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=ne;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(e,Os(l,this.history)),this.removeListeners=ze(Ee(this.contextWindow,"pointermove",this.handlePointerMove),Ee(this.contextWindow,"pointerup",this.handlePointerUp),Ee(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),De(this.updatePoint)}}function Ds(t,e){return e?{point:e(t.point)}:t}function Xi(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Os({point:t},e){return{point:t,delta:Xi(t,Ml(e)),offset:Xi(t,mm(e)),velocity:gm(e,.1)}}function mm(t){return t[0]}function Ml(t){return t[t.length-1]}function gm(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,s=null;const i=Ml(t);for(;r>=0&&(s=t[r],!(i.timestamp-s.timestamp>We(e)));)r--;if(!s)return{x:0,y:0};const n=Le(i.timestamp-s.timestamp);if(n===0)return{x:0,y:0};const o={x:(i.x-s.x)/n,y:(i.y-s.y)/n};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xe(t){return t.max-t.min}function ca(t,e=0,r=.01){return Math.abs(t-e)<=r}function Yi(t,e,r,s=.5){t.origin=s,t.originPoint=Q(e.min,e.max,t.origin),t.scale=xe(r)/xe(e),(ca(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Q(r.min,r.max,t.origin)-t.originPoint,(ca(t.translate)||isNaN(t.translate))&&(t.translate=0)}function er(t,e,r,s){Yi(t.x,e.x,r.x,s?s.originX:void 0),Yi(t.y,e.y,r.y,s?s.originY:void 0)}function Zi(t,e,r){t.min=r.min+e.min,t.max=t.min+xe(e)}function pm(t,e,r){Zi(t.x,e.x,r.x),Zi(t.y,e.y,r.y)}function Qi(t,e,r){t.min=e.min-r.min,t.max=t.min+xe(e)}function tr(t,e,r){Qi(t.x,e.x,r.x),Qi(t.y,e.y,r.y)}function ym(t,{min:e,max:r},s){return e!==void 0&&t<e?t=s?Q(e,t,s.min):Math.max(t,e):r!==void 0&&t>r&&(t=s?Q(r,t,s.max):Math.min(t,r)),t}function en(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function bm(t,{top:e,left:r,bottom:s,right:i}){return{x:en(t.x,r,i),y:en(t.y,e,s)}}function tn(t,e){let r=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,s]=[s,r]),{min:r,max:s}}function vm(t,e){return{x:tn(t.x,e.x),y:tn(t.y,e.y)}}function wm(t,e){let r=.5;const s=xe(t),i=xe(e);return i>s?r=or(e.min,e.max-s,t.min):s>i&&(r=or(t.min,t.max-i,e.min)),Ge(0,1,r)}function km(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const da=.35;function jm(t=da){return t===!1?t=0:t===!0&&(t=da),{x:rn(t,"left","right"),y:rn(t,"top","bottom")}}function rn(t,e,r){return{min:sn(t,e),max:sn(t,r)}}function sn(t,e){return typeof t=="number"?t:t[e]||0}const an=()=>({translate:0,scale:1,origin:0,originPoint:0}),Tt=()=>({x:an(),y:an()}),nn=()=>({min:0,max:0}),re=()=>({x:nn(),y:nn()});function ge(t){return[t("x"),t("y")]}function Fl({top:t,left:e,right:r,bottom:s}){return{x:{min:e,max:r},y:{min:t,max:s}}}function Nm({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _m(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function Ms(t){return t===void 0||t===1}function ua({scale:t,scaleX:e,scaleY:r}){return!Ms(t)||!Ms(e)||!Ms(r)}function it(t){return ua(t)||$l(t)||t.z||t.rotate||t.rotateX||t.rotateY}function $l(t){return on(t.x)||on(t.y)}function on(t){return t&&t!=="0%"}function Wr(t,e,r){const s=t-r,i=e*s;return r+i}function ln(t,e,r,s,i){return i!==void 0&&(t=Wr(t,i,s)),Wr(t,r,s)+e}function ha(t,e=0,r=1,s,i){t.min=ln(t.min,e,r,s,i),t.max=ln(t.max,e,r,s,i)}function Ul(t,{x:e,y:r}){ha(t.x,e.translate,e.scale,e.originPoint),ha(t.y,r.translate,r.scale,r.originPoint)}function Cm(t,e,r,s=!1){const i=r.length;if(!i)return;e.x=e.y=1;let n,o;for(let l=0;l<i;l++){n=r[l],o=n.projectionDelta;const c=n.instance;c&&c.style&&c.style.display==="contents"||(s&&n.options.layoutScroll&&n.scroll&&n!==n.root&&Pt(t,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ul(t,o)),s&&it(n.latestValues)&&Pt(t,n.latestValues))}e.x=cn(e.x),e.y=cn(e.y)}function cn(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Ue(t,e){t.min=t.min+e,t.max=t.max+e}function dn(t,e,[r,s,i]){const n=e[i]!==void 0?e[i]:.5,o=Q(t.min,t.max,n);ha(t,e[r],e[s],o,e.scale)}const Sm=["x","scaleX","originX"],Tm=["y","scaleY","originY"];function Pt(t,e){dn(t.x,e,Sm),dn(t.y,e,Tm)}function Bl(t,e){return Fl(_m(t.getBoundingClientRect(),e))}function Pm(t,e,r){const s=Bl(t,r),{scroll:i}=e;return i&&(Ue(s.x,i.offset.x),Ue(s.y,i.offset.y)),s}const Vl=({current:t})=>t?t.ownerDocument.defaultView:null,Am=new WeakMap;class Em{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=re(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ms(u,"page").point)},n=(u,h)=>{const{drag:f,dragPropagation:x,onDragStart:g}=this.getProps();if(f&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tl(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ge(k=>{let E=this.getAxisMotionValue(k).get()||0;if(_e.test(E)){const{projection:y}=this.visualElement;if(y&&y.layout){const p=y.layout.layoutBox[k];p&&(E=xe(p)*(parseFloat(E)/100))}}this.originPoint[k]=E}),g&&Z.update(()=>g(u,h),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:x,onDirectionLock:g,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:k}=h;if(x&&this.currentDirection===null){this.currentDirection=Lm(k),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,k),this.updateAxis("y",h.point,k),this.visualElement.render(),w&&w(u,h)},l=(u,h)=>this.stop(u,h),c=()=>ge(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Ol(e,{onSessionStart:i,onStart:n,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Vl(this.visualElement)})}stop(e,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:n}=this.getProps();n&&Z.update(()=>n(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,s){const{drag:i}=this.getProps();if(!s||!Tr(e,i,this.currentDirection))return;const n=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=ym(o,this.constraints[e],this.elastic[e])),n.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,n=this.constraints;r&&Ct(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=bm(i.layoutBox,r):this.constraints=!1,this.elastic=jm(s),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ge(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=km(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Ct(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const n=Pm(s,i.root,this.visualElement.getTransformPagePoint());let o=vm(i.layout.layoutBox,n);if(r){const l=r(Nm(o));this.hasMutatedConstraints=!!l,l&&(o=Fl(l))}return o}startAnimation(e){const{drag:r,dragMomentum:s,dragElastic:i,dragTransition:n,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ge(u=>{if(!Tr(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,x=i?40:1e7,g={type:"inertia",velocity:s?e[u]:0,bounceStiffness:f,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...n,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(l)}startAxisValueAnimation(e,r){const s=this.getAxisMotionValue(e);return s.start(Ka(e,s,0,r))}stopAnimation(){ge(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ge(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),i=s[r];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ge(r=>{const{drag:s}=this.getProps();if(!Tr(r,s,this.currentDirection))return;const{projection:i}=this.visualElement,n=this.getAxisMotionValue(r);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[r];n.set(e[r]-Q(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!Ct(r)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ge(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=wm({min:c,max:c},this.constraints[o])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ge(o=>{if(!Tr(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Q(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;Am.set(this.visualElement,this);const e=this.visualElement.current,r=Ee(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Ct(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,n=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),s();const o=Ae(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ge(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),n(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:n=!1,dragElastic:o=da,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:s,dragPropagation:i,dragConstraints:n,dragElastic:o,dragMomentum:l}}}function Tr(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Lm(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Rm extends et{constructor(e){super(e),this.removeGroupControls=ee,this.removeListeners=ee,this.controls=new Em(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ee}unmount(){this.removeGroupControls(),this.removeListeners()}}const un=t=>(e,r)=>{t&&Z.update(()=>t(e,r))};class Im extends et{constructor(){super(...arguments),this.removePointerDownListener=ee}onPointerDown(e){this.session=new Ol(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Vl(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:un(e),onStart:un(r),onMove:s,onEnd:(n,o)=>{delete this.session,i&&Z.update(()=>i(n,o))}}}mount(){this.removePointerDownListener=Ee(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Dm(){const t=m.useContext(ds);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:r,register:s}=t,i=m.useId();return m.useEffect(()=>s(i),[]),!e&&r?[!1,()=>r&&r(i)]:[!0]}const Er={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hn(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ht={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(U.test(t))t=parseFloat(t);else return t;const r=hn(t,e.target.x),s=hn(t,e.target.y);return`${r}% ${s}%`}},Om={correct:(t,{treeScale:e,projectionDelta:r})=>{const s=t,i=Ke.parse(t);if(i.length>5)return s;const n=Ke.createTransformer(t),o=typeof i[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=Q(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),n(i)}};class Mm extends ba.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s,layoutId:i}=this.props,{projection:n}=e;qh(Fm),n&&(r.group&&r.group.add(n),s&&s.register&&i&&s.register(n),n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),Er.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:s,drag:i,isPresent:n}=this.props,o=s.projection;return o&&(o.isPresent=n,i||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?o.promote():o.relegate()||Z.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ql(t){const[e,r]=Dm(),s=m.useContext(Ia);return ba.createElement(Mm,{...t,layoutGroup:s,switchLayoutGroup:m.useContext(Fo),isPresent:e,safeToRemove:r})}const Fm={borderRadius:{...Ht,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ht,borderTopRightRadius:Ht,borderBottomLeftRadius:Ht,borderBottomRightRadius:Ht,boxShadow:Om},Hl=["TopLeft","TopRight","BottomLeft","BottomRight"],$m=Hl.length,fn=t=>typeof t=="string"?parseFloat(t):t,xn=t=>typeof t=="number"||U.test(t);function Um(t,e,r,s,i,n){i?(t.opacity=Q(0,r.opacity!==void 0?r.opacity:1,Bm(s)),t.opacityExit=Q(e.opacity!==void 0?e.opacity:1,0,Vm(s))):n&&(t.opacity=Q(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let o=0;o<$m;o++){const l=`border${Hl[o]}Radius`;let c=mn(e,l),d=mn(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||xn(c)===xn(d)?(t[l]=Math.max(Q(fn(c),fn(d),s),0),(_e.test(d)||_e.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||r.rotate)&&(t.rotate=Q(e.rotate||0,r.rotate||0,s))}function mn(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Bm=zl(0,.5,fl),Vm=zl(.5,.95,ee);function zl(t,e,r){return s=>s<t?0:s>e?1:r(or(t,e,s))}function gn(t,e){t.min=e.min,t.max=e.max}function me(t,e){gn(t.x,e.x),gn(t.y,e.y)}function pn(t,e,r,s,i){return t-=e,t=Wr(t,1/r,s),i!==void 0&&(t=Wr(t,1/i,s)),t}function qm(t,e=0,r=1,s=.5,i,n=t,o=t){if(_e.test(e)&&(e=parseFloat(e),e=Q(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Q(n.min,n.max,s);t===n&&(l-=e),t.min=pn(t.min,e,r,l,i),t.max=pn(t.max,e,r,l,i)}function yn(t,e,[r,s,i],n,o){qm(t,e[r],e[s],e[i],e.scale,n,o)}const Hm=["x","scaleX","originX"],zm=["y","scaleY","originY"];function bn(t,e,r,s){yn(t.x,e,Hm,r?r.x:void 0,s?s.x:void 0),yn(t.y,e,zm,r?r.y:void 0,s?s.y:void 0)}function vn(t){return t.translate===0&&t.scale===1}function Wl(t){return vn(t.x)&&vn(t.y)}function Wm(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Gl(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function wn(t){return xe(t.x)/xe(t.y)}class Gm{constructor(){this.members=[]}add(e){Ja(this.members,e),e.scheduleRender()}remove(e){if(Xa(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(i=>e===i);if(r===0)return!1;let s;for(let i=r;i>=0;i--){const n=this.members[i];if(n.isPresent!==!1){s=n;break}}return s?(this.promote(s),!0):!1}promote(e,r){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,r&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:s}=e;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kn(t,e,r){let s="";const i=t.x.translate/e.x,n=t.y.translate/e.y;if((i||n)&&(s=`translate3d(${i}px, ${n}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),r){const{rotate:c,rotateX:d,rotateY:u}=r;c&&(s+=`rotate(${c}deg) `),d&&(s+=`rotateX(${d}deg) `),u&&(s+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const Km=(t,e)=>t.depth-e.depth;class Jm{constructor(){this.children=[],this.isDirty=!1}add(e){Ja(this.children,e),this.isDirty=!0}remove(e){Xa(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Km),this.isDirty=!1,this.children.forEach(e)}}function Xm(t,e){const r=performance.now(),s=({timestamp:i})=>{const n=i-r;n>=e&&(De(s),t(n-e))};return Z.read(s,!0),()=>De(s)}function Ym(t){window.MotionDebug&&window.MotionDebug.record(t)}function Zm(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Qm(t,e,r){const s=he(t)?t:Lt(t);return s.start(Ka("",s,e,r)),s.animation}const jn=["","X","Y","Z"],eg={visibility:"hidden"},Nn=1e3;let tg=0;const nt={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Kl({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=tg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,nt.totalNodes=nt.resolvedTargetDeltas=nt.recalculatedProjection=0,this.nodes.forEach(ag),this.nodes.forEach(cg),this.nodes.forEach(dg),this.nodes.forEach(ig),Ym(nt)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Jm)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ya),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Zm(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Xm(f,250),Er.hasAnimatedSinceResize&&(Er.hasAnimatedSinceResize=!1,this.nodes.forEach(Cn))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||mg,{onLayoutAnimationStart:k,onLayoutAnimationComplete:E}=u.getProps(),y=!this.targetLayout||!Gl(this.targetLayout,g)||x,p=!f&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||p||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,p);const A={...Ga(w,"layout"),onPlay:k,onComplete:E};(u.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else f||Cn(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,De(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ug),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_n);return}this.isUpdating||this.nodes.forEach(og),this.isUpdating=!1,this.nodes.forEach(lg),this.nodes.forEach(rg),this.nodes.forEach(sg),this.clearAllSnapshots();const l=performance.now();ne.delta=Ge(0,1e3/60,l-ne.timestamp),ne.timestamp=l,ne.isProcessing=!0,Ss.update.process(ne),Ss.preRender.process(ne),Ss.render.process(ne),ne.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ng),this.sharedNodes.forEach(hg)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Z.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Z.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Wl(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||it(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),gg(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return re();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Ue(l.x,c.offset.x),Ue(l.y,c.offset.y)),l}removeElementScroll(o){const l=re();me(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){me(l,o);const{scroll:f}=this.root;f&&(Ue(l.x,-f.offset.x),Ue(l.y,-f.offset.y))}Ue(l.x,u.offset.x),Ue(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=re();me(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Pt(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),it(u.latestValues)&&Pt(c,u.latestValues)}return it(this.latestValues)&&Pt(c,this.latestValues),c}removeTransform(o){const l=re();me(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!it(d.latestValues))continue;ua(d.latestValues)&&d.updateSnapshot();const u=re(),h=d.measurePageBox();me(u,h),bn(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return it(this.latestValues)&&bn(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ne.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ne.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=re(),this.relativeTargetOrigin=re(),tr(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),me(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=re(),this.targetWithTransforms=re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pm(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):me(this.target,this.layout.layoutBox),Ul(this.target,this.targetDelta)):me(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=re(),this.relativeTargetOrigin=re(),tr(this.relativeTargetOrigin,this.target,x.target),me(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}nt.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ua(this.parent.latestValues)||$l(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ne.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;me(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,x=this.treeScale.y;Cm(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Tt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Tt(),this.projectionDeltaWithTransform=Tt());const w=this.projectionTransform;er(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=kn(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),nt.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Tt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=re(),x=c?c.source:void 0,g=this.layout?this.layout.source:void 0,w=x!==g,k=this.getStack(),E=!k||k.members.length<=1,y=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(xg));this.animationProgress=0;let p;this.mixTargetDelta=A=>{const _=A/1e3;Sn(h.x,o.x,_),Sn(h.y,o.y,_),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tr(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fg(this.relativeTarget,this.relativeTargetOrigin,f,_),p&&Wm(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=re()),me(p,this.relativeTarget)),w&&(this.animationValues=u,Um(u,d,this.latestValues,_,y,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(De(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Z.update(()=>{Er.hasAnimatedSinceResize=!0,this.currentAnimation=Qm(0,Nn,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Nn),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&Jl(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||re();const h=xe(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=xe(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}me(l,c),Pt(l,u),er(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Gm),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<jn.length;u++){const h="rotate"+jn[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return eg;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=Ar(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ar(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!it(this.latestValues)&&(w.transform=u?u({},""):"none",this.hasProjected=!1),w}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=kn(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x,y:g}=this.projectionDelta;d.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in $r){if(f[w]===void 0)continue;const{correct:k,applyTo:E}=$r[w],y=d.transform==="none"?f[w]:k(f[w],h);if(E){const p=E.length;for(let A=0;A<p;A++)d[E[A]]=y}else d[w]=y}return this.options.layoutId&&(d.pointerEvents=h===this?Ar(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(_n),this.root.sharedNodes.clear()}}}function rg(t){t.updateLayout()}function sg(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:n}=t.options,o=r.source!==t.layout.source;n==="size"?ge(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],x=xe(f);f.min=s[h].min,f.max=f.min+x}):Jl(n,r.layoutBox,s)&&ge(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],x=xe(s[h]);f.max=f.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+x)});const l=Tt();er(l,s,r.layoutBox);const c=Tt();o?er(c,t.applyTransform(i,!0),r.measuredBox):er(c,s,r.layoutBox);const d=!Wl(l);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:x}=h;if(f&&x){const g=re();tr(g,r.layoutBox,f.layoutBox);const w=re();tr(w,s,x.layoutBox),Gl(g,w)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function ag(t){nt.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ig(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ng(t){t.clearSnapshot()}function _n(t){t.clearMeasurements()}function og(t){t.isLayoutDirty=!1}function lg(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cn(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cg(t){t.resolveTargetDelta()}function dg(t){t.calcProjection()}function ug(t){t.resetRotation()}function hg(t){t.removeLeadSnapshot()}function Sn(t,e,r){t.translate=Q(e.translate,0,r),t.scale=Q(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Tn(t,e,r,s){t.min=Q(e.min,r.min,s),t.max=Q(e.max,r.max,s)}function fg(t,e,r,s){Tn(t.x,e.x,r.x,s),Tn(t.y,e.y,r.y,s)}function xg(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const mg={duration:.45,ease:[.4,0,.1,1]},Pn=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),An=Pn("applewebkit/")&&!Pn("chrome/")?Math.round:ee;function En(t){t.min=An(t.min),t.max=An(t.max)}function gg(t){En(t.x),En(t.y)}function Jl(t,e,r){return t==="position"||t==="preserve-aspect"&&!ca(wn(e),wn(r),.2)}const pg=Kl({attachResizeListener:(t,e)=>Ae(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Fs={current:void 0},Xl=Kl({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Fs.current){const t=new pg({});t.mount(window),t.setOptions({layoutScroll:!0}),Fs.current=t}return Fs.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yg={pan:{Feature:Im},drag:{Feature:Rm,ProjectionNode:Xl,MeasureLayout:ql}},bg=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function vg(t){const e=bg.exec(t);if(!e)return[,];const[,r,s]=e;return[r,s]}function fa(t,e,r=1){const[s,i]=vg(t);if(!s)return;const n=window.getComputedStyle(e).getPropertyValue(s);if(n){const o=n.trim();return Ll(o)?parseFloat(o):o}else return ra(i)?fa(i,e,r+1):i}function wg(t,{...e},r){const s=t.current;if(!(s instanceof Element))return{target:e,transitionEnd:r};r&&(r={...r}),t.values.forEach(i=>{const n=i.get();if(!ra(n))return;const o=fa(n,s);o&&i.set(o)});for(const i in e){const n=e[i];if(!ra(n))continue;const o=fa(n,s);o&&(e[i]=o,r||(r={}),r[i]===void 0&&(r[i]=n))}return{target:e,transitionEnd:r}}const kg=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Yl=t=>kg.has(t),jg=t=>Object.keys(t).some(Yl),Ln=t=>t===yt||t===U,Rn=(t,e)=>parseFloat(t.split(", ")[e]),In=(t,e)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return Rn(i[1],e);{const n=s.match(/^matrix\((.+)\)$/);return n?Rn(n[1],t):0}},Ng=new Set(["x","y","z"]),_g=xr.filter(t=>!Ng.has(t));function Cg(t){const e=[];return _g.forEach(r=>{const s=t.getValue(r);s!==void 0&&(e.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Rt={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:In(4,13),y:In(5,14)};Rt.translateX=Rt.x;Rt.translateY=Rt.y;const Sg=(t,e,r)=>{const s=e.measureViewportBox(),i=e.current,n=getComputedStyle(i),{display:o}=n,l={};o==="none"&&e.setStaticValue("display",t.display||"block"),r.forEach(d=>{l[d]=Rt[d](s,n)}),e.render();const c=e.measureViewportBox();return r.forEach(d=>{const u=e.getValue(d);u&&u.jump(l[d]),t[d]=Rt[d](c,n)}),t},Tg=(t,e,r={},s={})=>{e={...e},s={...s};const i=Object.keys(e).filter(Yl);let n=[],o=!1;const l=[];if(i.forEach(c=>{const d=t.getValue(c);if(!t.hasValue(c))return;let u=r[c],h=qt(u);const f=e[c];let x;if(Br(f)){const g=f.length,w=f[0]===null?1:0;u=f[w],h=qt(u);for(let k=w;k<g&&f[k]!==null;k++)x?Va(qt(f[k])===x):x=qt(f[k])}else x=qt(f);if(h!==x)if(Ln(h)&&Ln(x)){const g=d.get();typeof g=="string"&&d.set(parseFloat(g)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&x===U&&(e[c]=f.map(parseFloat))}else h!=null&&h.transform&&(x!=null&&x.transform)&&(u===0||f===0)?u===0?d.set(x.transform(u)):e[c]=h.transform(f):(o||(n=Cg(t),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:e[c],d.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=Sg(e,t,l);return n.length&&n.forEach(([u,h])=>{t.getValue(u).set(h)}),t.render(),us&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:s}}else return{target:e,transitionEnd:s}};function Pg(t,e,r,s){return jg(e)?Tg(t,e,r,s):{target:e,transitionEnd:s}}const Ag=(t,e,r,s)=>{const i=wg(t,e,s);return e=i.target,s=i.transitionEnd,Pg(t,e,r,s)},xa={current:null},Zl={current:!1};function Eg(){if(Zl.current=!0,!!us)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xa.current=t.matches;t.addListener(e),e()}else xa.current=!1}function Lg(t,e,r){const{willChange:s}=e;for(const i in e){const n=e[i],o=r[i];if(he(n))t.addValue(i,n),zr(s)&&s.add(i);else if(he(o))t.addValue(i,Lt(n,{owner:t})),zr(s)&&s.remove(i);else if(o!==n)if(t.hasValue(i)){const l=t.getValue(i);!l.hasAnimated&&l.set(n)}else{const l=t.getStaticValue(i);t.addValue(i,Lt(l!==void 0?l:n,{owner:t}))}}for(const i in r)e[i]===void 0&&t.removeValue(i);return e}const Dn=new WeakMap,Ql=Object.keys(nr),Rg=Ql.length,On=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ig=Ra.length;class Dg{constructor({parent:e,props:r,presenceContext:s,reducedMotionConfig:i,visualState:n},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Z.render(this.render,!1,!0);const{latestValues:l,renderState:c}=n;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=fs(r),this.isVariantNode=Mo(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(r,{});for(const h in u){const f=u[h];l[h]!==void 0&&he(f)&&(f.set(l[h],!1),zr(d)&&d.add(h))}}scrapeMotionValuesFromProps(e,r){return{}}mount(e){this.current=e,Dn.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Zl.current||Eg(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xa.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Dn.delete(this.current),this.projection&&this.projection.unmount(),De(this.notifyUpdate),De(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,r){const s=pt.has(e),i=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Z.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),n=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),n()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...r},s,i,n){let o,l;for(let c=0;c<Rg;c++){const d=Ql[c],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:x}=nr[d];f&&(o=f),u(r)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:x}=r;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&Ct(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:n,layoutScroll:f,layoutRoot:x})}return l}updateFeatures(){for(const e in this.features){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):re()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}makeTargetAnimatable(e,r=!0){return this.makeTargetAnimatableFromInstance(e,this.props,r)}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<On.length;s++){const i=On[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const n=e["on"+i];n&&(this.propEventSubscriptions[i]=this.on(i,n))}this.prevMotionValues=Lg(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const r={};for(let s=0;s<Ig;s++){const i=Ra[s],n=this.props[i];(ir(n)||n===!1)&&(r[i]=n)}return r}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){r!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,r)),this.values.set(e,r),this.latestValues[e]=r.get()}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&r!==void 0&&(s=Lt(r,{owner:this}),this.addValue(e,s)),s}readValue(e){var r;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:s}=this.props,i=typeof s=="string"||typeof s=="object"?(r=Ba(this.props,s))===null||r===void 0?void 0:r[e]:void 0;if(s&&i!==void 0)return i;const n=this.getBaseTargetFromProps(this.props,e);return n!==void 0&&!he(n)?n:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new Ya),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class ec extends Dg{sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:s}){delete r[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:r,...s},{transformValues:i},n){let o=Zx(s,e||{},this);if(i&&(r&&(r=i(r)),s&&(s=i(s)),o&&(o=i(o))),n){Xx(this,s,o);const l=Ag(this,s,o,r);r=l.transitionEnd,s=l.target}return{transition:e,transitionEnd:r,...s}}}function Og(t){return window.getComputedStyle(t)}class Mg extends ec{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,r){if(pt.has(r)){const s=Wa(r);return s&&s.default||0}else{const s=Og(e),i=(Bo(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return Bl(e,r)}build(e,r,s,i){Oa(e,r,s,i.transformTemplate)}scrapeMotionValuesFromProps(e,r){return Ua(e,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;he(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(e,r,s,i){Go(e,r,s,i)}}class Fg extends ec{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(pt.has(r)){const s=Wa(r);return s&&s.default||0}return r=Ko.has(r)?r:Ea(r),e.getAttribute(r)}measureInstanceViewportBox(){return re()}scrapeMotionValuesFromProps(e,r){return Xo(e,r)}build(e,r,s,i){Fa(e,r,s,this.isSVGTag,i.transformTemplate)}renderInstance(e,r,s,i){Jo(e,r,s,i)}mount(e){this.isSVGTag=$a(e.tagName),super.mount(e)}}const $g=(t,e)=>Da(t)?new Fg(e,{enableHardwareAcceleration:!1}):new Mg(e,{enableHardwareAcceleration:!0}),Ug={layout:{ProjectionNode:Xl,MeasureLayout:ql}},Bg={...fm,...Rf,...yg,...Ug},L=Bh((t,e)=>vf(t,e,Bg,$g));function tc(){const t=m.useRef(!1);return Aa(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Vg(){const t=tc(),[e,r]=m.useState(0),s=m.useCallback(()=>{t.current&&r(e+1)},[e]);return[m.useCallback(()=>Z.postRender(s),[s]),e]}class qg extends m.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Hg({children:t,isPresent:e}){const r=m.useId(),s=m.useRef(null),i=m.useRef({width:0,height:0,top:0,left:0});return m.useInsertionEffect(()=>{const{width:n,height:o,top:l,left:c}=i.current;if(e||!s.current||!n||!o)return;s.current.dataset.motionPopId=r;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${n}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),m.createElement(qg,{isPresent:e,childRef:s,sizeRef:i},m.cloneElement(t,{ref:s}))}const $s=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:n,mode:o})=>{const l=Yo(zg),c=m.useId(),d=m.useMemo(()=>({id:c,initial:e,isPresent:r,custom:i,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;s&&s()},register:u=>(l.set(u,!1),()=>l.delete(u))}),n?void 0:[r]);return m.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[r]),m.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),o==="popLayout"&&(t=m.createElement(Hg,{isPresent:r},t)),m.createElement(ds.Provider,{value:d},t)};function zg(){return new Map}function Wg(t){return m.useEffect(()=>()=>t(),[])}const ot=t=>t.key||"";function Gg(t,e){t.forEach(r=>{const s=ot(r);e.set(s,r)})}function Kg(t){const e=[];return m.Children.forEach(t,r=>{m.isValidElement(r)&&e.push(r)}),e}const $t=({children:t,custom:e,initial:r=!0,onExitComplete:s,exitBeforeEnter:i,presenceAffectsLayout:n=!0,mode:o="sync"})=>{const l=m.useContext(Ia).forceRender||Vg()[0],c=tc(),d=Kg(t);let u=d;const h=m.useRef(new Map).current,f=m.useRef(u),x=m.useRef(new Map).current,g=m.useRef(!0);if(Aa(()=>{g.current=!1,Gg(d,x),f.current=u}),Wg(()=>{g.current=!0,x.clear(),h.clear()}),g.current)return m.createElement(m.Fragment,null,u.map(y=>m.createElement($s,{key:ot(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:n,mode:o},y)));u=[...u];const w=f.current.map(ot),k=d.map(ot),E=w.length;for(let y=0;y<E;y++){const p=w[y];k.indexOf(p)===-1&&!h.has(p)&&h.set(p,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((y,p)=>{if(k.indexOf(p)!==-1)return;const A=x.get(p);if(!A)return;const _=w.indexOf(p);let I=y;if(!I){const F=()=>{h.delete(p);const $=Array.from(x.keys()).filter(D=>!k.includes(D));if($.forEach(D=>x.delete(D)),f.current=d.filter(D=>{const z=ot(D);return z===p||$.includes(z)}),!h.size){if(c.current===!1)return;l(),s&&s()}};I=m.createElement($s,{key:ot(A),isPresent:!1,onExitComplete:F,custom:e,presenceAffectsLayout:n,mode:o},A),h.set(p,I)}u.splice(_,0,I)}),u=u.map(y=>{const p=y.key;return h.has(p)?y:m.createElement($s,{key:ot(y),isPresent:!0,presenceAffectsLayout:n,mode:o},y)}),m.createElement(m.Fragment,null,h.size?u:u.map(y=>m.cloneElement(y)))};var Jg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yg=(t,e)=>{const r=m.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,children:l,...c},d)=>m.createElement("svg",{ref:d,...Jg,width:i,height:i,stroke:s,strokeWidth:o?Number(n)*24/Number(i):n,className:`lucide lucide-${Xg(t)}`,...c},[...e.map(([u,h])=>m.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var M=Yg;const Zg=M("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ma=M("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),rc=M("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Mn=M("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),lr=M("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Za=M("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Lr=M("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Qg=M("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Qa=M("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ut=M("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),sc=M("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ep=M("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),tp=M("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),At=M("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ne=M("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),cr=M("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Fn=M("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),rp=M("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Gr=M("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),xt=M("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Je=M("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ce=M("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ac=M("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ei=M("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ic=M("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),pe=M("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),ga=M("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ti=M("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ht=M("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),sp=M("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),Kr=M("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),pa=M("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ap=M("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ps=M("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Us=M("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ip=M("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),np=M("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),op=M("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),lp=M("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),cp=M("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),dp=M("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]),ri=M("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),up=M("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),hp=M("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Oe=M("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ya=M("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]),fp=M("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Ut=M("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ft=M("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),xp=M("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),we=M("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),$n=M("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),mp=M("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),gp=M("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),pp=M("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Rr=M("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Bt=M("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Jr=M("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ys=M("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Xr=M("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),nc=M("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),si=M("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Re=M("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),yp=()=>{const t=Ot(),[e,r]=m.useState(!1),s=[{icon:lr,label:"Dashboard",path:"/"},{icon:Kr,label:"Links",path:"/links"},{icon:ac,label:"Reports",path:"/reports"},{icon:ei,label:"Filters",path:"/filters"},{icon:pe,label:"Domains",path:"/domains"},{icon:ya,label:"Integrations",path:"/integrations"},{icon:ht,label:"API",path:"/api"},{icon:ys,label:"Account",path:"/account"},{icon:ga,label:"Help",path:"/help"},{icon:ft,label:"Settings",path:"/settings"}];return a.jsxs(L.div,{className:`bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col transition-all duration-300 ${e?"w-16":"w-64"}`,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!e&&a.jsxs(L.div,{className:"flex items-center space-x-3",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Kr,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Nanhi.Link"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"v2.0"})]})]}),a.jsx("button",{onClick:()=>r(!e),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors duration-200",children:e?a.jsx(tp,{className:"w-4 h-4 text-gray-500"}):a.jsx(ep,{className:"w-4 h-4 text-gray-500"})})]})}),a.jsx("nav",{className:"flex-1 p-4",children:a.jsx("ul",{className:"space-y-2",children:s.map(i=>{const n=t.pathname===i.path;return a.jsx("li",{children:a.jsxs(Na,{to:i.path,className:`flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative ${n?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[a.jsx(i.icon,{className:`w-5 h-5 ${n?"text-white":"text-gray-500 group-hover:text-gray-700 dark:group-hover:text-gray-200"}`}),!e&&a.jsx("span",{className:"font-medium",children:i.label}),n&&a.jsx(L.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg -z-10",layoutId:"activeTab",transition:{type:"spring",bounce:.2,duration:.6}})]})},i.path)})})})]})},bp=()=>{const{currentTheme:t,isDark:e,themes:r,changeTheme:s,toggleDarkMode:i}=ls(),[n,o]=m.useState(!1),[l,c]=m.useState({top:0,right:0}),d=m.useRef(null),u={modern:mp,classic:rp,neon:Re,organic:sp,corporate:Qg},h={modern:"from-blue-500 to-indigo-500",classic:"from-amber-500 to-orange-500",neon:"from-purple-500 to-pink-500",organic:"from-green-500 to-emerald-500",corporate:"from-slate-500 to-gray-500"};m.useEffect(()=>{if(n&&d.current){const g=d.current.getBoundingClientRect();c({top:g.bottom+8,right:window.innerWidth-g.right})}},[n]);const f=()=>{o(!n)},x=()=>a.jsx($t,{children:n&&a.jsxs(a.Fragment,{children:[a.jsx(L.div,{className:"fixed inset-0",style:{zIndex:999998},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1)}),a.jsxs(L.div,{className:"fixed w-80 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl shadow-2xl overflow-hidden",style:{zIndex:999999,top:l.top,right:l.right},initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2,ease:"easeOut"},children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[a.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-100 mb-1",children:"Choose Theme"}),a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Select theme and mode"})]}),a.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-1.5 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-md",children:e?a.jsx(lp,{className:"w-3 h-3 text-white"}):a.jsx(gp,{className:"w-3 h-3 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:e?"Dark":"Light"}),a.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Toggle appearance"})]})]}),a.jsx(L.button,{onClick:i,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-300 ${e?"bg-gradient-to-r from-indigo-500 to-purple-500":"bg-gradient-to-r from-yellow-400 to-orange-400"}`,whileTap:{scale:.95},children:a.jsx(L.span,{className:"inline-block h-4 w-4 transform rounded-full bg-white shadow-lg",animate:{x:e?24:3},transition:{duration:.2,ease:"easeInOut"}})})]})}),a.jsx("div",{className:"p-4",children:a.jsx("div",{className:"space-y-2",children:Object.entries(r).map(([g,w])=>{const k=u[g],E=t===g;return a.jsxs(L.button,{onClick:()=>{s(g),o(!1)},className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${E?"border-violet-500 bg-violet-50 dark:bg-violet-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-800"}`,whileHover:{scale:1.01},whileTap:{scale:.99},children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 bg-gradient-to-r ${h[g]} rounded-lg`,children:a.jsx(k,{className:"w-3 h-3 text-white"})}),a.jsxs("div",{className:"text-left",children:[a.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:w.name}),a.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:w.fonts.primary})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"flex space-x-1",children:Object.values(w[e?"dark":"light"].brand).slice(0,2).map((y,p)=>a.jsx("div",{className:"w-3 h-3 rounded-full border border-white/50",style:{backgroundColor:y}},p))}),E&&a.jsx(L.div,{className:"p-0.5 bg-violet-500 rounded-full",initial:{scale:0},animate:{scale:1},transition:{duration:.2},children:a.jsx(sc,{className:"w-3 h-3 text-white"})})]})]},g)})})}),a.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:a.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400 text-center",children:"AAA accessibility compliant"})})]})]})});return a.jsxs("div",{className:"relative",children:[a.jsxs(L.button,{ref:d,onClick:f,className:"flex items-center space-x-2 px-3 py-2 bg-bg-secondary border border-border-primary rounded-lg hover:bg-bg-tertiary transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsx(ri,{className:"w-4 h-4 text-text-secondary"}),a.jsx("span",{className:"text-sm font-medium text-text-primary",children:r[t].name})]}),typeof document<"u"&&Bn.createPortal(a.jsx(x,{}),document.body)]})},vp=()=>{var l;const{user:t,logout:e}=ye(),{currentTheme:r,isDark:s}=ls(),[i,n]=m.useState(!1),o=async()=>{try{await e(),K.success("Logged out successfully")}catch{K.error("Error logging out")}};return a.jsx(L.header,{className:"bg-bg-primary/80 backdrop-blur-xl border-b border-border-primary shadow-sm relative z-40",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:a.jsxs("div",{className:"flex items-center justify-between px-8 py-4",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-text-tertiary"}),a.jsx("input",{type:"text",placeholder:"Search links, projects, analytics...",className:"w-full pl-12 pr-4 py-3 bg-bg-secondary/80 backdrop-blur-xl border border-border-primary rounded-2xl focus:ring-4 focus:ring-brand-primary/20 focus:border-brand-primary text-text-primary placeholder-text-tertiary transition-all duration-300"})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(bp,{}),a.jsxs(L.button,{className:"relative p-3 text-text-secondary hover:text-text-primary hover:bg-bg-secondary/80 rounded-xl transition-all duration-200",whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(Za,{className:"w-5 h-5"}),a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-status-error rounded-full"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-semibold text-text-primary",children:((l=t==null?void 0:t.email)==null?void 0:l.split("@")[0])||"User"}),a.jsxs("div",{className:"text-xs text-text-tertiary capitalize",children:[r," Theme"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(L.button,{onClick:()=>n(!i),className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ${s?"bg-gradient-to-r from-brand-primary to-brand-secondary":"bg-gray-800"}`,whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(ys,{className:"w-5 h-5 text-white"})}),a.jsx($t,{children:i&&a.jsxs(a.Fragment,{children:[a.jsx(L.div,{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),a.jsx(L.div,{className:"absolute right-0 top-full mt-2 w-48 bg-bg-primary border border-border-primary rounded-2xl shadow-2xl z-50",initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2,ease:"easeOut"},children:a.jsxs("div",{className:"p-2",children:[a.jsxs("button",{onClick:()=>{n(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 text-text-secondary hover:text-text-primary hover:bg-bg-secondary/80 rounded-xl transition-all duration-200",children:[a.jsx(ft,{className:`w-4 h-4 ${s?"text-text-secondary":"text-gray-700"}`}),a.jsx("span",{className:"text-sm font-medium",children:"Settings"})]}),a.jsxs("button",{onClick:()=>{n(!1),o()},className:"w-full flex items-center space-x-3 px-4 py-3 text-status-error hover:bg-status-error/10 rounded-xl transition-all duration-200",children:[a.jsx(ap,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})})]})})]})]})]})]})})},je=({children:t})=>{const{currentTheme:e}=ls();return a.jsxs("div",{className:"min-h-screen bg-bg-primary transition-all duration-500",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e==="modern"&&a.jsxs(a.Fragment,{children:[a.jsx(L.div,{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-brand-primary/20 to-brand-secondary/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),a.jsx(L.div,{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-brand-tertiary/20 to-brand-primary/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),e==="neon"&&a.jsxs(a.Fragment,{children:[a.jsx(L.div,{className:"absolute top-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-brand-primary/30 to-brand-secondary/30 rounded-full blur-3xl",animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),a.jsx(L.div,{className:"absolute bottom-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-brand-secondary/30 to-brand-tertiary/30 rounded-full blur-3xl",animate:{scale:[1.3,1,1.3],opacity:[.6,.3,.6]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:2}})]}),e==="organic"&&a.jsx(a.Fragment,{children:a.jsx(L.div,{className:"absolute top-0 right-0 w-full h-full bg-gradient-to-bl from-brand-primary/5 via-transparent to-brand-secondary/5",animate:{opacity:[.5,.8,.5]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}})}),e==="classic"&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-bg-secondary/50 via-transparent to-bg-accent/50"}),e==="corporate"&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-bg-secondary/30 to-bg-tertiary/30"})]}),a.jsxs("div",{className:"flex h-screen relative z-10",children:[a.jsx(yp,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(vp,{}),a.jsx(L.main,{className:"flex-1 overflow-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:a.jsx("div",{className:"p-8",children:t})}),a.jsx("footer",{className:"border-t border-border-primary bg-bg-primary/80 backdrop-blur-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-8 py-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-sm font-semibold text-text-primary mb-1",children:"Nanhi.Link v2.0 - Premium Link Management"}),a.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs text-text-tertiary",children:[a.jsx("span",{children:"Made with ❤️ 2025 by"}),a.jsx("a",{href:"https://anwe.sh",target:"_blank",rel:"noopener noreferrer",className:"text-brand-primary hover:underline font-medium",children:"anwe.sh"}),a.jsx("span",{children:"•"}),a.jsx("span",{children:'"Making long URLs cry since 2025" 😢'})]})]})})})]})]})]})},wp=()=>{const[t,e]=m.useState(""),[r,s]=m.useState(""),[i,n]=m.useState(!1),[o,l]=m.useState(!1),{signIn:c}=ye(),d=Qr(),u=async h=>{h.preventDefault(),l(!0);try{await c(t,r),K.success("Welcome back!"),d("/dashboard")}catch(f){K.error(f.message||"Failed to sign in")}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[a.jsx(L.div,{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),a.jsx(L.div,{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-cyan-400/20 to-blue-600/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),a.jsx(L.div,{className:"w-full max-w-md relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:a.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20 dark:border-slate-700/50 p-8",children:[a.jsxs(L.div,{className:"text-center mb-8",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"flex justify-center mb-4",children:[a.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 500 500",className:"drop-shadow-lg dark:hidden",children:[a.jsx("defs",{children:a.jsx("path",{id:"topCurve",d:"M 80 180 A 170 170 0 0 1 420 180",fill:"none"})}),a.jsx("path",{d:"M 100 250 A 150 150 0 0 1 400 250",fill:"none",stroke:"#3b82f6",strokeWidth:"12",strokeLinecap:"round"}),a.jsx("path",{d:"M 130 250 A 120 120 0 0 1 370 250",fill:"none",stroke:"#60a5fa",strokeWidth:"8",strokeLinecap:"round"}),a.jsx("circle",{cx:"100",cy:"250",r:"12",fill:"#1e293b"}),a.jsx("circle",{cx:"200",cy:"250",r:"8",fill:"#3b82f6"}),a.jsx("circle",{cx:"300",cy:"250",r:"8",fill:"#1e293b"}),a.jsx("circle",{cx:"400",cy:"250",r:"12",fill:"#3b82f6"}),a.jsx("text",{fontSize:"48",fontWeight:"bold",fill:"#1e293b",fontFamily:"Arial, sans-serif",children:a.jsx("textPath",{href:"#topCurve",startOffset:"50%",textAnchor:"middle",children:"NANHI"})}),a.jsx("text",{x:"250",y:"380",fontSize:"36",fontWeight:"bold",fill:"#1e293b",textAnchor:"middle",fontFamily:"Arial, sans-serif",children:"LINK"})]}),a.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 500 500",className:"drop-shadow-lg hidden dark:block",children:[a.jsx("defs",{children:a.jsx("path",{id:"topCurveDark",d:"M 80 180 A 170 170 0 0 1 420 180",fill:"none"})}),a.jsx("path",{d:"M 100 250 A 150 150 0 0 1 400 250",fill:"none",stroke:"#22d3ee",strokeWidth:"12",strokeLinecap:"round"}),a.jsx("path",{d:"M 130 250 A 120 120 0 0 1 370 250",fill:"none",stroke:"#67e8f9",strokeWidth:"8",strokeLinecap:"round"}),a.jsx("circle",{cx:"100",cy:"250",r:"12",fill:"#e2e8f0"}),a.jsx("circle",{cx:"200",cy:"250",r:"8",fill:"#22d3ee"}),a.jsx("circle",{cx:"300",cy:"250",r:"8",fill:"#e2e8f0"}),a.jsx("circle",{cx:"400",cy:"250",r:"12",fill:"#22d3ee"}),a.jsx("text",{fontSize:"48",fontWeight:"bold",fill:"#e2e8f0",fontFamily:"Arial, sans-serif",children:a.jsx("textPath",{href:"#topCurveDark",startOffset:"50%",textAnchor:"middle",children:"NANHI"})}),a.jsx("text",{x:"250",y:"380",fontSize:"36",fontWeight:"bold",fill:"#fbbf24",textAnchor:"middle",fontFamily:"Arial, sans-serif",children:"LINK"})]})]}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Nanhi.Link"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Smart Link Management Platform"})]}),a.jsxs(L.form,{onSubmit:u,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(ps,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"email",value:t,onChange:h=>e(h.target.value),className:"w-full pl-12 pr-4 py-4 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",placeholder:"Enter your email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(pa,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:i?"text":"password",value:r,onChange:h=>s(h.target.value),className:"w-full pl-12 pr-12 py-4 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>n(!i),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:i?a.jsx(Je,{className:"w-5 h-5"}):a.jsx(Ce,{className:"w-5 h-5"})})]})]}),a.jsx(L.button,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 group",whileHover:{scale:1.02},whileTap:{scale:.98},children:o?a.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Sign In"}),a.jsx(rc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),a.jsx(L.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Don't have an account?"," ",a.jsx(Na,{to:"/register",className:"text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:"Sign up"})]})})]})})]})},kp=()=>{const[t,e]=m.useState(""),[r,s]=m.useState(""),[i,n]=m.useState(""),[o,l]=m.useState(!1),[c,d]=m.useState(!1),[u,h]=m.useState(!1),{signUp:f}=ye(),x=Qr(),g=async w=>{if(w.preventDefault(),r!==i){K.error("Passwords do not match");return}if(r.length<6){K.error("Password must be at least 6 characters");return}h(!0);try{await f(t,r),K.success("Account created successfully!"),x("/dashboard")}catch(k){K.error(k.message||"Failed to create account")}finally{h(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-slate-950 dark:via-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[a.jsx(L.div,{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-indigo-600/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:20,repeat:1/0,ease:"linear"}}),a.jsx(L.div,{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-cyan-400/20 to-blue-600/20 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:25,repeat:1/0,ease:"linear"}})]}),a.jsx(L.div,{className:"w-full max-w-md relative z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:a.jsxs("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-2xl rounded-3xl shadow-2xl border border-white/20 dark:border-slate-700/50 p-8",children:[a.jsxs(L.div,{className:"text-center mb-8",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"flex justify-center mb-4",children:[a.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 500 500",className:"drop-shadow-lg dark:hidden",children:[a.jsx("defs",{children:a.jsx("path",{id:"topCurve",d:"M 80 180 A 170 170 0 0 1 420 180",fill:"none"})}),a.jsx("path",{d:"M 100 250 A 150 150 0 0 1 400 250",fill:"none",stroke:"#3b82f6",strokeWidth:"12",strokeLinecap:"round"}),a.jsx("path",{d:"M 130 250 A 120 120 0 0 1 370 250",fill:"none",stroke:"#60a5fa",strokeWidth:"8",strokeLinecap:"round"}),a.jsx("circle",{cx:"100",cy:"250",r:"12",fill:"#1e293b"}),a.jsx("circle",{cx:"200",cy:"250",r:"8",fill:"#3b82f6"}),a.jsx("circle",{cx:"300",cy:"250",r:"8",fill:"#1e293b"}),a.jsx("circle",{cx:"400",cy:"250",r:"12",fill:"#3b82f6"}),a.jsx("text",{fontSize:"48",fontWeight:"bold",fill:"#1e293b",fontFamily:"Arial, sans-serif",children:a.jsx("textPath",{href:"#topCurve",startOffset:"50%",textAnchor:"middle",children:"NANHI"})}),a.jsx("text",{x:"250",y:"380",fontSize:"36",fontWeight:"bold",fill:"#1e293b",textAnchor:"middle",fontFamily:"Arial, sans-serif",children:"LINK"})]}),a.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 500 500",className:"drop-shadow-lg hidden dark:block",children:[a.jsx("defs",{children:a.jsx("path",{id:"topCurveDark",d:"M 80 180 A 170 170 0 0 1 420 180",fill:"none"})}),a.jsx("path",{d:"M 100 250 A 150 150 0 0 1 400 250",fill:"none",stroke:"#22d3ee",strokeWidth:"12",strokeLinecap:"round"}),a.jsx("path",{d:"M 130 250 A 120 120 0 0 1 370 250",fill:"none",stroke:"#67e8f9",strokeWidth:"8",strokeLinecap:"round"}),a.jsx("circle",{cx:"100",cy:"250",r:"12",fill:"#e2e8f0"}),a.jsx("circle",{cx:"200",cy:"250",r:"8",fill:"#22d3ee"}),a.jsx("circle",{cx:"300",cy:"250",r:"8",fill:"#e2e8f0"}),a.jsx("circle",{cx:"400",cy:"250",r:"12",fill:"#22d3ee"}),a.jsx("text",{fontSize:"48",fontWeight:"bold",fill:"#e2e8f0",fontFamily:"Arial, sans-serif",children:a.jsx("textPath",{href:"#topCurveDark",startOffset:"50%",textAnchor:"middle",children:"NANHI"})}),a.jsx("text",{x:"250",y:"380",fontSize:"36",fontWeight:"bold",fill:"#fbbf24",textAnchor:"middle",fontFamily:"Arial, sans-serif",children:"LINK"})]})]}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2",children:"Join Nanhi.Link"}),a.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Create your account to get started"})]}),a.jsxs(L.form,{onSubmit:g,className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(ps,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"email",value:t,onChange:w=>e(w.target.value),className:"w-full pl-12 pr-4 py-4 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",placeholder:"Enter your email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(pa,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:o?"text":"password",value:r,onChange:w=>s(w.target.value),className:"w-full pl-12 pr-12 py-4 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",placeholder:"Create a password",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:o?a.jsx(Je,{className:"w-5 h-5"}):a.jsx(Ce,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(pa,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:c?"text":"password",value:i,onChange:w=>n(w.target.value),className:"w-full pl-12 pr-12 py-4 bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 text-slate-900 dark:text-slate-100 placeholder-slate-500 dark:placeholder-slate-400",placeholder:"Confirm your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:c?a.jsx(Je,{className:"w-5 h-5"}):a.jsx(Ce,{className:"w-5 h-5"})})]})]}),a.jsx(L.button,{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-2xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 group",whileHover:{scale:1.02},whileTap:{scale:.98},children:u?a.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Create Account"}),a.jsx(rc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),a.jsx(L.div,{className:"mt-8 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:a.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Already have an account?"," ",a.jsx(Na,{to:"/login",className:"text-blue-600 dark:text-blue-400 font-semibold hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:"Sign in"})]})})]})})]})},jp=()=>{const{user:t}=ye(),[e,r]=m.useState(null),[s,i]=m.useState(!0);if(m.useEffect(()=>{(async()=>{if(!t){i(!1);return}try{i(!0),console.log("Loading dashboard data for user:",t.id);const[h,f,x]=await Promise.allSettled([B.from("links").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),B.from("projects").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}),B.from("clicks").select("*").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(100)]),g=h.status==="fulfilled"&&!h.value.error?h.value.data||[]:[],w=f.status==="fulfilled"&&!f.value.error?f.value.data||[]:[],k=x.status==="fulfilled"&&!x.value.error?x.value.data||[]:[];console.log("Loaded data:",{links:g.length,projects:w.length,clicks:k.length});const E=g.reduce((D,z)=>D+(z.total_clicks||0),0),y=g.filter(D=>D.is_active!==!1).length,p=k.filter(D=>{const z=new Date(D.created_at),P=new Date;return P.setDate(P.getDate()-7),z>=P}).length,A=g.length>0?(E/g.length*100).toFixed(1):"0.0",_=g.sort((D,z)=>(z.total_clicks||0)-(D.total_clicks||0)).slice(0,5).map(D=>({...D,clickCount:D.total_clicks||0})),I=[];for(let D=6;D>=0;D--){const z=new Date;z.setDate(z.getDate()-D);const P=z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),S=k.filter(N=>new Date(N.created_at).toDateString()===z.toDateString()).length;I.push({date:P,clicks:S})}const F=w.map(D=>({...D,linkCount:g.filter(z=>z.project_id===D.id).length,clickCount:g.filter(z=>z.project_id===D.id).reduce((z,P)=>z+(P.total_clicks||0),0)})),$={totalClicks:E,totalLinks:g.length,activeLinks:y,recentClicks:p,clickRate:parseFloat(A)};r({metrics:$,topLinks:_,chartData:I,projects:F,links:g})}catch(h){console.error("Failed to load dashboard data:",h),K.error("Failed to load dashboard data"),r({metrics:{totalClicks:0,totalLinks:0,activeLinks:0,recentClicks:0,clickRate:0},topLinks:[],chartData:[],projects:[],links:[]})}finally{i(!1)}})()},[t]),s)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!e)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load dashboard data"})});const{metrics:n,topLinks:o,chartData:l,projects:c,links:d}=e;return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your link performance overview."})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/links",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Create Link"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Clicks"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:n.totalClicks.toLocaleString()})]}),a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(dp,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),a.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[a.jsx(Jr,{className:"w-4 h-4 text-green-500 mr-1"}),a.jsx("span",{className:"text-green-500 font-medium",children:n.recentClicks}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"this week"})]})]}),a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Total Links"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:n.totalLinks.toLocaleString()})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(pe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]}),a.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[a.jsx(Zg,{className:"w-4 h-4 text-blue-500 mr-1"}),a.jsx("span",{className:"text-blue-500 font-medium",children:n.activeLinks}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:"active"})]})]}),a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Click Rate"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:[n.clickRate,"%"]})]}),a.jsx("div",{className:"p-3 bg-cyan-100 dark:bg-cyan-900/20 rounded-lg",children:a.jsx(lr,{className:"w-6 h-6 text-cyan-600 dark:text-cyan-400"})})]}),a.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[a.jsx(Re,{className:"w-4 h-4 text-yellow-500 mr-1"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"avg per link"})]})]}),a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm font-medium",children:"Projects"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:c.length})]}),a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(Xr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]}),a.jsxs("div",{className:"flex items-center mt-4 text-sm",children:[a.jsx(Qa,{className:"w-4 h-4 text-purple-500 mr-1"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"organized"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Click Analytics"}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Last 7 days"})]}),l.length>0?a.jsx(uc,{width:"100%",height:300,children:a.jsxs(hc,{data:l,children:[a.jsx(fc,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(xc,{dataKey:"date",stroke:"#64748b",fontSize:12}),a.jsx(mc,{stroke:"#64748b",fontSize:12}),a.jsx(gc,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e2e8f0",borderRadius:"8px",color:"#0f172a"}}),a.jsx(pc,{type:"monotone",dataKey:"clicks",stroke:"#6366f1",strokeWidth:3,dot:{fill:"#6366f1",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#6366f1",strokeWidth:2}})]})}):a.jsx("div",{className:"flex items-center justify-center h-64 text-gray-600 dark:text-gray-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(lr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No click data available yet"}),a.jsx("p",{className:"text-sm mt-1",children:"Create some links to see analytics"})]})})]}),a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Top Performing Links"}),a.jsx(xt,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})]}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map((u,h)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded",children:["#",h+1]}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:u.title||"Untitled Link"})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:["/",u.short_code]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:u.clickCount}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"clicks"})]})]},u.id)):a.jsxs("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:[a.jsx(pe,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No links created yet"}),a.jsx("p",{className:"text-sm mt-1",children:"Create your first link to see performance"})]})})]})]}),a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Projects"}),a.jsx("button",{onClick:()=>window.location.href="/links",className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"View All"})]}),c.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(0,6).map(u=>a.jsxs(L.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/links",className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 cursor-pointer hover:shadow-md transition-all duration-200",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:u.name}),a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded",children:[u.linkCount||0," links"]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:u.description||"No description"}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:new Date(u.created_at).toLocaleDateString()}),a.jsxs("span",{children:[u.clickCount||0," clicks"]})]})]},u.id))}):a.jsxs("div",{className:"text-center py-8 text-gray-600 dark:text-gray-400",children:[a.jsx(Xr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"No projects created yet"}),a.jsx("p",{className:"text-sm mt-1",children:"Create a project to organize your links"})]})]}),!1]})},Np=({isOpen:t,onClose:e,onSave:r})=>{const[s,i]=m.useState({scriptInjectionEnabled:!1,trackingScripts:[],scriptDelay:2,scriptPosition:"head"}),[n,o]=m.useState({name:"",code:"",enabled:!0,position:"head",delay:0}),[l,c]=m.useState({}),[d,u]=m.useState(!1),h=[{name:"Google Analytics 4",code:`<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"><\/script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
<\/script>`,position:"head"},{name:"Facebook Pixel",code:`<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', 'YOUR_PIXEL_ID');
fbq('track', 'PageView');
<\/script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
/></noscript>`,position:"head"},{name:"Google Tag Manager",code:`<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-XXXXXXX');<\/script>
<!-- End Google Tag Manager -->`,position:"head"},{name:"TikTok Pixel",code:`<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('YOUR_PIXEL_ID');
  ttq.page();
}(window, document, 'ttq');
<\/script>`,position:"head"},{name:"Hotjar Tracking",code:`<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:YOUR_HOTJAR_ID,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
<\/script>`,position:"head"}],f=y=>{const p={...y,id:Date.now(),enabled:!0,delay:0};i(A=>({...A,trackingScripts:[...A.trackingScripts,p],scriptInjectionEnabled:!0})),K.success(`${y.name} added successfully!`)},x=()=>{if(!n.name.trim()||!n.code.trim()){K.error("Please provide both name and code");return}const y={...n,id:Date.now()};i(p=>({...p,trackingScripts:[...p.trackingScripts,y],scriptInjectionEnabled:!0})),o({name:"",code:"",enabled:!0,position:"head",delay:0}),K.success("Custom script added successfully!")},g=y=>{i(p=>({...p,trackingScripts:p.trackingScripts.filter(A=>A.id!==y)}))},w=y=>{i(p=>({...p,trackingScripts:p.trackingScripts.map(A=>A.id===y?{...A,enabled:!A.enabled}:A)}))},k=async y=>{try{await navigator.clipboard.writeText(y),u(!0),K.success("Code copied to clipboard!"),setTimeout(()=>u(!1),2e3)}catch{K.error("Failed to copy code")}},E=()=>{r(s),e()};return t?a.jsx($t,{children:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(L.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-white dark:bg-gray-900 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl text-white",children:a.jsx(Ne,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Tracking & Scripts"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add tracking pixels, analytics, and custom scripts"})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:a.jsx(si,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Global Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:s.scriptInjectionEnabled,onChange:y=>i(p=>({...p,scriptInjectionEnabled:y.target.checked})),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Script Injection"})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Position"}),a.jsxs("select",{value:s.scriptPosition,onChange:y=>i(p=>({...p,scriptPosition:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[a.jsx("option",{value:"head",children:"Head"}),a.jsx("option",{value:"body",children:"Body"}),a.jsx("option",{value:"footer",children:"Footer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Default Delay (seconds)"}),a.jsx("input",{type:"number",value:s.scriptDelay,onChange:y=>i(p=>({...p,scriptDelay:parseInt(y.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",min:"0",max:"30"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Popular Tracking Scripts"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((y,p)=>a.jsxs(L.div,{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",whileHover:{scale:1.02},children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),a.jsx("button",{onClick:()=>f(y),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:"Add"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Position: ",y.position]}),a.jsx("button",{onClick:()=>c(A=>({...A,[p]:!A[p]})),className:"text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400",children:l[p]?"Hide Code":"View Code"})]}),l[p]&&a.jsx(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3",children:a.jsxs("div",{className:"relative",children:[a.jsx("pre",{className:"bg-gray-100 dark:bg-gray-800 p-3 rounded text-xs overflow-x-auto max-h-32",children:a.jsx("code",{children:y.code})}),a.jsx("button",{onClick:()=>k(y.code),className:"absolute top-2 right-2 p-1 bg-white dark:bg-gray-700 rounded hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:d?a.jsx(sc,{className:"w-3 h-3 text-green-600"}):a.jsx(cr,{className:"w-3 h-3 text-gray-600"})})]})})]},p))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Add Custom Script"}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Script Name"}),a.jsx("input",{type:"text",value:n.name,onChange:y=>o(p=>({...p,name:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"My Custom Script"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Position"}),a.jsxs("select",{value:n.position,onChange:y=>o(p=>({...p,position:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"head",children:"Head"}),a.jsx("option",{value:"body",children:"Body"}),a.jsx("option",{value:"footer",children:"Footer"})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Script Code"}),a.jsx("textarea",{value:n.code,onChange:y=>o(p=>({...p,code:y.target.value})),rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm",placeholder:`<script>
// Your custom script here
console.log('Hello World!');
<\/script>`})]}),a.jsx("button",{onClick:x,className:"w-full py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Add Custom Script"})]})]}),s.trackingScripts.length>0&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["Active Scripts (",s.trackingScripts.filter(y=>y.enabled).length,")"]}),a.jsx("div",{className:"space-y-3",children:s.trackingScripts.map(y=>a.jsxs(L.div,{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>w(y.id),className:`p-1 rounded ${y.enabled?"text-green-600 hover:text-green-700":"text-gray-400 hover:text-gray-600"}`,children:y.enabled?a.jsx(Ce,{className:"w-4 h-4"}):a.jsx(Je,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Position: ",y.position," • Delay: ",y.delay,"s"]})]})]}),a.jsx("button",{onClick:()=>g(y.id),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(Bt,{className:"w-4 h-4"})})]},y.id))})]})]})}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[a.jsx("button",{onClick:e,className:"px-6 py-2 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:E,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Save Configuration"})]})]})})}):null},_t=({title:t,description:e,examples:r=[],position:s="top"})=>{const[i,n]=m.useState(!1);return a.jsxs("div",{className:"relative inline-block",children:[a.jsx("button",{type:"button",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),onClick:()=>n(!i),onFocus:()=>n(!0),onBlur:()=>n(!1),className:"p-1 text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":`More information about ${t}`,"aria-expanded":i,"aria-describedby":i?"tooltip-content":void 0,children:a.jsx(ti,{className:"w-4 h-4"})}),a.jsx($t,{children:i&&a.jsxs(L.div,{id:"tooltip-content",role:"tooltip",initial:{opacity:0,scale:.95,y:s==="top"?10:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:s==="top"?10:-10},className:`absolute z-50 w-72 sm:w-80 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 p-4 ${s==="top"?"bottom-full mb-2":"top-full mt-2"} left-1/2 transform -translate-x-1/2`,style:{maxWidth:"calc(100vw - 2rem)",left:"clamp(1rem, 50%, calc(100vw - 1rem - 100%))"},children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm break-words",children:t}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed break-words",children:e}),r.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Examples:"}),a.jsx("ul",{className:"space-y-1",children:r.map((o,l)=>a.jsxs("li",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-start",children:[a.jsx("span",{className:"text-blue-500 mr-2 flex-shrink-0",children:"•"}),a.jsx("span",{className:"break-words",children:o})]},l))})]})]}),a.jsx("div",{className:`absolute left-1/2 transform -translate-x-1/2 w-3 h-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rotate-45 ${s==="top"?"top-full -mt-2 border-t-0 border-l-0":"bottom-full -mb-2 border-b-0 border-r-0"}`})]})})]})},_p=({isOpen:t,onClose:e,onSubmit:r,linkType:s,projectData:i,initialData:n=null})=>{var v,j,T,R,V,O,W;const o=m.useRef(null),[l,c]=m.useState({title:(n==null?void 0:n.title)||"",customAlias:(n==null?void 0:n.short_code)||"",rotationUrls:(n==null?void 0:n.rotation_urls)||[{url:"",weight:100,name:"Original"}],geoTargeting:{enabled:!1,allowedCountries:[],blockedCountries:[],redirectRules:{},fallbackUrl:""},timeTargeting:{enabled:!1,startsAt:"",expiresAt:"",allowedDays:[],allowedHours:{start:"09:00",end:"17:00"},timezone:"America/New_York"},utmSource:"",utmMedium:"",utmCampaign:"",utmTerm:"",utmContent:"",cloakingEnabled:s==="cloaked",cloakPage:{title:"Loading...",description:"Please wait while we redirect you...",backgroundColor:"#ffffff",textColor:"#000000",showLoader:!0,customHtml:""},script_injection_enabled:!1,tracking_scripts:[],script_delay:2,script_position:"head",password:"",clickLimit:"",expiresAt:"",deviceTargeting:{enabled:!1,allowedDevices:["desktop","mobile","tablet"]},ipBlocking:{enabled:!1,blockedIps:[],allowedIps:[]}}),[d,u]=m.useState("basic"),[h,f]=m.useState(!1),[x,g]=m.useState(!1);m.useState(null),m.useEffect(()=>{const b=C=>{o.current&&!o.current.contains(C.target)&&e()};return t&&(document.addEventListener("mousedown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",b),document.body.style.overflow="unset"}},[t,e]);const w=["United States","Canada","United Kingdom","Germany","France","Italy","Spain","Australia","Japan","China","India","Brazil","Mexico","Russia","South Korea"],k=["America/New_York","America/Los_Angeles","America/Chicago","America/Denver","Europe/London","Europe/Paris","Europe/Berlin","Europe/Rome","Asia/Tokyo","Asia/Shanghai","Asia/Mumbai","Asia/Seoul","Australia/Sydney","Australia/Melbourne"],E=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],y={basic:{title:"Basic Link Settings",description:"Set up the fundamental properties of your link including the title, destination URL, and custom alias.",tips:["Choose a descriptive title to easily identify your link later","Custom alias creates a memorable short URL (e.g., yoursite.com/my-campaign)","Leave alias empty to auto-generate a random code"]},rotation:{title:"A/B Testing & Traffic Splitting",description:"Split your traffic between multiple destination URLs to test which performs better.",tips:["Add multiple URLs to test different landing pages","Set weight percentages to control traffic distribution","Total weight must equal 100% for proper splitting","Great for testing different offers or page designs"]},geo:{title:"Geographic Targeting",description:"Redirect visitors to different URLs based on their country or location.",tips:["Show different content to visitors from different countries","Useful for compliance with local laws and regulations","Set a fallback URL for blocked or unspecified countries","Perfect for international campaigns"]},time:{title:"Time-Based Targeting",description:"Control when your link is active and redirect users based on time and date.",tips:["Schedule campaigns to start and end automatically","Restrict access to specific days of the week","Set business hours for your links","Perfect for limited-time offers and events"]},utm:{title:"UTM Campaign Tracking",description:"Add tracking parameters to measure campaign performance in Google Analytics.",tips:["UTM Source: Where traffic comes from (google, facebook, email)","UTM Medium: How traffic arrives (cpc, social, email)","UTM Campaign: Your campaign name (spring_sale, product_launch)","Essential for measuring marketing ROI"]},cloaking:{title:"Link Cloaking & Landing Pages",description:"Hide your destination URL and show a custom landing page before redirecting.",tips:["Protects your destination URL from being seen","Creates a branded experience before redirect","Useful for affiliate marketing and brand protection","Can include custom HTML and styling"]},tracking:{title:"Tracking Scripts & Pixels",description:"Add analytics codes, Facebook pixels, and other tracking scripts to your links.",tips:["Track conversions with Facebook Pixel, Google Analytics","Add retargeting pixels for remarketing campaigns","Include custom JavaScript for advanced tracking","Scripts can be placed in head or body of the page"]},advanced:{title:"Advanced Security & Limits",description:"Set password protection, click limits, expiration dates, and device targeting.",tips:["Password protection restricts access to authorized users","Click limits prevent overuse of your links","Expiration dates automatically disable links","Device targeting shows different content on mobile vs desktop"]}},p=[{id:"basic",label:"Basic Settings",icon:ft,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20",description:"Link title, URL, and alias"},{id:"rotation",label:"A/B Testing",icon:Re,color:"text-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",description:"Split traffic between URLs",show:["rotator","short"].includes(s)},{id:"geo",label:"Geo Targeting",icon:Us,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20",description:"Location-based redirects",show:["geo","short"].includes(s)},{id:"time",label:"Time Targeting",icon:At,color:"text-orange-600",bgColor:"bg-orange-50 dark:bg-orange-900/20",description:"Schedule and expiration",show:["time","short"].includes(s)},{id:"utm",label:"UTM Tracking",icon:Rr,color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-900/20",description:"Campaign parameters",show:["utm","short"].includes(s)},{id:"cloaking",label:"Page Cloaking",icon:we,color:"text-purple-600",bgColor:"bg-purple-50 dark:bg-purple-900/20",description:"Custom landing page",show:["cloaked","short"].includes(s)},{id:"tracking",label:"Tracking Scripts",icon:Ne,color:"text-indigo-600",bgColor:"bg-indigo-50 dark:bg-indigo-900/20",description:"Analytics and pixels"},{id:"advanced",label:"Advanced Options",icon:ft,color:"text-gray-600",bgColor:"bg-gray-50 dark:bg-gray-900/20",description:"Security and limits"}].filter(b=>b.show!==!1);m.useEffect(()=>{s&&l.rotationUrls.length===1&&!l.rotationUrls[0].url&&c(b=>({...b,rotationUrls:[{url:"",weight:100,name:"Primary URL"}]}))},[s]);const A=()=>{c(b=>({...b,rotationUrls:[...b.rotationUrls,{url:"",weight:0,name:`Variant ${b.rotationUrls.length+1}`}]}))},_=b=>{l.rotationUrls.length>1&&c(C=>({...C,rotationUrls:C.rotationUrls.filter((q,X)=>X!==b)}))},I=(b,C,q)=>{c(X=>({...X,rotationUrls:X.rotationUrls.map((le,J)=>J===b?{...le,[C]:q}:le)}))},F=()=>{const b=l.rotationUrls.reduce((C,q)=>C+(parseFloat(q.weight)||0),0);if(b!==100&&b>0){const C=100/b;c(q=>({...q,rotationUrls:q.rotationUrls.map(X=>({...X,weight:Math.round((parseFloat(X.weight)||0)*C)}))}))}},$=b=>{c(C=>({...C,...b})),g(!1)},D=(b,C)=>{c(q=>({...q,geoTargeting:{...q.geoTargeting,[C]:q.geoTargeting[C].includes(b)?q.geoTargeting[C].filter(X=>X!==b):[...q.geoTargeting[C],b]}}))},z=b=>{c(C=>({...C,timeTargeting:{...C.timeTargeting,allowedDays:C.timeTargeting.allowedDays.includes(b)?C.timeTargeting.allowedDays.filter(q=>q!==b):[...C.timeTargeting.allowedDays,b]}}))},P=async b=>{b.preventDefault(),f(!0);try{if(s==="rotator"&&l.rotationUrls.length>1){const X=l.rotationUrls.reduce((le,J)=>le+(parseFloat(J.weight)||0),0);if(Math.abs(X-100)>1){K.error("Total weight must equal 100%"),f(!1);return}}if(l.rotationUrls.filter(X=>X.url.trim()).length===0){K.error("Please provide at least one destination URL"),f(!1);return}const q={...l,linkType:s,projectId:i==null?void 0:i.id};await r(q)}catch(C){console.error("Error creating link:",C),K.error("Failed to create link")}finally{f(!1)}};if(!t)return null;const N=(()=>{switch(s){case"short":return{title:"Short Link",icon:pe,color:"bg-blue-500"};case"cloaked":return{title:"Cloaked Link",icon:we,color:"bg-purple-500"};case"geo":return{title:"Geo-Targeted Link",icon:Us,color:"bg-green-500"};case"time":return{title:"Time-Based Link",icon:At,color:"bg-orange-500"};case"utm":return{title:"UTM Tracking Link",icon:Rr,color:"bg-red-500"};case"rotator":return{title:"A/B Testing Rotator",icon:Re,color:"bg-yellow-500"};default:return{title:"Advanced Link",icon:pe,color:"bg-gray-500"}}})();return a.jsxs(a.Fragment,{children:[a.jsx($t,{children:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(L.div,{ref:o,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-7xl h-[95vh] overflow-hidden shadow-2xl flex",children:[a.jsxs("div",{className:"w-80 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${N.color} flex items-center justify-center text-white shadow-lg`,children:a.jsx(N.icon,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white truncate",children:N.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:i==null?void 0:i.name})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:p.map(b=>a.jsx(L.button,{onClick:()=>u(b.id),className:`w-full text-left p-4 rounded-xl transition-all duration-200 ${d===b.id?`${b.bgColor} border-2 border-current ${b.color}`:"hover:bg-gray-100 dark:hover:bg-gray-800 border-2 border-transparent"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(b.icon,{className:`w-5 h-5 mt-0.5 flex-shrink-0 ${d===b.id?b.color:"text-gray-500 dark:text-gray-400"}`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:`font-semibold text-sm truncate ${d===b.id?"text-gray-900 dark:text-white":"text-gray-700 dark:text-gray-300"}`,children:b.label}),a.jsx("p",{className:`text-xs mt-1 break-words ${d===b.id?"text-gray-600 dark:text-gray-400":"text-gray-500 dark:text-gray-500"}`,children:b.description})]})]})},b.id))})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:(v=p.find(b=>b.id===d))==null?void 0:v.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:(j=p.find(b=>b.id===d))==null?void 0:j.description})]}),a.jsx(_t,{title:(T=y[d])==null?void 0:T.title,description:(R=y[d])==null?void 0:R.description,examples:(V=y[d])==null?void 0:V.tips})]}),a.jsx("button",{onClick:e,className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors flex-shrink-0",children:a.jsx(si,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:P,className:"flex-1 flex flex-col",children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[d==="basic"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ti,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-1",children:"Getting Started"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Fill in the basic information for your link. The title helps you identify it later, and the custom alias creates a memorable short URL."})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Link Title *"}),a.jsx("input",{type:"text",value:l.title,onChange:b=>c(C=>({...C,title:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"My Campaign Link",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Custom Alias"}),a.jsx("input",{type:"text",value:l.customAlias,onChange:b=>c(C=>({...C,customAlias:b.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"my-custom-link"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to auto-generate"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Primary Destination URL *"}),a.jsx("input",{type:"url",value:((O=l.rotationUrls[0])==null?void 0:O.url)||"",onChange:b=>I(0,"url",b.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com",required:!0})]})]}),d==="rotation"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Re,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-yellow-800 dark:text-yellow-200 mb-1",children:"A/B Testing Made Easy"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Split your traffic between multiple URLs to test which performs better. Set weight percentages to control how traffic is distributed."})]})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Traffic Distribution"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Split traffic between multiple URLs for A/B testing"})]}),a.jsxs("button",{type:"button",onClick:A,className:"flex items-center space-x-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Add URL"})]})]}),a.jsx("div",{className:"space-y-4",children:l.rotationUrls.map((b,C)=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 bg-gray-50 dark:bg-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-3",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Variant Name"}),a.jsx("input",{type:"text",value:b.name,onChange:q=>I(C,"name",q.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",placeholder:`Variant ${C+1}`})]}),a.jsxs("div",{className:"md:col-span-6",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Destination URL"}),a.jsx("input",{type:"url",value:b.url,onChange:q=>I(C,"url",q.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",placeholder:"https://example.com",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Weight %"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:b.weight,onChange:q=>I(C,"weight",parseFloat(q.target.value)||0),className:"w-full px-3 py-2 pr-8 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-600 text-gray-900 dark:text-white",min:"0",max:"100",step:"0.1"}),a.jsx(hp,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-3 h-3 text-gray-400"})]})]}),a.jsx("div",{className:"md:col-span-1",children:l.rotationUrls.length>1&&a.jsx("button",{type:"button",onClick:()=>_(C),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(Bt,{className:"w-4 h-4"})})})]})},C))}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl",children:[a.jsxs("span",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:["Total Weight: ",l.rotationUrls.reduce((b,C)=>b+(parseFloat(C.weight)||0),0).toFixed(1),"%"]}),a.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 bg-yellow-600 text-white text-sm rounded-lg hover:bg-yellow-700 transition-colors",children:"Auto-balance to 100%"})]})]}),d==="geo"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Us,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-200 mb-1",children:"Geographic Targeting"}),a.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Show different content to visitors from different countries. Perfect for compliance and localization."})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("input",{type:"checkbox",checked:l.geoTargeting.enabled,onChange:b=>c(C=>({...C,geoTargeting:{...C.geoTargeting,enabled:b.target.checked}})),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),a.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Geographic Targeting"})]}),l.geoTargeting.enabled&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Fallback URL (for blocked countries)"}),a.jsx("input",{type:"url",value:l.geoTargeting.fallbackUrl,onChange:b=>c(C=>({...C,geoTargeting:{...C.geoTargeting,fallbackUrl:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"https://fallback-page.com"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"text-md font-semibold text-green-700 dark:text-green-300 mb-3 flex items-center space-x-2",children:[a.jsx(ut,{className:"w-4 h-4"}),a.jsx("span",{children:"Allowed Countries"})]}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700",children:w.map(b=>a.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[a.jsx("input",{type:"checkbox",checked:l.geoTargeting.allowedCountries.includes(b),onChange:()=>D(b,"allowedCountries"),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:b})]},b))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-md font-semibold text-red-700 dark:text-red-300 mb-3 flex items-center space-x-2",children:[a.jsx(Mn,{className:"w-4 h-4"}),a.jsx("span",{children:"Blocked Countries"})]}),a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-200 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700",children:w.map(b=>a.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[a.jsx("input",{type:"checkbox",checked:l.geoTargeting.blockedCountries.includes(b),onChange:()=>D(b,"blockedCountries"),className:"w-4 h-4 text-red-600 border-gray-300 rounded focus:ring-red-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:b})]},b))})]})]})]})]}),d==="time"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(At,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-200 mb-1",children:"Time-Based Control"}),a.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-300",children:"Schedule when your links are active and automatically expire them. Perfect for limited-time offers."})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("input",{type:"checkbox",checked:l.timeTargeting.enabled,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,enabled:b.target.checked}})),className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),a.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Time-Based Targeting"})]}),l.timeTargeting.enabled&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Start Date & Time"}),a.jsx("input",{type:"datetime-local",value:l.timeTargeting.startsAt,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,startsAt:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"End Date & Time"}),a.jsx("input",{type:"datetime-local",value:l.timeTargeting.expiresAt,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,expiresAt:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Timezone"}),a.jsx("select",{value:l.timeTargeting.timezone,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,timezone:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:k.map(b=>a.jsx("option",{value:b,children:b},b))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Allowed Days of Week"}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:E.map(b=>a.jsx("button",{type:"button",onClick:()=>z(b),className:`p-3 text-sm font-medium rounded-lg transition-colors ${l.timeTargeting.allowedDays.includes(b)?"bg-orange-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:b.slice(0,3)},b))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Start Time (24h format)"}),a.jsx("input",{type:"time",value:l.timeTargeting.allowedHours.start,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,allowedHours:{...C.timeTargeting.allowedHours,start:b.target.value}}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"End Time (24h format)"}),a.jsx("input",{type:"time",value:l.timeTargeting.allowedHours.end,onChange:b=>c(C=>({...C,timeTargeting:{...C.timeTargeting,allowedHours:{...C.timeTargeting.allowedHours,end:b.target.value}}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]})]}),d==="utm"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Rr,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-200 mb-1",children:"Campaign Tracking"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Add UTM parameters to track your campaigns in Google Analytics and measure marketing ROI."})]})]})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"UTM Campaign Parameters"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"Add UTM parameters to track campaign performance in Google Analytics"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Source *"}),a.jsx("input",{type:"text",value:l.utmSource,onChange:b=>c(C=>({...C,utmSource:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"google, facebook, newsletter"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Identify the advertiser, site, publication, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Medium *"}),a.jsx("input",{type:"text",value:l.utmMedium,onChange:b=>c(C=>({...C,utmMedium:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"cpc, email, social"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Advertising or marketing medium"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Campaign *"}),a.jsx("input",{type:"text",value:l.utmCampaign,onChange:b=>c(C=>({...C,utmCampaign:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"spring_sale, product_launch"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Product, promo code, or slogan"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Term"}),a.jsx("input",{type:"text",value:l.utmTerm,onChange:b=>c(C=>({...C,utmTerm:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"keyword terms"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Identify paid search keywords"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"UTM Content"}),a.jsx("input",{type:"text",value:l.utmContent,onChange:b=>c(C=>({...C,utmContent:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"logolink, textlink, banner"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Differentiate ads or links that point to the same URL"})]})]}),(l.utmSource||l.utmMedium||l.utmCampaign)&&a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200 mb-2",children:"UTM Preview"}),a.jsxs("div",{className:"text-xs font-mono text-red-700 dark:text-red-300 break-all",children:[((W=l.rotationUrls[0])==null?void 0:W.url)||"https://example.com",l.utmSource&&`?utm_source=${encodeURIComponent(l.utmSource)}`,l.utmMedium&&`&utm_medium=${encodeURIComponent(l.utmMedium)}`,l.utmCampaign&&`&utm_campaign=${encodeURIComponent(l.utmCampaign)}`,l.utmTerm&&`&utm_term=${encodeURIComponent(l.utmTerm)}`,l.utmContent&&`&utm_content=${encodeURIComponent(l.utmContent)}`]})]})]}),d==="cloaking"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(we,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-1",children:"Link Cloaking"}),a.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Hide your destination URL and show a custom landing page. Perfect for affiliate marketing and brand protection."})]})]})}),a.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[a.jsx("input",{type:"checkbox",checked:l.cloakingEnabled,onChange:b=>c(C=>({...C,cloakingEnabled:b.target.checked})),className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsx("label",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Enable Link Cloaking"})]}),l.cloakingEnabled&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Page Title"}),a.jsx("input",{type:"text",value:l.cloakPage.title,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,title:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Loading..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Page Description"}),a.jsx("input",{type:"text",value:l.cloakPage.description,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,description:b.target.value}})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Please wait while we redirect you..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Background Color"}),a.jsx("input",{type:"color",value:l.cloakPage.backgroundColor,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,backgroundColor:b.target.value}})),className:"w-full h-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Text Color"}),a.jsx("input",{type:"color",value:l.cloakPage.textColor,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,textColor:b.target.value}})),className:"w-full h-12 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("input",{type:"checkbox",checked:l.cloakPage.showLoader,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,showLoader:b.target.checked}})),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Show loading spinner"})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Custom HTML (Optional)"}),a.jsx("textarea",{value:l.cloakPage.customHtml,onChange:b=>c(C=>({...C,cloakPage:{...C.cloakPage,customHtml:b.target.value}})),rows:6,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm",placeholder:"<div>Custom HTML content...</div>"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Add custom HTML to override the default cloaking page"})]})]})]}),d==="tracking"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(Ne,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-200 mb-1",children:"Tracking & Analytics"}),a.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300",children:"Add tracking pixels, analytics codes, and custom scripts to monitor your link performance and conversions."})]})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tracking & Scripts"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add tracking pixels, analytics, and custom scripts"})]}),a.jsxs("button",{type:"button",onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx(Ne,{className:"w-4 h-4"}),a.jsx("span",{children:"Configure Tracking"})]})]}),l.script_injection_enabled&&l.tracking_scripts.length>0?a.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center",children:a.jsx(Ne,{className:"w-4 h-4 text-white"})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-200",children:[l.tracking_scripts.filter(b=>b.enabled).length," tracking scripts configured"]}),a.jsxs("p",{className:"text-sm text-indigo-600 dark:text-indigo-300",children:["Scripts will be injected in the ",l.script_position," with ",l.script_delay,"s delay"]})]})]}),a.jsx("div",{className:"space-y-2",children:l.tracking_scripts.filter(b=>b.enabled).map((b,C)=>a.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{className:"font-medium text-indigo-800 dark:text-indigo-200",children:b.name}),a.jsxs("span",{className:"text-indigo-600 dark:text-indigo-400",children:["(",b.position,")"]})]},C))})]}):a.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[a.jsx(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tracking configured"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add tracking pixels, analytics codes, and custom scripts to monitor your link performance"}),a.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Add Tracking Scripts"})]})]}),d==="advanced"&&a.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ft,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"Advanced Security"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Set password protection, click limits, expiration dates, and device targeting for enhanced control."})]})]})}),a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Advanced Options"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Password Protection"}),a.jsx("input",{type:"password",value:l.password,onChange:b=>c(C=>({...C,password:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Optional password"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Require password to access link"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Click Limit"}),a.jsx("input",{type:"number",value:l.clickLimit,onChange:b=>c(C=>({...C,clickLimit:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Unlimited",min:"1"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Maximum number of clicks allowed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Expires At"}),a.jsx("input",{type:"datetime-local",value:l.expiresAt,onChange:b=>c(C=>({...C,expiresAt:b.target.value})),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-gray-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Link will expire at this date/time"})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("input",{type:"checkbox",checked:l.deviceTargeting.enabled,onChange:b=>c(C=>({...C,deviceTargeting:{...C.deviceTargeting,enabled:b.target.checked}})),className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),a.jsxs("label",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[a.jsx($n,{className:"w-4 h-4"}),a.jsx("span",{children:"Device Targeting"})]})]}),l.deviceTargeting.enabled&&a.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"desktop",label:"Desktop",icon:op},{id:"mobile",label:"Mobile",icon:$n},{id:"tablet",label:"Tablet",icon:pp}].map(b=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:l.deviceTargeting.allowedDevices.includes(b.id),onChange:C=>{const q=C.target.checked?[...l.deviceTargeting.allowedDevices,b.id]:l.deviceTargeting.allowedDevices.filter(X=>X!==b.id);c(X=>({...X,deviceTargeting:{...X.deviceTargeting,allowedDevices:q}}))},className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),a.jsx(b.icon,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:b.label})]},b.id))})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("input",{type:"checkbox",checked:l.ipBlocking.enabled,onChange:b=>c(C=>({...C,ipBlocking:{...C.ipBlocking,enabled:b.target.checked}})),className:"w-4 h-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),a.jsxs("label",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center space-x-2",children:[a.jsx(Mn,{className:"w-4 h-4"}),a.jsx("span",{children:"IP Address Filtering"})]})]}),l.ipBlocking.enabled&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Blocked IPs (one per line)"}),a.jsx("textarea",{value:l.ipBlocking.blockedIps.join(`
`),onChange:b=>c(C=>({...C,ipBlocking:{...C.ipBlocking,blockedIps:b.target.value.split(`
`).filter(q=>q.trim())}})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:`192.168.1.1
10.0.0.1`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Allowed IPs (one per line)"}),a.jsx("textarea",{value:l.ipBlocking.allowedIps.join(`
`),onChange:b=>c(C=>({...C,ipBlocking:{...C.ipBlocking,allowedIps:b.target.value.split(`
`).filter(q=>q.trim())}})),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:`192.168.1.100
10.0.0.100`})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-4 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 font-medium transition-colors",children:"Cancel"}),a.jsx(L.button,{type:"submit",disabled:h,className:"px-8 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200",whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},children:h?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),a.jsx("span",{children:"Creating..."})]}):`Create ${N.title}`})]})]})]})]})})}),a.jsx(Np,{isOpen:x,onClose:()=>g(!1),onSave:$})]})},Cp=({isOpen:t,onClose:e,onSubmit:r})=>{const s=m.useRef(null),[i,n]=m.useState({name:"",description:"",destination_url:"",color:"#8B5CF6"}),[o,l]=m.useState(!1);m.useEffect(()=>{const f=x=>{s.current&&!s.current.contains(x.target)&&e()};return t&&(document.addEventListener("mousedown",f),document.body.style.overflow="hidden"),()=>{document.removeEventListener("mousedown",f),document.body.style.overflow="unset"}},[t,e]);const c=["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#84CC16","#F97316","#06B6D4","#8B5A2B","#6B7280"],d=f=>{const{name:x,value:g}=f.target;n(w=>({...w,[x]:g}))},u=f=>{n(x=>({...x,color:f}))},h=async f=>{if(f.preventDefault(),!i.name.trim()){K.error("Project name is required");return}try{l(!0),await r(i),n({name:"",description:"",destination_url:"",color:"#8B5CF6"})}catch{}finally{l(!1)}};return t?a.jsx($t,{children:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(L.div,{ref:s,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl rounded-3xl w-full max-w-2xl max-h-[95vh] overflow-hidden shadow-2xl border border-white/20 dark:border-gray-700/50",children:[a.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-gray-200/50 dark:border-gray-700/50 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 flex-shrink-0",children:[a.jsxs("h2",{className:"text-2xl font-display text-gray-900 dark:text-white flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-xl text-white",children:a.jsx(ic,{className:"w-6 h-6"})}),a.jsx("span",{children:"Create New Project"}),a.jsx(_t,{title:"Project Organization",description:"Projects help you organize your links by campaign, client, or purpose. Each project can have its own settings and branding.",examples:["Social Media Campaign","Client: ABC Company","Product Launch 2024"]})]}),a.jsx("button",{onClick:e,className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl transition-all duration-200",children:a.jsx(si,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto max-h-[calc(95vh-140px)]",children:a.jsxs("form",{onSubmit:h,className:"p-8 space-y-6",children:[a.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(ti,{className:"w-5 h-5 text-purple-600 dark:text-purple-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-purple-800 dark:text-purple-200 mb-1",children:"Project Organization"}),a.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Projects help you organize your links by campaign, client, or purpose. Each project can have its own default settings and color coding."})]})]})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[a.jsx("span",{children:"Project Name *"}),a.jsx(_t,{title:"Project Name",description:"Choose a descriptive name that helps you identify this project's purpose or campaign.",examples:["Summer Sale 2024","Client: Tech Startup","Social Media Links"]})]}),a.jsx("input",{type:"text",name:"name",value:i.name,onChange:d,placeholder:"Enter project name",required:!0,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[a.jsx("span",{children:"Description"}),a.jsx(_t,{title:"Project Description",description:"Optional description to provide more context about this project's goals or target audience.",examples:["Q4 marketing campaign for new product line","Client work for ABC Company's rebranding","Personal blog and social media links"]})]}),a.jsx("textarea",{name:"description",value:i.description,onChange:d,placeholder:"Enter project description",rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center space-x-2",children:[a.jsx("span",{children:"Default Destination URL"}),a.jsx(_t,{title:"Default Destination URL",description:"Optional default URL that will be pre-filled when creating new links in this project.",examples:["https://mystore.com","https://client-website.com","https://myblog.com"]})]}),a.jsx("input",{type:"url",name:"destination_url",value:i.destination_url,onChange:d,placeholder:"https://example.com",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ri,{className:"w-4 h-4"}),a.jsx("span",{children:"Project Color"}),a.jsx(_t,{title:"Project Color",description:"Choose a color to help visually identify this project in your dashboard and link listings.",examples:["Blue for corporate clients","Green for eco-friendly campaigns","Red for urgent promotions"]})]})}),a.jsx("div",{className:"grid grid-cols-6 gap-3",children:c.map(f=>a.jsx("button",{type:"button",onClick:()=>u(f),className:`w-12 h-12 rounded-xl transition-all duration-200 ${i.color===f?"ring-2 ring-offset-2 ring-gray-400 dark:ring-gray-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:f}},f))})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:e,className:"px-6 py-3 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 font-medium transition-colors",children:"Cancel"}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:o,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-8 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl disabled:shadow-none transition-all duration-200 flex items-center space-x-2",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:o?"Creating...":"Create Project"})]})]})]})})]})})}):null},Sp=()=>{const{user:t}=ye(),[e,r]=m.useState([]),[s,i]=m.useState([]),[n,o]=m.useState("all"),[l,c]=m.useState(""),[d,u]=m.useState(!0),[h,f]=m.useState(!1),[x,g]=m.useState(!1),[w,k]=m.useState({id:"short",title:"Short Link"});m.useEffect(()=>{(async()=>{if(!t){u(!1);return}try{const{data:I,error:F}=await B.from("projects").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(F)throw F;i(I||[]);const{data:$,error:D}=await B.from("links").select(`
            *,
            projects (
              id,
              name,
              color
            )
          `).eq("user_id",t.id).order("created_at",{ascending:!1});if(D)throw D;r($||[])}catch(I){console.error("Error loading data:",I),K.error("Failed to load data")}finally{u(!1)}})()},[t]);const E=async _=>{var I,F,$;try{const D=n==="all"?(I=s[0])==null?void 0:I.id:n;if(!D){K.error("Please create a project first");return}const z={title:_.title,destination_url:(($=(F=_.rotationUrls)==null?void 0:F[0])==null?void 0:$.url)||"",short_code:_.customAlias||Math.random().toString(36).substring(2,8),project_id:D,user_id:t.id,link_type:w.id,is_active:!0,total_clicks:0,rotation_urls:_.rotationUrls||[],geo_targeting:_.geoTargeting||{},time_targeting:_.timeTargeting||{},utm_source:_.utmSource||null,utm_medium:_.utmMedium||null,utm_campaign:_.utmCampaign||null,utm_term:_.utmTerm||null,utm_content:_.utmContent||null,cloaking_enabled:_.cloakingEnabled||!1,cloaking_page:_.cloakPage||null,script_injection_enabled:_.script_injection_enabled||!1,tracking_scripts:_.tracking_scripts||[],script_delay:_.script_delay||2,script_position:_.script_position||"head",password:_.password||null,click_limit:_.clickLimit?parseInt(_.clickLimit):null,expires_at:_.expiresAt||null},{data:P,error:S}=await B.from("links").insert(z).select(`
          *,
          projects (
            id,
            name,
            color
          )
        `).single();if(S)throw S;r(N=>[P,...N]),K.success(`${w.title} created successfully!`),f(!1)}catch(D){throw console.error("Error creating advanced link:",D),K.error("Failed to create link"),D}},y=async _=>{try{const{data:I,error:F}=await B.from("projects").insert({..._,user_id:t.id}).select().single();if(F)throw F;i($=>[I,...$]),K.success("Project created successfully!"),g(!1)}catch(I){console.error("Error creating project:",I),K.error("Failed to create project")}},p=async _=>{try{await navigator.clipboard.writeText(_),K.success("Link copied to clipboard!")}catch{K.error("Failed to copy link")}},A=e.filter(_=>{var $,D,z;const I=n==="all"||_.project_id===n,F=(($=_.title)==null?void 0:$.toLowerCase().includes(l.toLowerCase()))||((D=_.destination_url)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||((z=_.short_code)==null?void 0:z.toLowerCase().includes(l.toLowerCase()));return I&&F});return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Links & Projects"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your shortened links and organize them into projects"})]}),a.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[a.jsxs(L.button,{onClick:()=>g(!0),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-xl font-semibold transition-colors",whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsx(ic,{className:"w-4 h-4"}),a.jsx("span",{children:"New Project"})]}),a.jsxs(L.button,{onClick:()=>{k({id:"short",title:"Short Link"}),f(!0)},className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsx(Oe,{className:"w-5 h-5"}),a.jsx("span",{children:"Create Link"})]})]})]}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 p-6 mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search links...",value:l,onChange:_=>c(_.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("select",{value:n,onChange:_=>o(_.target.value),className:"px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"all",children:"All Projects"}),s.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[{title:"Total Links",value:e.length,icon:Kr,color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/20"},{title:"Total Clicks",value:e.reduce((_,I)=>_+(I.total_clicks||0),0),icon:Jr,color:"text-green-600",bg:"bg-green-50 dark:bg-green-900/20"},{title:"Active Links",value:e.filter(_=>_.is_active).length,icon:Re,color:"text-yellow-600",bg:"bg-yellow-50 dark:bg-yellow-900/20"},{title:"Projects",value:s.length,icon:Rr,color:"text-purple-600",bg:"bg-purple-50 dark:bg-purple-900/20"}].map((_,I)=>a.jsx(L.div,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 p-6",whileHover:{y:-2},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*I},children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_.title}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:_.value.toLocaleString()})]}),a.jsx("div",{className:`p-3 rounded-xl ${_.bg}`,children:a.jsx(_.icon,{className:`w-6 h-6 ${_.color}`})})]})},_.title))}),a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 dark:border-slate-700/30 overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Recent Links (",A.length,")"]})}),A.length>0?a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map((_,I)=>a.jsx(L.div,{className:"p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*I},children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:_.title||"Untitled Link"}),_.projects&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${_.projects.color}20`,color:_.projects.color},children:_.projects.name}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:_.is_active?"Active":"Inactive"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[a.jsx("span",{className:"font-medium",children:"Short:"})," nanhi.link/",_.short_code]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[a.jsx("span",{className:"font-medium",children:"Destination:"})," ",_.destination_url]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-3 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ce,{className:"w-4 h-4"}),a.jsxs("span",{children:[_.total_clicks||0," clicks"]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Qa,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(_.created_at).toLocaleDateString()})]}),_.link_type&&_.link_type!=="short"&&a.jsxs("div",{className:"flex items-center space-x-1",children:[_.link_type==="cloaked"&&a.jsx(we,{className:"w-4 h-4"}),_.link_type==="time"&&a.jsx(At,{className:"w-4 h-4"}),_.link_type==="geo"&&a.jsx(pe,{className:"w-4 h-4"}),a.jsx("span",{className:"capitalize",children:_.link_type})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx(L.button,{onClick:()=>p(`https://nanhi.link/${_.short_code}`),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(cr,{className:"w-4 h-4"})}),a.jsx(L.button,{onClick:()=>window.open(`https://nanhi.link/${_.short_code}`,"_blank"),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(xt,{className:"w-4 h-4"})}),a.jsx(L.button,{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(cp,{className:"w-4 h-4"})})]})]})},_.id))}):a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Kr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No links found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l?"Try adjusting your search terms":"Create your first link to get started"}),a.jsx(L.button,{onClick:()=>{k({id:"short",title:"Short Link"}),f(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Create Your First Link"})]})]})]}),a.jsx(_p,{isOpen:h,onClose:()=>{f(!1),k(null)},onSubmit:E,linkType:w==null?void 0:w.id,projectData:s.find(_=>_.id===n)||s[0]}),a.jsx(Cp,{isOpen:x,onClose:()=>g(!1),onSubmit:y})]})},Tp={async getUserLinks(t){try{const{data:e,error:r}=await B.from("links").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching user links:",r),[]):e||[]}catch(e){return console.error("Error in getUserLinks:",e),[]}},async getUserProjects(t){try{const{data:e,error:r}=await B.from("projects").select("*").eq("user_id",t).order("created_at",{ascending:!1});return r?(console.error("Error fetching user projects:",r),[]):e||[]}catch(e){return console.error("Error in getUserProjects:",e),[]}},async createLink(t){try{const{data:e,error:r}=await B.from("links").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error creating link:",e),e}},async updateLink(t,e){try{const{data:r,error:s}=await B.from("links").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return r}catch(r){throw console.error("Error updating link:",r),r}},async deleteLink(t){try{const{error:e}=await B.from("links").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting link:",e),e}},async createProject(t){try{const{data:e,error:r}=await B.from("projects").insert(t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error creating project:",e),e}},async updateProject(t,e){try{const{data:r,error:s}=await B.from("projects").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(s)throw s;return r}catch(r){throw console.error("Error updating project:",r),r}},async deleteProject(t){try{const{error:e}=await B.from("projects").delete().eq("id",t);if(e)throw e}catch(e){throw console.error("Error deleting project:",e),e}},async getAnalytics(t){try{const{data:e,error:r}=await B.from("links").select("total_clicks, is_active").eq("user_id",t);if(r)throw r;const s=e.reduce((n,o)=>n+(o.total_clicks||0),0),i=e.filter(n=>n.is_active!==!1).length;return{totalClicks:s,activeLinks:i,averageCTR:"2.4%",averageSession:"1.2m"}}catch(e){return console.error("Error getting analytics:",e),{totalClicks:0,activeLinks:0,averageCTR:"0%",averageSession:"0m"}}}},Pp=()=>{const{user:t}=ye(),[e,r]=m.useState("profile"),s=[{id:"profile",name:"Profile",icon:ys},{id:"security",name:"Security",icon:we},{id:"billing",name:"Billing",icon:Fn},{id:"notifications",name:"Notifications",icon:Za}];return a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Account Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your account preferences and settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx("nav",{className:"space-y-1",children:s.map(i=>a.jsxs("button",{onClick:()=>r(i.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${e===i.id?"bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,children:[a.jsx(i.icon,{className:"w-5 h-5 mr-3"}),i.name]},i.id))})}),a.jsxs("div",{className:"lg:col-span-3",children:[e==="profile"&&a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Profile Information"}),a.jsxs("form",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),a.jsx("input",{type:"text",defaultValue:"John",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),a.jsx("input",{type:"text",defaultValue:"Doe",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",defaultValue:(t==null?void 0:t.email)||"user@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company"}),a.jsx("input",{type:"text",placeholder:"Your company name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),a.jsx("textarea",{rows:"4",placeholder:"Tell us about yourself",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})})]})]}),e==="security"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Change Password"}),a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),a.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),a.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:"password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",className:"btn-primary",children:"Update Password"})})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Two-Factor Authentication"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Two-factor authentication is disabled"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Add an extra layer of security to your account"})]}),a.jsx("button",{className:"btn-primary",children:"Enable 2FA"})]})]})]}),e==="billing"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Current Plan"}),a.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-300",children:"Pro Plan"}),a.jsx("p",{className:"text-purple-700 dark:text-purple-400",children:"$29/month • Billed monthly"})]}),a.jsx("button",{className:"btn-secondary",children:"Change Plan"})]})})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Payment Method"}),a.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Fn,{className:"w-8 h-8 text-gray-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"•••• •••• •••• 4242"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Expires 12/25"})]})]}),a.jsx("button",{className:"btn-secondary",children:"Update"})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Billing History"}),a.jsx("div",{className:"space-y-3",children:[{date:"2024-01-01",amount:"$29.00",status:"Paid"},{date:"2023-12-01",amount:"$29.00",status:"Paid"},{date:"2023-11-01",amount:"$29.00",status:"Paid"}].map((i,n)=>a.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(i.date).toLocaleDateString()}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pro Plan"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:i.amount}),a.jsx("p",{className:"text-sm text-green-600",children:i.status})]})]},n))})]})]}),e==="notifications"&&a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Notification Preferences"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Email Notifications"}),a.jsx("div",{className:"space-y-3",children:[{id:"weekly-reports",label:"Weekly performance reports",checked:!0},{id:"link-alerts",label:"Link performance alerts",checked:!0},{id:"security-alerts",label:"Security alerts",checked:!0},{id:"product-updates",label:"Product updates and news",checked:!1}].map(i=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:i.id,className:"text-gray-700 dark:text-gray-300",children:i.label}),a.jsx("input",{id:i.id,type:"checkbox",defaultChecked:i.checked,className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},i.id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Push Notifications"}),a.jsx("div",{className:"space-y-3",children:[{id:"browser-notifications",label:"Browser notifications",checked:!1},{id:"mobile-notifications",label:"Mobile app notifications",checked:!0}].map(i=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{htmlFor:i.id,className:"text-gray-700 dark:text-gray-300",children:i.label}),a.jsx("input",{id:i.id,type:"checkbox",defaultChecked:i.checked,className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 dark:focus:ring-purple-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})]},i.id))})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx("button",{className:"btn-primary",children:"Save Preferences"})})]})]})]})]})]})},Ap=()=>{const[t,e]=m.useState(""),[r,s]=m.useState("faq"),i=[{id:1,question:"How do I create a short link?",answer:'To create a short link, go to the Links page and click "Create Link". Enter your original URL, optionally customize the short URL, and click "Create Link".'},{id:2,question:"Can I customize my short URLs?",answer:"Yes! When creating a link, you can specify a custom alias instead of using our randomly generated one. Custom aliases must be unique and follow our naming guidelines."},{id:3,question:"How do I track link performance?",answer:"Visit the Analytics page to see detailed statistics about your links, including clicks, geographic data, device information, and more."},{id:4,question:"What is link filtering?",answer:"Link filtering allows you to control who can access your links based on criteria like geographic location, device type, or time of day."},{id:5,question:"How do I add a custom domain?",answer:`Go to the Domains page, click "Add Domain", enter your domain name, and follow the DNS setup instructions. We'll verify your domain automatically.`},{id:6,question:"Can I integrate with other tools?",answer:"Yes! We offer integrations with popular tools like Google Analytics, Slack, Zapier, and more. Check the Integrations page for available options."}],n={gettingStarted:{title:"Getting Started with Nanhi.Links API",content:[{title:"Authentication",description:"All API requests require authentication using an API key.",code:`// Include API key in headers
X-API-Key: your_api_key_here

// Or as query parameter
?api_key=your_api_key_here`},{title:"Base URL",description:"All API endpoints are relative to the base URL:",code:"https://api.nanhi.link/api"},{title:"Rate Limits",description:"API requests are limited to 100 requests per 15 minutes per IP address.",code:`// Rate limit headers in response
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640995200`}]},endpoints:{title:"API Endpoints",content:[{title:"Create Short Link",description:"Create a new short link",method:"POST",endpoint:"/links",code:`curl -X POST https://api.nanhi.link/api/links \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "url": "https://example.com/very-long-url",
    "title": "My Example Link",
    "custom_code": "my-link"
  }'`},{title:"Get Links",description:"Retrieve your links with pagination",method:"GET",endpoint:"/links",code:`curl -X GET "https://api.nanhi.link/api/links?page=1&limit=20" \\
  -H "X-API-Key: your_api_key_here"`},{title:"Get Link Analytics",description:"Retrieve detailed analytics for a specific link",method:"GET",endpoint:"/links/:id/analytics",code:`curl -X GET "https://api.nanhi.link/api/links/uuid-here/analytics?period=30d" \\
  -H "X-API-Key: your_api_key_here"`},{title:"Update Link",description:"Update an existing link",method:"PUT",endpoint:"/links/:id",code:`curl -X PUT https://api.nanhi.link/api/links/uuid-here \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "title": "Updated Title",
    "is_active": false
  }'`},{title:"Delete Link",description:"Delete a link permanently",method:"DELETE",endpoint:"/links/:id",code:`curl -X DELETE https://api.nanhi.link/api/links/uuid-here \\
  -H "X-API-Key: your_api_key_here"`},{title:"Bulk Create Links",description:"Create multiple links in a single request (max 100)",method:"POST",endpoint:"/links/bulk",code:`curl -X POST https://api.nanhi.link/api/links/bulk \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "links": [
      {
        "url": "https://example1.com",
        "title": "Link 1"
      },
      {
        "url": "https://example2.com", 
        "title": "Link 2"
      }
    ]
  }'`}]},sdks:{title:"SDKs & Libraries",content:[{title:"JavaScript/Node.js",description:"Use our JavaScript SDK for easy integration",code:`const NanhiLinks = require('nanhi-links-sdk');

const client = new NanhiLinks({
  apiKey: 'your_api_key_here',
  baseUrl: 'https://api.nanhi.link/api'
});

// Create a short link
const link = await client.links.create({
  url: 'https://example.com/very-long-url',
  title: 'My Example Link'
});

console.log(link.short_url); // https://nanhi.link/abc123`},{title:"Python",description:"Python SDK for server-side applications",code:`from nanhi_links import NanhiLinksClient

client = NanhiLinksClient(api_key='your_api_key_here')

# Create a short link
link = client.links.create(
    url='https://example.com/very-long-url',
    title='My Example Link'
)

print(link.short_url)  # https://nanhi.link/abc123`},{title:"PHP",description:"PHP SDK for web applications",code:`<?php
require_once 'vendor/autoload.php';

use NanhiLinks\\Client;

$client = new Client('your_api_key_here');

// Create a short link
$link = $client->links->create([
    'url' => 'https://example.com/very-long-url',
    'title' => 'My Example Link'
]);

echo $link->short_url; // https://nanhi.link/abc123
?>`}]},webhooks:{title:"Webhooks",content:[{title:"Webhook Events",description:"Configure webhooks to receive real-time notifications",code:`// Supported events:
- link.created: New link created
- link.clicked: Link was clicked  
- link.updated: Link was updated
- link.deleted: Link was deleted`},{title:"Webhook Payload",description:"Example webhook payload for link.clicked event",code:`{
  "event": "link.clicked",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "data": {
    "link": {
      "id": "uuid-here",
      "short_code": "abc123",
      "url": "https://example.com"
    },
    "click": {
      "country": "United States",
      "device": "Desktop", 
      "referrer": "Google"
    }
  }
}`}]},errors:{title:"Error Handling",content:[{title:"Error Response Format",description:"All errors follow a consistent format",code:`{
  "error": "Human-readable error message",
  "code": "MACHINE_READABLE_ERROR_CODE"
}`},{title:"Common Error Codes",description:"Standard error codes you may encounter",code:`MISSING_API_KEY: API key not provided
INVALID_API_KEY: API key is invalid or expired
RATE_LIMIT_EXCEEDED: Too many requests
MISSING_URL: Required URL parameter not provided
INVALID_URL: URL format is invalid
CODE_EXISTS: Custom short code already exists
LINK_NOT_FOUND: Requested link not found
INTERNAL_ERROR: Internal server error`},{title:"HTTP Status Codes",description:"Standard HTTP status codes used by the API",code:`200 OK: Request successful
201 Created: Resource created successfully
400 Bad Request: Invalid request parameters
401 Unauthorized: Authentication required or failed
404 Not Found: Resource not found
409 Conflict: Resource conflict (e.g., duplicate short code)
429 Too Many Requests: Rate limit exceeded
500 Internal Server Error: Server error`}]}},o=[{title:"Getting Started Guide",description:"Learn the basics of using Nanhi.Links",icon:Lr,link:"#"},{title:"API Documentation",description:"Complete API reference and examples",icon:Ne,link:"/api/docs"},{title:"Video Tutorials",description:"Watch step-by-step video guides",icon:xt,link:"#"},{title:"Best Practices",description:"Tips for optimizing your link strategy",icon:Lr,link:"#"}],l=i.filter(u=>u.question.toLowerCase().includes(t.toLowerCase())||u.answer.toLowerCase().includes(t.toLowerCase())),c=u=>{navigator.clipboard.writeText(u)},d=()=>{const u=n[r];return u?a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:u.title}),u.content.map((h,f)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white flex items-center space-x-2",children:[h.method&&a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded ${h.method==="GET"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":h.method==="POST"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":h.method==="PUT"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":h.method==="DELETE"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:h.method}),a.jsx("span",{children:h.title}),h.endpoint&&a.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:h.endpoint})]})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),a.jsxs("div",{className:"relative",children:[a.jsx("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto text-sm",children:a.jsx("code",{children:h.code})}),a.jsx("button",{onClick:()=>c(h.code),className:"absolute top-2 right-2 p-2 bg-gray-800 hover:bg-gray-700 rounded text-gray-400 hover:text-white transition-colors",title:"Copy to clipboard",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]},f))]}):null};return a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Help Center"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Find answers to common questions and get support"})]}),a.jsx("div",{className:"card p-6 mb-8",children:a.jsxs("div",{className:"relative max-w-md mx-auto",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),placeholder:"Search for help...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),a.jsx("div",{className:"mb-8",children:a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"faq",label:"FAQ",icon:ga},{id:"gettingStarted",label:"API Getting Started",icon:ht},{id:"endpoints",label:"API Endpoints",icon:Ne},{id:"sdks",label:"SDKs & Libraries",icon:Lr},{id:"webhooks",label:"Webhooks",icon:Re},{id:"errors",label:"Error Handling",icon:we}].map(u=>a.jsxs("button",{onClick:()=>s(u.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${r===u.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:[a.jsx(u.icon,{className:"w-4 h-4"}),a.jsx("span",{children:u.label})]},u.id))})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"card p-6",children:r==="faq"?a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Frequently Asked Questions"}),a.jsx("div",{className:"space-y-4",children:l.map(u=>a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"flex items-center justify-between cursor-pointer p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.question}),a.jsx(ga,{className:"w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform duration-200"})]}),a.jsx("div",{className:"mt-3 p-4 text-gray-600 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:u.answer})]},u.id))})]}):d()})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Need More Help?"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30",children:[a.jsx(ip,{className:"w-5 h-5"}),a.jsx("span",{children:"Live Chat"})]}),a.jsxs("button",{className:"w-full flex items-center space-x-3 p-3 text-left bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600",children:[a.jsx(ps,{className:"w-5 h-5"}),a.jsx("span",{children:"Email Support"})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resources"}),a.jsx("div",{className:"space-y-3",children:o.map((u,h)=>a.jsxs("a",{href:u.link,className:"flex items-center space-x-3 p-3 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsx(u.icon,{className:"w-5 h-5"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:u.title}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.description})]})]},h))})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"System Status"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),a.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"All systems operational"})]}),a.jsx("a",{href:"/status",className:"text-sm text-purple-600 dark:text-purple-400 hover:underline mt-2 inline-block",children:"View status page"})]})]})]})]})},Ep=()=>{const[t,e]=m.useState([]),[r,s]=m.useState(!0),[i,n]=m.useState(!1),[o,l]=m.useState(""),[c,d]=m.useState(new Set),[u,h]=m.useState(null);m.useEffect(()=>{setTimeout(()=>{e([{id:"1",name:"Production API",key:"nl_live_abc123def456ghi789jkl012mno345pqr678stu901vwx234yz",created_at:"2024-01-15T10:30:00.000Z",last_used:"2024-01-20T14:22:00.000Z",usage_count:1247},{id:"2",name:"Development",key:"nl_test_xyz987wvu654tsr321qpo098nml765kji432hgf109edc876ba",created_at:"2024-01-10T09:15:00.000Z",last_used:"2024-01-19T16:45:00.000Z",usage_count:89}]),s(!1)},1e3)},[]);const f=async()=>{if(!o.trim()){se.error("Please enter a key name");return}const y={id:Date.now().toString(),name:o,key:`nl_live_${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,created_at:new Date().toISOString(),last_used:null,usage_count:0};e(p=>[y,...p]),l(""),n(!1),se.success("API key generated successfully")},x=async y=>{confirm("Are you sure you want to delete this API key? This action cannot be undone.")&&(e(p=>p.filter(A=>A.id!==y)),se.success("API key deleted"))},g=y=>{navigator.clipboard.writeText(y),se.success("API key copied to clipboard")},w=y=>{d(p=>{const A=new Set(p);return A.has(y)?A.delete(y):A.add(y),A})},k=async y=>{h(y),setTimeout(()=>{h(null),se.success("API key is working correctly")},2e3)},E=y=>y.length<=12?y:`${y.substring(0,12)}${"•".repeat(y.length-20)}${y.substring(y.length-8)}`;return r?a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"animate-pulse",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-8"}),a.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>a.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"},y))})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"API Management"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your API keys and access the Nanhi.Links API"})]}),a.jsxs("button",{onClick:()=>n(!0),className:"btn-primary flex items-center space-x-2",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Generate API Key"})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Active Keys"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:t.length})]}),a.jsx(ht,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})]})}),a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Requests"}),a.jsx("p",{className:"text-3xl font-bold text-green-600 mt-2",children:t.reduce((y,p)=>y+p.usage_count,0).toLocaleString()})]}),a.jsx(Ne,{className:"w-8 h-8 text-green-600"})]})}),a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Rate Limit"}),a.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:"1000/hr"})]}),a.jsx(ut,{className:"w-8 h-8 text-blue-600"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(Lr,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Documentation"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Complete guide to using the Nanhi.Links API"})]})]}),a.jsxs("a",{href:"/api/docs",target:"_blank",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium",children:[a.jsx("span",{children:"View Documentation"}),a.jsx(xt,{className:"w-4 h-4"})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(Ne,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Endpoint"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Base URL for all API requests"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("code",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded text-sm font-mono",children:"https://api.nanhi.link/api"}),a.jsx("button",{onClick:()=>g("https://api.nanhi.link/api"),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(cr,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:a.jsx(ht,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Your API Keys"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and monitor your API keys"})]})]})}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(y=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:y.name}),a.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400 px-2 py-1 rounded-full",children:"Active"})]}),a.jsx("div",{className:"flex items-center space-x-4 mb-3",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-600 px-2 py-1 rounded font-mono",children:c.has(y.id)?y.key:E(y.key)}),a.jsx("button",{onClick:()=>w(y.id),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c.has(y.id)?a.jsx(Je,{className:"w-4 h-4"}):a.jsx(Ce,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>g(y.key),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(cr,{className:"w-4 h-4"})})]})}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:["Created ",new Date(y.created_at).toLocaleDateString()]}),a.jsxs("span",{children:[y.usage_count.toLocaleString()," requests"]}),y.last_used&&a.jsxs("span",{children:["Last used ",new Date(y.last_used).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>k(y.id),disabled:u===y.id,className:"px-3 py-1.5 text-sm bg-blue-50 text-blue-600 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg transition-colors duration-200 disabled:opacity-50",children:u===y.id?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 border border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Testing..."})]}):"Test"}),a.jsx("button",{onClick:()=>x(y.id),className:"p-2 text-red-400 hover:text-red-600",children:a.jsx(Bt,{className:"w-4 h-4"})})]})]})},y.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ht,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"No API keys generated yet"}),a.jsx("button",{onClick:()=>n(!0),className:"btn-primary",children:"Generate Your First API Key"})]})]}),a.jsxs("div",{className:"card p-6 mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Start Example"}),a.jsx("div",{className:"bg-gray-900 rounded-lg p-4 overflow-x-auto",children:a.jsx("pre",{className:"text-green-400 text-sm",children:`curl -X POST https://api.nanhi.link/api/links \\
  -H "X-API-Key: your_api_key_here" \\
  -H "Content-Type: application/json" \\
  -d '{
    "url": "https://example.com/very-long-url",
    "title": "My Example Link"
  }'`})}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-2",children:["Replace ",a.jsx("code",{children:"your_api_key_here"})," with one of your API keys above."]})]}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Generate New API Key"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Key Name"}),a.jsx("input",{type:"text",value:o,onChange:y=>l(y.target.value),placeholder:"e.g., Production API, Development, Mobile App",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(ma,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 font-medium",children:"Important Security Notice"}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:"Store your API key securely. It won't be shown again after creation."})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{onClick:()=>{n(!1),l("")},className:"btn-secondary",children:"Cancel"}),a.jsx("button",{onClick:f,className:"btn-primary",children:"Generate API Key"})]})]})})]})},Lp=()=>{const{user:t}=ye(),[e,r]=m.useState(!0),[s,i]=m.useState(null),[n,o]=m.useState("7d");m.useEffect(()=>{(async()=>{if(t)try{r(!0);const d=await Tp.getAnalytics(t.id);i(d)}catch(d){console.error("Failed to load analytics:",d)}finally{r(!1)}})()},[t,n]);const l=[{id:"clicks",title:"Click Analytics",description:"Detailed click tracking and user behavior",icon:lr,color:"purple"},{id:"performance",title:"Performance Report",description:"Link performance and conversion metrics",icon:Jr,color:"blue"},{id:"geographic",title:"Geographic Report",description:"Geographic distribution of clicks",icon:pe,color:"green"},{id:"devices",title:"Device Analytics",description:"Device and browser usage statistics",icon:Xr,color:"orange"}];return e?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Reports"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Generate and download detailed analytics reports"})]}),a.jsx("div",{className:"flex items-center space-x-3",children:a.jsxs("select",{value:n,onChange:c=>o(c.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"7d",children:"Last 7 days"}),a.jsx("option",{value:"30d",children:"Last 30 days"}),a.jsx("option",{value:"90d",children:"Last 90 days"}),a.jsx("option",{value:"1y",children:"Last year"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(Ce,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Clicks"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(s==null?void 0:s.totalClicks)||0})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(ac,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Links"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(s==null?void 0:s.activeLinks)||0})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(Jr,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. CTR"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(s==null?void 0:s.averageCTR)||"0%"})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/20 rounded-lg",children:a.jsx(At,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg. Session"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(s==null?void 0:s.averageSession)||"0m"})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map((c,d)=>a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-3 bg-${c.color}-100 dark:bg-${c.color}-900/20 rounded-lg`,children:a.jsx(c.icon,{className:`w-6 h-6 text-${c.color}-600 dark:text-${c.color}-400`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:c.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.description})]})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleDateString()]}),a.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`bg-${c.color}-100 dark:bg-${c.color}-900/20 text-${c.color}-600 dark:text-${c.color}-400 px-4 py-2 rounded-lg text-sm font-medium hover:bg-${c.color}-200 dark:hover:bg-${c.color}-900/40 transition-colors flex items-center space-x-2`,children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Download"})]})]})]},c.id))}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Custom Report Builder"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Date Range"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qa,{className:"w-4 h-4 text-gray-400"}),a.jsx("input",{type:"date",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("span",{className:"text-gray-500",children:"to"}),a.jsx("input",{type:"date",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Metrics"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ei,{className:"w-4 h-4 text-gray-400"}),a.jsxs("select",{className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{children:"All Metrics"}),a.jsx("option",{children:"Clicks Only"}),a.jsx("option",{children:"Geographic Data"}),a.jsx("option",{children:"Device Data"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Format"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{children:"CSV"}),a.jsx("option",{children:"PDF"}),a.jsx("option",{children:"Excel"}),a.jsx("option",{children:"JSON"})]})]})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Generate Custom Report"})]})]})]})},Rp=()=>{ye();const[t,e]=m.useState([]);m.useState(!1);const[r,s]=m.useState(""),[i,n]=m.useState(!1);m.useEffect(()=>{e([{id:1,name:"Geographic Filter",type:"geographic",description:"Block traffic from specific countries",isActive:!0,rules:["Block: CN, RU","Allow: US, CA, UK"],created_at:new Date().toISOString()},{id:2,name:"Bot Protection",type:"security",description:"Filter out bot traffic and suspicious requests",isActive:!0,rules:["Block known bots","Rate limiting: 10/min"],created_at:new Date().toISOString()},{id:3,name:"Time-based Filter",type:"temporal",description:"Restrict access during specific hours",isActive:!1,rules:["Block: 2AM-6AM UTC","Weekend restrictions"],created_at:new Date().toISOString()}])},[]);const o=t.filter(h=>h.name.toLowerCase().includes(r.toLowerCase())||h.description.toLowerCase().includes(r.toLowerCase())),l=[{id:"geographic",name:"Geographic",icon:pe,color:"blue"},{id:"security",name:"Security",icon:we,color:"red"},{id:"temporal",name:"Time-based",icon:At,color:"green"},{id:"device",name:"Device",icon:Xr,color:"purple"}],c=h=>l.find(f=>f.id===h)||l[0],d=h=>{e(t.map(f=>f.id===h?{...f,isActive:!f.isActive}:f)),K.success("Filter updated successfully")},u=h=>{confirm("Are you sure you want to delete this filter?")&&(e(t.filter(f=>f.id!==h)),K.success("Filter deleted successfully"))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Filters"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage traffic filtering and security rules"})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Create Filter"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search filters...",value:r,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:l.map((h,f)=>a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-3 bg-${h.color}-100 dark:bg-${h.color}-900/20 rounded-lg`,children:a.jsx(h.icon,{className:`w-6 h-6 text-${h.color}-600 dark:text-${h.color}-400`})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.name}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(x=>x.type===h.id).length})]})]})},h.id))}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map((h,f)=>{const x=c(h.type);return a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:`p-3 bg-${x.color}-100 dark:bg-${x.color}-900/20 rounded-lg`,children:a.jsx(x.icon,{className:`w-6 h-6 text-${x.color}-600 dark:text-${x.color}-400`})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:h.name}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${h.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:h.isActive?a.jsxs(a.Fragment,{children:[a.jsx(Ce,{className:"w-3 h-3 mr-1"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${x.color}-100 text-${x.color}-800 dark:bg-${x.color}-900/20 dark:text-${x.color}-400`,children:x.name})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:h.description}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rules:"}),h.rules.map((g,w)=>a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:["• ",g]},w))]}),a.jsxs("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-400",children:["Created ",new Date(h.created_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>d(h.id),className:`p-2 rounded-lg transition-colors ${h.isActive?"text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20":"text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:h.isActive?a.jsx(Ce,{className:"w-4 h-4"}):a.jsx(Je,{className:"w-4 h-4"})}),a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:a.jsx(up,{className:"w-4 h-4"})}),a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(h.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(Bt,{className:"w-4 h-4"})})]})]})},h.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ei,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r?"No filters found":"No filters created yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r?"Try adjusting your search criteria":"Create your first filter to manage traffic and security"}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Create Filter"})]})]})})]})},Ip=()=>{ye();const[t,e]=m.useState([]);m.useState(!1);const[r,s]=m.useState(""),[i,n]=m.useState(!1);m.useEffect(()=>{e([{id:1,domain:"nanhi.link",status:"active",isDefault:!0,ssl:!0,verified:!0,clicks:15420,created_at:new Date().toISOString()},{id:2,domain:"short.example.com",status:"pending",isDefault:!1,ssl:!0,verified:!1,clicks:0,created_at:new Date().toISOString()},{id:3,domain:"link.mysite.com",status:"active",isDefault:!1,ssl:!0,verified:!0,clicks:2340,created_at:new Date().toISOString()}])},[]);const o=t.filter(h=>h.domain.toLowerCase().includes(r.toLowerCase())),l=h=>{switch(h){case"active":return{icon:ut,color:"green",text:"Active"};case"pending":return{icon:ma,color:"yellow",text:"Pending"};case"inactive":return{icon:nc,color:"red",text:"Inactive"};default:return{icon:ma,color:"gray",text:"Unknown"}}},c=async h=>{try{await navigator.clipboard.writeText(h),K.success("Domain copied to clipboard!")}catch{K.error("Failed to copy")}},d=h=>{e(t.map(f=>({...f,isDefault:f.id===h}))),K.success("Default domain updated")},u=h=>{const f=t.find(x=>x.id===h);if(f!=null&&f.isDefault){K.error("Cannot delete the default domain");return}confirm("Are you sure you want to delete this domain?")&&(e(t.filter(x=>x.id!==h)),K.success("Domain deleted successfully"))};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Domains"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your custom domains and SSL certificates"})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Domain"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search domains...",value:r,onChange:h=>s(h.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(pe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Domains"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(ut,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Domains"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(h=>h.status==="active").length})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(we,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"SSL Enabled"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(h=>h.ssl).length})]})]})})]}),a.jsx("div",{className:"space-y-4",children:o.length>0?o.map((h,f)=>{const x=l(h.status);return a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(pe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:h.domain}),h.isDefault&&a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",children:"Default"}),a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-${x.color}-100 text-${x.color}-800 dark:bg-${x.color}-900/20 dark:text-${x.color}-400`,children:[a.jsx(x.icon,{className:"w-3 h-3 mr-1"}),x.text]}),h.ssl&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:[a.jsx(we,{className:"w-3 h-3 mr-1"}),"SSL"]}),h.verified&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[a.jsx(ut,{className:"w-3 h-3 mr-1"}),"Verified"]})]}),a.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(xt,{className:"w-4 h-4"}),a.jsxs("span",{children:[h.clicks.toLocaleString()," clicks"]})]}),a.jsxs("div",{children:["Added ",new Date(h.created_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(h.domain),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-4 h-4"})}),!h.isDefault&&a.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>d(h.id),className:"px-3 py-1 text-xs font-medium text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",children:"Set Default"}),a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:a.jsx(ft,{className:"w-4 h-4"})}),!h.isDefault&&a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u(h.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:a.jsx(Bt,{className:"w-4 h-4"})})]})]})},h.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pe,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r?"No domains found":"No custom domains added yet"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r?"Try adjusting your search criteria":"Add your first custom domain to brand your short links"}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto",children:[a.jsx(Oe,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Domain"})]})]})})]})},Dp=()=>{ye();const[t,e]=m.useState([]);m.useState(!1);const[r,s]=m.useState(""),[i,n]=m.useState("all");m.useEffect(()=>{e([{id:1,name:"Google Analytics",description:"Track link clicks and user behavior with Google Analytics",category:"analytics",icon:lr,color:"orange",isConnected:!0,isPopular:!0,features:["Click tracking","User behavior","Conversion tracking"]},{id:2,name:"Slack",description:"Send link notifications and reports to Slack channels",category:"communication",icon:np,color:"purple",isConnected:!1,isPopular:!0,features:["Real-time notifications","Daily reports","Team collaboration"]},{id:3,name:"Zapier",description:"Connect with 3000+ apps through Zapier automation",category:"automation",icon:Re,color:"yellow",isConnected:!0,isPopular:!0,features:["Workflow automation","3000+ app connections","Custom triggers"]},{id:4,name:"Mailchimp",description:"Integrate with email marketing campaigns",category:"marketing",icon:ps,color:"blue",isConnected:!1,isPopular:!1,features:["Email campaigns","Subscriber tracking","A/B testing"]},{id:5,name:"Facebook Pixel",description:"Track conversions and optimize Facebook ads",category:"analytics",icon:xp,color:"blue",isConnected:!1,isPopular:!0,features:["Conversion tracking","Audience insights","Ad optimization"]},{id:6,name:"Webhook",description:"Send real-time data to any endpoint",category:"developer",icon:pe,color:"green",isConnected:!0,isPopular:!1,features:["Real-time data","Custom endpoints","Event triggers"]}])},[]);const o=[{id:"all",name:"All",count:t.length},{id:"analytics",name:"Analytics",count:t.filter(d=>d.category==="analytics").length},{id:"communication",name:"Communication",count:t.filter(d=>d.category==="communication").length},{id:"automation",name:"Automation",count:t.filter(d=>d.category==="automation").length},{id:"marketing",name:"Marketing",count:t.filter(d=>d.category==="marketing").length},{id:"developer",name:"Developer",count:t.filter(d=>d.category==="developer").length}],l=t.filter(d=>{const u=d.name.toLowerCase().includes(r.toLowerCase())||d.description.toLowerCase().includes(r.toLowerCase()),h=i==="all"||d.category===i;return u&&h}),c=d=>{e(t.map(h=>h.id===d?{...h,isConnected:!h.isConnected}:h));const u=t.find(h=>h.id===d);K.success(`${u.name} ${u.isConnected?"disconnected":"connected"} successfully`)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Integrations"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Connect with your favorite tools and services"})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(xt,{className:"w-4 h-4"}),a.jsx("span",{children:"Browse More"})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search integrations...",value:r,onChange:d=>s(d.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:o.map(d=>a.jsxs("button",{onClick:()=>n(d.id),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${i===d.id?"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[d.name," (",d.count,")"]},d.id))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/20 rounded-lg",children:a.jsx(ya,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Integrations"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.length})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/20 rounded-lg",children:a.jsx(ut,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Connected"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(d=>d.isConnected).length})]})]})}),a.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/20 rounded-lg",children:a.jsx(Re,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Popular"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t.filter(d=>d.isPopular).length})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.length>0?l.map((d,u)=>a.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:u*.1},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-3 bg-${d.color}-100 dark:bg-${d.color}-900/20 rounded-lg`,children:a.jsx(d.icon,{className:`w-6 h-6 text-${d.color}-600 dark:text-${d.color}-400`})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:d.name}),d.isPopular&&a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",children:"Popular"})]}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${d.isConnected?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}`,children:d.isConnected?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-3 h-3 mr-1"}),"Connected"]}):a.jsxs(a.Fragment,{children:[a.jsx(nc,{className:"w-3 h-3 mr-1"}),"Not Connected"]})})]})]})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:d.description}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Features:"}),d.features.map((h,f)=>a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 ml-2",children:["• ",h]},f))]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d.isConnected?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/40":"bg-purple-100 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 hover:bg-purple-200 dark:hover:bg-purple-900/40"}`,children:d.isConnected?"Disconnect":"Connect"}),d.isConnected&&a.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:a.jsx(ft,{className:"w-4 h-4"})})]})]},d.id)):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ya,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:r||i!=="all"?"No integrations found":"No integrations available"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r||i!=="all"?"Try adjusting your search or filter criteria":"Browse our integration marketplace to connect your favorite tools"}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2 mx-auto",children:[a.jsx(xt,{className:"w-4 h-4"}),a.jsx("span",{children:"Browse Integrations"})]})]})})]})},Op=()=>{var w;const{user:t}=ye(),{currentTheme:e,setTheme:r,themes:s}=ls(),[i,n]=m.useState("profile"),[o,l]=m.useState(!1),[c,d]=m.useState({name:((w=t==null?void 0:t.user_metadata)==null?void 0:w.full_name)||"",email:(t==null?void 0:t.email)||"",currentPassword:"",newPassword:"",confirmPassword:""}),u=[{id:"profile",name:"Profile",icon:ys},{id:"notifications",name:"Notifications",icon:Za},{id:"security",name:"Security",icon:we},{id:"appearance",name:"Appearance",icon:ri},{id:"api",name:"API Keys",icon:ht},{id:"data",name:"Data & Privacy",icon:Gr}],h=k=>{d({...c,[k.target.name]:k.target.value})},f=()=>{K.success("Profile updated successfully")},x=()=>{if(c.newPassword!==c.confirmPassword){K.error("Passwords do not match");return}K.success("Password updated successfully"),d({...c,currentPassword:"",newPassword:"",confirmPassword:""})},g=()=>{switch(i){case"profile":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Profile Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",name:"name",value:c.name,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),a.jsx("input",{type:"email",name:"email",value:c.email,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"mt-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(fp,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Changes"})]})]})});case"security":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Change Password"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:o?"text":"password",name:"currentPassword",value:c.currentPassword,onChange:h,className:"w-full px-4 py-3 pr-12 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?a.jsx(Je,{className:"w-5 h-5"}):a.jsx(Ce,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),a.jsx("input",{type:o?"text":"password",name:"newPassword",value:c.newPassword,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),a.jsx("input",{type:o?"text":"password",name:"confirmPassword",value:c.confirmPassword,onChange:h,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:x,className:"mt-4 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(we,{className:"w-4 h-4"}),a.jsx("span",{children:"Update Password"})]})]})});case"appearance":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Theme Selection"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(s).map(([k,E])=>a.jsxs(L.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(k),className:`p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 ${e===k?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-purple-300"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg",style:{backgroundColor:E.colors.brand.primary}}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:E.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:E.description})]})]}),a.jsx("div",{className:"flex space-x-2",children:Object.values(E.colors.brand).slice(0,4).map((y,p)=>a.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:y}},p))})]},k))})]})});case"notifications":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Notification Preferences"}),a.jsx("div",{className:"space-y-4",children:[{id:"email_reports",label:"Email Reports",description:"Receive weekly analytics reports"},{id:"link_clicks",label:"Link Clicks",description:"Get notified when links are clicked"},{id:"security_alerts",label:"Security Alerts",description:"Important security notifications"},{id:"product_updates",label:"Product Updates",description:"New features and improvements"}].map(k=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:k.label}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.description})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]},k.id))})]})});case"api":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"API Keys"}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 mb-6",children:a.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:"API keys provide access to your account data. Keep them secure and never share them publicly."})}),a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:"Production API Key"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full access to your account"}),a.jsx("code",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded mt-2 inline-block",children:"nl_prod_••••••••••••••••"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-3 py-1 text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",children:"Regenerate"}),a.jsx("button",{className:"px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:"Revoke"})]})]})})}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center space-x-2",children:[a.jsx(ht,{className:"w-4 h-4"}),a.jsx("span",{children:"Generate New Key"})]})]})});case"data":return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Data Export & Privacy"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-xl",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Export Your Data"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Download all your account data including links, analytics, and settings."}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/40 transition-colors flex items-center space-x-2",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsx("span",{children:"Export Data"})]})]}),a.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[a.jsx("h4",{className:"font-medium text-red-900 dark:text-red-200 mb-2",children:"Delete Account"}),a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Permanently delete your account and all associated data. This action cannot be undone."}),a.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2",children:[a.jsx(Bt,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete Account"})]})]})]})]})});default:return null}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage your account preferences and configuration"})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[a.jsx("div",{className:"lg:w-64",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-4",children:a.jsx("nav",{className:"space-y-2",children:u.map(k=>a.jsxs("button",{onClick:()=>n(k.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${i===k.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx(k.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:k.name})]},k.id))})})}),a.jsx("div",{className:"flex-1",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 p-6",children:g()})})]})]})};function Mp(){return a.jsx(Eh,{children:a.jsx(Lo,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-200",children:[a.jsxs(fd,{children:[a.jsx(de,{path:"/login",element:a.jsx(wp,{})}),a.jsx(de,{path:"/register",element:a.jsx(kp,{})}),a.jsx(de,{path:"/",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(jp,{})})})}),a.jsx(de,{path:"/links",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Sp,{})})})}),a.jsx(de,{path:"/reports",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Lp,{})})})}),a.jsx(de,{path:"/filters",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Rp,{})})})}),a.jsx(de,{path:"/domains",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Ip,{})})})}),a.jsx(de,{path:"/integrations",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Dp,{})})})}),a.jsx(de,{path:"/api",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Ep,{})})})}),a.jsx(de,{path:"/account",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Pp,{})})})}),a.jsx(de,{path:"/help",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Ap,{})})})}),a.jsx(de,{path:"/settings",element:a.jsx(ke,{children:a.jsx(je,{children:a.jsx(Op,{})})})}),a.jsx(de,{path:"*",element:a.jsx(eo,{to:"/",replace:!0})})]}),a.jsx(io,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}function Fp(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oc={exports:{}};const $p={},Up=Object.freeze(Object.defineProperty({__proto__:null,default:$p},Symbol.toStringTag,{value:"Module"})),Bp=Vn(Up);(function(t){/**
 * @license bcrypt.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bcrypt.js for details
 */(function(e,r){typeof Fp=="function"&&t&&t.exports?t.exports=r():(e.dcodeIO=e.dcodeIO||{}).bcrypt=r()})(fe,function(){var e={},r=null;function s(P){if(t&&t.exports)try{return Bp.randomBytes(P)}catch{}try{var S;return(self.crypto||self.msCrypto).getRandomValues(S=new Uint32Array(P)),Array.prototype.slice.call(S)}catch{}if(!r)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return r(P)}var i=!1;try{s(1),i=!0}catch{}r=null,e.setRandomFallback=function(P){r=P},e.genSaltSync=function(P,S){if(P=P||w,typeof P!="number")throw Error("Illegal arguments: "+typeof P+", "+typeof S);P<4?P=4:P>31&&(P=31);var N=[];return N.push("$2a$"),P<10&&N.push("0"),N.push(P.toString()),N.push("$"),N.push(h(s(g),g)),N.join("")},e.genSalt=function(P,S,N){if(typeof S=="function"&&(N=S,S=void 0),typeof P=="function"&&(N=P,P=void 0),typeof P>"u")P=w;else if(typeof P!="number")throw Error("illegal arguments: "+typeof P);function v(j){o(function(){try{j(null,e.genSaltSync(P))}catch(T){j(T)}})}if(N){if(typeof N!="function")throw Error("Illegal callback: "+typeof N);v(N)}else return new Promise(function(j,T){v(function(R,V){if(R){T(R);return}j(V)})})},e.hashSync=function(P,S){if(typeof S>"u"&&(S=w),typeof S=="number"&&(S=e.genSaltSync(S)),typeof P!="string"||typeof S!="string")throw Error("Illegal arguments: "+typeof P+", "+typeof S);return z(P,S)},e.hash=function(P,S,N,v){function j(T){typeof P=="string"&&typeof S=="number"?e.genSalt(S,function(R,V){z(P,V,T,v)}):typeof P=="string"&&typeof S=="string"?z(P,S,T,v):o(T.bind(this,Error("Illegal arguments: "+typeof P+", "+typeof S)))}if(N){if(typeof N!="function")throw Error("Illegal callback: "+typeof N);j(N)}else return new Promise(function(T,R){j(function(V,O){if(V){R(V);return}T(O)})})};function n(P,S){for(var N=0,v=0,j=0,T=P.length;j<T;++j)P.charCodeAt(j)===S.charCodeAt(j)?++N:++v;return N<0?!1:v===0}e.compareSync=function(P,S){if(typeof P!="string"||typeof S!="string")throw Error("Illegal arguments: "+typeof P+", "+typeof S);return S.length!==60?!1:n(e.hashSync(P,S.substr(0,S.length-31)),S)},e.compare=function(P,S,N,v){function j(T){if(typeof P!="string"||typeof S!="string"){o(T.bind(this,Error("Illegal arguments: "+typeof P+", "+typeof S)));return}if(S.length!==60){o(T.bind(this,null,!1));return}e.hash(P,S.substr(0,29),function(R,V){R?T(R):T(null,n(V,S))},v)}if(N){if(typeof N!="function")throw Error("Illegal callback: "+typeof N);j(N)}else return new Promise(function(T,R){j(function(V,O){if(V){R(V);return}T(O)})})},e.getRounds=function(P){if(typeof P!="string")throw Error("Illegal arguments: "+typeof P);return parseInt(P.split("$")[2],10)},e.getSalt=function(P){if(typeof P!="string")throw Error("Illegal arguments: "+typeof P);if(P.length!==60)throw Error("Illegal hash length: "+P.length+" != 60");return P.substring(0,29)};var o=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function l(P){var S=[],N=0;return x.encodeUTF16toUTF8(function(){return N>=P.length?null:P.charCodeAt(N++)},function(v){S.push(v)}),S}var c="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1],u=String.fromCharCode;function h(P,S){var N=0,v=[],j,T;if(S<=0||S>P.length)throw Error("Illegal len: "+S);for(;N<S;){if(j=P[N++]&255,v.push(c[j>>2&63]),j=(j&3)<<4,N>=S){v.push(c[j&63]);break}if(T=P[N++]&255,j|=T>>4&15,v.push(c[j&63]),j=(T&15)<<2,N>=S){v.push(c[j&63]);break}T=P[N++]&255,j|=T>>6&3,v.push(c[j&63]),v.push(c[T&63])}return v.join("")}function f(P,S){var N=0,v=P.length,j=0,T=[],R,V,O,W,b,C;if(S<=0)throw Error("Illegal len: "+S);for(;N<v-1&&j<S&&(C=P.charCodeAt(N++),R=C<d.length?d[C]:-1,C=P.charCodeAt(N++),V=C<d.length?d[C]:-1,!(R==-1||V==-1||(b=R<<2>>>0,b|=(V&48)>>4,T.push(u(b)),++j>=S||N>=v)||(C=P.charCodeAt(N++),O=C<d.length?d[C]:-1,O==-1)||(b=(V&15)<<4>>>0,b|=(O&60)>>2,T.push(u(b)),++j>=S||N>=v)));)C=P.charCodeAt(N++),W=C<d.length?d[C]:-1,b=(O&3)<<6>>>0,b|=W,T.push(u(b)),++j;var q=[];for(N=0;N<j;N++)q.push(T[N].charCodeAt(0));return q}var x=function(){var P={};return P.MAX_CODEPOINT=1114111,P.encodeUTF8=function(S,N){var v=null;for(typeof S=="number"&&(v=S,S=function(){return null});v!==null||(v=S())!==null;)v<128?N(v&127):v<2048?(N(v>>6&31|192),N(v&63|128)):v<65536?(N(v>>12&15|224),N(v>>6&63|128),N(v&63|128)):(N(v>>18&7|240),N(v>>12&63|128),N(v>>6&63|128),N(v&63|128)),v=null},P.decodeUTF8=function(S,N){for(var v,j,T,R,V=function(O){O=O.slice(0,O.indexOf(null));var W=Error(O.toString());throw W.name="TruncatedError",W.bytes=O,W};(v=S())!==null;)if(!(v&128))N(v);else if((v&224)===192)(j=S())===null&&V([v,j]),N((v&31)<<6|j&63);else if((v&240)===224)((j=S())===null||(T=S())===null)&&V([v,j,T]),N((v&15)<<12|(j&63)<<6|T&63);else if((v&248)===240)((j=S())===null||(T=S())===null||(R=S())===null)&&V([v,j,T,R]),N((v&7)<<18|(j&63)<<12|(T&63)<<6|R&63);else throw RangeError("Illegal starting byte: "+v)},P.UTF16toUTF8=function(S,N){for(var v,j=null;(v=j!==null?j:S())!==null;){if(v>=55296&&v<=57343&&(j=S())!==null&&j>=56320&&j<=57343){N((v-55296)*1024+j-56320+65536),j=null;continue}N(v)}j!==null&&N(j)},P.UTF8toUTF16=function(S,N){var v=null;for(typeof S=="number"&&(v=S,S=function(){return null});v!==null||(v=S())!==null;)v<=65535?N(v):(v-=65536,N((v>>10)+55296),N(v%1024+56320)),v=null},P.encodeUTF16toUTF8=function(S,N){P.UTF16toUTF8(S,function(v){P.encodeUTF8(v,N)})},P.decodeUTF8toUTF16=function(S,N){P.decodeUTF8(S,function(v){P.UTF8toUTF16(v,N)})},P.calculateCodePoint=function(S){return S<128?1:S<2048?2:S<65536?3:4},P.calculateUTF8=function(S){for(var N,v=0;(N=S())!==null;)v+=P.calculateCodePoint(N);return v},P.calculateUTF16asUTF8=function(S){var N=0,v=0;return P.UTF16toUTF8(S,function(j){++N,v+=P.calculateCodePoint(j)}),[N,v]},P}();Date.now=Date.now||function(){return+new Date};var g=16,w=10,k=16,E=100,y=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],p=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],A=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function _(P,S,N,v){var j,T=P[S],R=P[S+1];return T^=N[0],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[1],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[2],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[3],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[4],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[5],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[6],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[7],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[8],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[9],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[10],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[11],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[12],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[13],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[14],j=v[T>>>24],j+=v[256|T>>16&255],j^=v[512|T>>8&255],j+=v[768|T&255],R^=j^N[15],j=v[R>>>24],j+=v[256|R>>16&255],j^=v[512|R>>8&255],j+=v[768|R&255],T^=j^N[16],P[S]=R^N[k+1],P[S+1]=T,P}function I(P,S){for(var N=0,v=0;N<4;++N)v=v<<8|P[S]&255,S=(S+1)%P.length;return{key:v,offp:S}}function F(P,S,N){for(var v=0,j=[0,0],T=S.length,R=N.length,V,O=0;O<T;O++)V=I(P,v),v=V.offp,S[O]=S[O]^V.key;for(O=0;O<T;O+=2)j=_(j,0,S,N),S[O]=j[0],S[O+1]=j[1];for(O=0;O<R;O+=2)j=_(j,0,S,N),N[O]=j[0],N[O+1]=j[1]}function $(P,S,N,v){for(var j=0,T=[0,0],R=N.length,V=v.length,O,W=0;W<R;W++)O=I(S,j),j=O.offp,N[W]=N[W]^O.key;for(j=0,W=0;W<R;W+=2)O=I(P,j),j=O.offp,T[0]^=O.key,O=I(P,j),j=O.offp,T[1]^=O.key,T=_(T,0,N,v),N[W]=T[0],N[W+1]=T[1];for(W=0;W<V;W+=2)O=I(P,j),j=O.offp,T[0]^=O.key,O=I(P,j),j=O.offp,T[1]^=O.key,T=_(T,0,N,v),v[W]=T[0],v[W+1]=T[1]}function D(P,S,N,v,j){var T=A.slice(),R=T.length,V;if(N<4||N>31)if(V=Error("Illegal number of rounds (4-31): "+N),v){o(v.bind(this,V));return}else throw V;if(S.length!==g)if(V=Error("Illegal salt length: "+S.length+" != "+g),v){o(v.bind(this,V));return}else throw V;N=1<<N>>>0;var O,W,b=0,C;Int32Array?(O=new Int32Array(y),W=new Int32Array(p)):(O=y.slice(),W=p.slice()),$(S,P,O,W);function q(){if(j&&j(b/N),b<N)for(var le=Date.now();b<N&&(b=b+1,F(P,O,W),F(S,O,W),!(Date.now()-le>E)););else{for(b=0;b<64;b++)for(C=0;C<R>>1;C++)_(T,C<<1,O,W);var J=[];for(b=0;b<R;b++)J.push((T[b]>>24&255)>>>0),J.push((T[b]>>16&255)>>>0),J.push((T[b]>>8&255)>>>0),J.push((T[b]&255)>>>0);if(v){v(null,J);return}else return J}v&&o(q)}if(typeof v<"u")q();else for(var X;;)if(typeof(X=q())<"u")return X||[]}function z(P,S,N,v){var j;if(typeof P!="string"||typeof S!="string")if(j=Error("Invalid string / salt: Not a string"),N){o(N.bind(this,j));return}else throw j;var T,R;if(S.charAt(0)!=="$"||S.charAt(1)!=="2")if(j=Error("Invalid salt version: "+S.substring(0,2)),N){o(N.bind(this,j));return}else throw j;if(S.charAt(2)==="$")T=String.fromCharCode(0),R=3;else{if(T=S.charAt(2),T!=="a"&&T!=="b"&&T!=="y"||S.charAt(3)!=="$")if(j=Error("Invalid salt revision: "+S.substring(2,4)),N){o(N.bind(this,j));return}else throw j;R=4}if(S.charAt(R+2)>"$")if(j=Error("Missing salt rounds"),N){o(N.bind(this,j));return}else throw j;var V=parseInt(S.substring(R,R+1),10)*10,O=parseInt(S.substring(R+1,R+2),10),W=V+O,b=S.substring(R+3,R+25);P+=T>="a"?"\0":"";var C=l(P),q=f(b,g);function X(le){var J=[];return J.push("$2"),T>="a"&&J.push(T),J.push("$"),W<10&&J.push("0"),J.push(W.toString()),J.push("$"),J.push(h(q,q.length)),J.push(h(le,A.length*4-1)),J.join("")}if(typeof N>"u")return X(D(C,q,W));D(C,q,W,function(le,J){le?N(le,null):N(null,X(J))},v)}return e.encodeBase64=h,e.decodeBase64=f,e})})(oc);var Vp=oc.exports;const Un=dc(Vp),Bs={async hashPassword(t){return await Un.hash(t,12)},async verifyPassword(t,e){return await Un.compare(t,e)}},qp={async createLink(t){try{const{data:{user:e}}=await B.auth.getUser();if(!e)throw new Error("User not authenticated");let r=null;t.password_protection&&t.password&&(r=await Bs.hashPassword(t.password));const{data:s,error:i}=await B.from("links").insert({user_id:e.id,project_id:t.project_id,title:t.title,destination_url:t.destination_url,short_code:t.short_code,link_type:t.link_type||"short",is_active:t.is_active!==void 0?t.is_active:!0,cloaking_enabled:t.cloaking_enabled||!1,cloaking_page_title:t.cloaking_page_title||"",cloaking_page_description:t.cloaking_page_description||"",cloaking_delay:t.cloaking_delay||3,script_injection_enabled:t.script_injection_enabled||!1,tracking_scripts:t.tracking_scripts||[],script_delay:t.script_delay||0,script_position:t.script_position||"head",geo_targeting_enabled:t.geo_targeting_enabled||!1,geo_rules:t.geo_rules||[],geo_fallback_url:t.geo_fallback_url||"",time_targeting_enabled:t.time_targeting_enabled||!1,time_rules:t.time_rules||[],time_fallback_url:t.time_fallback_url||"",utm_enabled:t.utm_enabled||!1,utm_source:t.utm_source||"",utm_medium:t.utm_medium||"",utm_campaign:t.utm_campaign||"",utm_term:t.utm_term||"",utm_content:t.utm_content||"",ab_testing_enabled:t.ab_testing_enabled||!1,ab_test_urls:t.ab_test_urls||[],password_protection:t.password_protection||!1,password:r,expiration_enabled:t.expiration_enabled||!1,expiration_date:t.expiration_date||null,click_limit_enabled:t.click_limit_enabled||!1,click_limit:t.click_limit||null,device_targeting_enabled:t.device_targeting_enabled||!1,device_rules:t.device_rules||{desktop:!0,mobile:!0,tablet:!0},total_clicks:0}).select().single();if(i)throw i;return s}catch(e){throw console.error("Error creating link:",e),e}},async getUserLinks(){try{const{data:{user:t}}=await B.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:r}=await B.from("links").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(t){throw console.error("Error fetching links:",t),t}},async getLinksByProject(t){try{const{data:{user:e}}=await B.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r,error:s}=await B.from("links").select("*").eq("user_id",e.id).eq("project_id",t).order("created_at",{ascending:!1});if(s)throw s;return r||[]}catch(e){throw console.error("Error fetching project links:",e),e}},async updateLink(t,e){try{const{data:{user:r}}=await B.auth.getUser();if(!r)throw new Error("User not authenticated");e.password_protection&&e.password&&(e.password=await Bs.hashPassword(e.password));const{data:s,error:i}=await B.from("links").update({...e,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",r.id).select().single();if(i)throw i;return s}catch(r){throw console.error("Error updating link:",r),r}},async deleteLink(t){try{const{data:{user:e}}=await B.auth.getUser();if(!e)throw new Error("User not authenticated");const{error:r}=await B.from("links").delete().eq("id",t).eq("user_id",e.id);if(r)throw r}catch(e){throw console.error("Error deleting link:",e),e}},async getLinkByShortCode(t){try{const{data:e,error:r}=await B.from("links").select("*").eq("short_code",t).eq("is_active",!0).single();if(r)throw r;return e}catch(e){throw console.error("Error fetching link by short code:",e),e}},async verifyLinkPassword(t,e){try{const{data:r,error:s}=await B.from("links").select("password").eq("id",t).single();if(s)throw s;return r.password?await Bs.verifyPassword(e,r.password):!0}catch(r){return console.error("Error verifying link password:",r),!1}},async incrementClickCount(t){try{const{data:e,error:r}=await B.from("links").update({total_clicks:B.raw("total_clicks + 1"),last_clicked_at:new Date().toISOString()}).eq("id",t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error incrementing click count:",e),e}},async isShortCodeAvailable(t){try{const{data:e,error:r}=await B.from("links").select("id").eq("short_code",t).limit(1);if(r)throw r;return e.length===0}catch(e){throw console.error("Error checking short code availability:",e),e}},generateScriptInjectionPage(t,e){const r=t.tracking_scripts.filter(i=>i.enabled).map(i=>i.script).join(`
`),s=(t.script_delay||0)*1e3;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${t.cloaking_page_title||"Redirecting..."}</title>
    <meta name="description" content="${t.cloaking_page_description||"Please wait while we redirect you..."}">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
        }
        .container {
            max-width: 400px;
        }
        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        h1 { margin-bottom: 10px; }
        p { opacity: 0.9; }
    </style>
    ${t.script_position==="head"?r:""}
</head>
<body>
    <div class="container">
        <div class="spinner"></div>
        <h1>${t.cloaking_page_title||"Redirecting..."}</h1>
        <p>${t.cloaking_page_description||"Please wait while we redirect you..."}</p>
    </div>
    
    ${t.script_position==="body"?`<script>${r}<\/script>`:""}
    
    <script>
        // Redirect after delay
        setTimeout(() => {
            window.location.href = '${e}';
        }, ${s});
        
        // Fallback redirect on click
        document.addEventListener('click', () => {
            window.location.href = '${e}';
        });
    <\/script>
    
    ${t.script_position==="footer"?`<script>${r}<\/script>`:""}
</body>
</html>`}},Hp={async generateTrackingScripts(t){var e,r;try{const{data:{user:s}}=await B.auth.getUser();if(!s)return"";const{data:i,error:n}=await B.from("user_integrations").select("integration_type, config").eq("user_id",s.id).eq("is_active",!0);if(n)throw n;let o="";for(const l of i||[])switch(l.integration_type){case"google_analytics":(e=l.config)!=null&&e.measurement_id&&(o+=this.generateGAScript(l.config.measurement_id,t));break;case"facebook_pixel":(r=l.config)!=null&&r.pixel_id&&(o+=this.generateFBPixelScript(l.config.pixel_id,t));break}return o}catch(s){return console.error("Error generating tracking scripts:",s),""}},generateGAScript(t,e){return`
      <!-- Google Analytics 4 -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=${t}"><\/script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', '${t}');
        
        // Track link click event
        gtag('event', 'link_click', {
          'custom_parameter': 'nanhi_link',
          'link_id': '${e}',
          'event_category': 'engagement',
          'event_label': 'short_link_redirect'
        });
      <\/script>
    `},generateFBPixelScript(t,e){return`
      <!-- Facebook Pixel -->
      <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        
        fbq('init', '${t}');
        fbq('track', 'PageView');
        
        // Track custom event for link click
        fbq('trackCustom', 'LinkClick', {
          link_id: '${e}',
          source: 'nanhi_link'
        });
      <\/script>
      <noscript>
        <img height="1" width="1" style="display:none" 
             src="https://www.facebook.com/tr?id=${t}&ev=PageView&noscript=1" />
      </noscript>
    `},async sendWebhookNotification(t,e){try{const{data:{user:r}}=await B.auth.getUser();if(!r)return;const{data:s,error:i}=await B.from("user_integrations").select("config").eq("user_id",r.id).eq("integration_type","webhooks").eq("is_active",!0);if(i)throw i;for(const n of s||[]){const{webhook_url:o,secret:l}=n.config||{};if(!o)continue;const c={event:"link_click",link_id:t,timestamp:new Date().toISOString(),data:e},d={"Content-Type":"application/json","User-Agent":"Nanhi.Link-Webhook/1.0"};if(l){const u=await this.generateWebhookSignature(JSON.stringify(c),l);d["X-Nanhi-Signature"]=u}try{await fetch(o,{method:"POST",headers:d,body:JSON.stringify(c)})}catch(u){console.error("Webhook delivery failed:",u)}}}catch(r){console.error("Error sending webhook notifications:",r)}},async generateWebhookSignature(t,e){const r=new TextEncoder,s=await crypto.subtle.importKey("raw",r.encode(e),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),i=await crypto.subtle.sign("HMAC",s,r.encode(t));return"sha256="+Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("")}},zp={async getUserClicks(){try{const{data:{user:t}}=await B.auth.getUser();if(!t)throw new Error("Not authenticated");const{data:e,error:r}=await B.from("clicks").select(`
          *,
          links!inner(user_id)
        `).eq("links.user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(t){throw console.error("Error fetching user clicks:",t),t}},async getLinkClicks(t){try{const{data:e,error:r}=await B.from("clicks").select("*").eq("link_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Error fetching link clicks:",e),e}},async recordClick(t,e={}){try{const{data:r,error:s}=await B.from("clicks").insert({link_id:t,ip_address:e.ip_address||null,user_agent:e.user_agent||null,referer:e.referer||null,country:e.country||null,city:e.city||null,device:e.device||null,browser:e.browser||null,os:e.os||null}).select().single();if(s)throw s;return Hp.sendWebhookNotification(t,{...e,click_id:r.id,timestamp:r.created_at}).catch(i=>{console.error("Webhook notification failed:",i)}),r}catch(r){throw console.error("Error recording click:",r),r}},async getClickAnalytics(t,e="7d"){try{let r=new Date;switch(e){case"24h":r.setHours(r.getHours()-24);break;case"7d":r.setDate(r.getDate()-7);break;case"30d":r.setDate(r.getDate()-30);break;case"90d":r.setDate(r.getDate()-90);break;default:r.setDate(r.getDate()-7)}const{data:s,error:i}=await B.from("clicks").select("*").eq("link_id",t).gte("created_at",r.toISOString()).order("created_at",{ascending:!1});if(i)throw i;return s||[]}catch(r){throw console.error("Error fetching click analytics:",r),r}}},Wp=m.createContext({}),Gp=({children:t})=>{const[e,r]=m.useState([]),[s,i]=m.useState([]),[n,o]=m.useState(!0);m.useEffect(()=>{(async()=>{try{o(!0);const[d,u]=await Promise.all([qp.getUserLinks().catch(()=>[]),zp.getUserClicks().catch(()=>[])]);r(d||[]),i(u||[])}catch(d){console.error("Error fetching data:",d),r([]),i([])}finally{o(!1)}})()},[]);const l={links:e||[],clicks:s||[],setLinks:r,setClicks:i,loading:n,setLoading:o};return a.jsx(Wp.Provider,{value:l,children:t})};Vs.createRoot(document.getElementById("root")).render(a.jsx(ba.StrictMode,{children:a.jsx(vd,{children:a.jsx(Lo,{children:a.jsxs(Gp,{children:[a.jsx(Mp,{}),a.jsx(io,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})})}));
